diff --git a/lib/commonjs/Carousel.js b/lib/commonjs/Carousel.js
index 3011a4efa77dc104be104bafbe7dc7ad028c8117..2d8d56be20e9190524b4125bed55d22cc9998768 100644
--- a/lib/commonjs/Carousel.js
+++ b/lib/commonjs/Carousel.js
@@ -1,2 +1,2 @@
-var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _reactNativeGestureHandler=require("react-native-gesture-handler");var _reactNativeReanimated=require("react-native-reanimated");var _useAutoPlay2=require("./hooks/useAutoPlay");var _useCarouselController=require("./hooks/useCarouselController");var _useCommonVariables=require("./hooks/useCommonVariables");var _useInitProps=require("./hooks/useInitProps");var _useLayoutConfig=require("./hooks/useLayoutConfig");var _useOnProgressChange=require("./hooks/useOnProgressChange");var _usePropsErrorBoundary=require("./hooks/usePropsErrorBoundary");var _useVisibleRanges=require("./hooks/useVisibleRanges");var _BaseLayout=require("./layouts/BaseLayout");var _ScrollViewGesture=require("./ScrollViewGesture");var _store=require("./store");var _computedWithAutoFillData=require("./utils/computedWithAutoFillData");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/Carousel.tsx";var _worklet_10125235996566_init_data={code:"function anonymous() {\n  const {\n    size,\n    dataLength,\n    handlerOffset,\n    loop\n  } = this._closure;\n  const totalSize = size * dataLength;\n  const x = handlerOffset.value % totalSize;\n  if (!loop) return handlerOffset.value;\n  return isNaN(x) ? 0 : x;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/Carousel.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"size\",\"dataLength\",\"handlerOffset\",\"loop\",\"_closure\",\"totalSize\",\"x\",\"value\",\"isNaN\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/Carousel.tsx\"],\"mappings\":\"AA2DoC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,IAAA;IAAAC,UAAA;IAAAC,aAAA;IAAAC;EAAA,SAAAC,QAAA;EACpC,MAAMC,SAAS,GAAGL,IAAI,GAAGC,UAAU;EACnC,MAAMK,CAAC,GAAGJ,aAAa,CAACK,KAAK,GAAGF,SAAS;EAEzC,IAAI,CAACF,IAAI,EACP,OAAOD,aAAa,CAACK,KAAK;EAE5B,OAAOC,KAAK,CAACF,CAAC,CAAC,GAAG,CAAC,GAAGA,CAAC;AACzB\"}"};var Carousel=_react.default.forwardRef(function(_props,ref){var props=(0,_useInitProps.useInitProps)(_props);var testID=props.testID,loop=props.loop,autoFillData=props.autoFillData,data=props.data,dataLength=props.dataLength,rawData=props.rawData,rawDataLength=props.rawDataLength,mode=props.mode,style=props.style,width=props.width,height=props.height,vertical=props.vertical,autoPlay=props.autoPlay,windowSize=props.windowSize,autoPlayReverse=props.autoPlayReverse,autoPlayInterval=props.autoPlayInterval,scrollAnimationDuration=props.scrollAnimationDuration,withAnimation=props.withAnimation,renderItem=props.renderItem,onScrollEnd=props.onScrollEnd,onSnapToItem=props.onSnapToItem,_onScrollBegin=props.onScrollBegin,onProgressChange=props.onProgressChange,customAnimation=props.customAnimation,defaultIndex=props.defaultIndex;var commonVariables=(0,_useCommonVariables.useCommonVariables)(props);var size=commonVariables.size,handlerOffset=commonVariables.handlerOffset;var offsetX=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-5,-27];var _f=function _f(){var totalSize=size*dataLength;var x=handlerOffset.value%totalSize;if(!loop)return handlerOffset.value;return isNaN(x)?0:x;};_f._closure={size:size,dataLength:dataLength,handlerOffset:handlerOffset,loop:loop};_f.__initData=_worklet_10125235996566_init_data;_f.__workletHash=10125235996566;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[loop,size,dataLength]);(0,_usePropsErrorBoundary.usePropsErrorBoundary)(Object.assign({},props,{dataLength:dataLength}));(0,_useOnProgressChange.useOnProgressChange)({autoFillData:autoFillData,loop:loop,size:size,offsetX:offsetX,rawDataLength:rawDataLength,onProgressChange:onProgressChange});var carouselController=(0,_useCarouselController.useCarouselController)({loop:loop,size:size,dataLength:dataLength,autoFillData:autoFillData,handlerOffset:handlerOffset,withAnimation:withAnimation,defaultIndex:defaultIndex,onScrollEnd:function onScrollEnd(){return(0,_reactNativeReanimated.runOnJS)(_onScrollEnd)();},onScrollBegin:function onScrollBegin(){return!!_onScrollBegin&&(0,_reactNativeReanimated.runOnJS)(_onScrollBegin)();},duration:scrollAnimationDuration});var next=carouselController.next,prev=carouselController.prev,scrollTo=carouselController.scrollTo,getSharedIndex=carouselController.getSharedIndex,getCurrentIndex=carouselController.getCurrentIndex;var _useAutoPlay=(0,_useAutoPlay2.useAutoPlay)({autoPlay:autoPlay,autoPlayInterval:autoPlayInterval,autoPlayReverse:autoPlayReverse,carouselController:carouselController}),startAutoPlay=_useAutoPlay.start,pauseAutoPlay=_useAutoPlay.pause;var _onScrollEnd=_react.default.useCallback(function(){var _sharedIndex=Math.round(getSharedIndex());var realIndex=(0,_computedWithAutoFillData.computedRealIndexWithAutoFillData)({index:_sharedIndex,dataLength:rawDataLength,loop:loop,autoFillData:autoFillData});if(onSnapToItem)onSnapToItem(realIndex);if(onScrollEnd)onScrollEnd(realIndex);},[loop,autoFillData,rawDataLength,getSharedIndex,onSnapToItem,onScrollEnd]);var scrollViewGestureOnScrollBegin=_react.default.useCallback(function(){pauseAutoPlay();_onScrollBegin==null?void 0:_onScrollBegin();},[_onScrollBegin,pauseAutoPlay]);var scrollViewGestureOnScrollEnd=_react.default.useCallback(function(){startAutoPlay();_onScrollEnd();},[_onScrollEnd,startAutoPlay]);var scrollViewGestureOnTouchBegin=_react.default.useCallback(pauseAutoPlay,[pauseAutoPlay]);var scrollViewGestureOnTouchEnd=_react.default.useCallback(startAutoPlay,[startAutoPlay]);_react.default.useImperativeHandle(ref,function(){return{next:next,prev:prev,getCurrentIndex:getCurrentIndex,scrollTo:scrollTo};},[getCurrentIndex,next,prev,scrollTo]);var visibleRanges=(0,_useVisibleRanges.useVisibleRanges)({total:dataLength,viewSize:size,translation:handlerOffset,windowSize:windowSize});var layoutConfig=(0,_useLayoutConfig.useLayoutConfig)(Object.assign({},props,{size:size}));var renderLayout=_react.default.useCallback(function(item,i){var realIndex=(0,_computedWithAutoFillData.computedRealIndexWithAutoFillData)({index:i,dataLength:rawDataLength,loop:loop,autoFillData:autoFillData});return(0,_jsxRuntime.jsx)(_BaseLayout.BaseLayout,{index:i,handlerOffset:offsetX,visibleRanges:visibleRanges,animationStyle:customAnimation||layoutConfig,children:function children(_ref){var animationValue=_ref.animationValue;return renderItem({item:item,index:realIndex,animationValue:animationValue});}},i);},[loop,rawData,offsetX,visibleRanges,autoFillData,renderItem,layoutConfig,customAnimation]);return(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.GestureHandlerRootView,{children:(0,_jsxRuntime.jsx)(_store.CTX.Provider,{value:{props:props,common:commonVariables},children:(0,_jsxRuntime.jsx)(_ScrollViewGesture.ScrollViewGesture,{size:size,translation:handlerOffset,style:[styles.container,{width:width||"100%",height:height||"100%"},style,vertical?styles.itemsVertical:styles.itemsHorizontal],testID:testID,onScrollBegin:scrollViewGestureOnScrollBegin,onScrollEnd:scrollViewGestureOnScrollEnd,onTouchBegin:scrollViewGestureOnTouchBegin,onTouchEnd:scrollViewGestureOnTouchEnd,children:data.map(renderLayout)},mode)})});});var _default=Carousel;exports.default=_default;var styles=_reactNative.StyleSheet.create({container:{overflow:"hidden"},itemsHorizontal:{flexDirection:"row"},itemsVertical:{flexDirection:"column"}});
+var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _reactNativeGestureHandler=require("react-native-gesture-handler");var _reactNativeReanimated=require("react-native-reanimated");var _useAutoPlay2=require("./hooks/useAutoPlay");var _useCarouselController=require("./hooks/useCarouselController");var _useCommonVariables=require("./hooks/useCommonVariables");var _useInitProps=require("./hooks/useInitProps");var _useLayoutConfig=require("./hooks/useLayoutConfig");var _useOnProgressChange=require("./hooks/useOnProgressChange");var _usePropsErrorBoundary=require("./hooks/usePropsErrorBoundary");var _useVisibleRanges=require("./hooks/useVisibleRanges");var _BaseLayout=require("./layouts/BaseLayout");var _ScrollViewGesture=require("./ScrollViewGesture");var _store=require("./store");var _computedWithAutoFillData=require("./utils/computedWithAutoFillData");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/home/vumanh/react-native-reanimated-carousel/src/Carousel.tsx";var _worklet_10125235996566_init_data={code:"function anonymous() {\n  const {\n    size,\n    dataLength,\n    handlerOffset,\n    loop\n  } = this._closure;\n  const totalSize = size * dataLength;\n  const x = handlerOffset.value % totalSize;\n  if (!loop) return handlerOffset.value;\n  return isNaN(x) ? 0 : x;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/Carousel.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"size\",\"dataLength\",\"handlerOffset\",\"loop\",\"_closure\",\"totalSize\",\"x\",\"value\",\"isNaN\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/Carousel.tsx\"],\"mappings\":\"AA2DoC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,IAAA;IAAAC,UAAA;IAAAC,aAAA;IAAAC;EAAA,SAAAC,QAAA;EACpC,MAAMC,SAAS,GAAGL,IAAI,GAAGC,UAAU;EACnC,MAAMK,CAAC,GAAGJ,aAAa,CAACK,KAAK,GAAGF,SAAS;EAEzC,IAAI,CAACF,IAAI,EACP,OAAOD,aAAa,CAACK,KAAK;EAE5B,OAAOC,KAAK,CAACF,CAAC,CAAC,GAAG,CAAC,GAAGA,CAAC;AACzB\"}"};var Carousel=_react.default.forwardRef(function(_props,ref){var props=(0,_useInitProps.useInitProps)(_props);var testID=props.testID,loop=props.loop,autoFillData=props.autoFillData,data=props.data,dataLength=props.dataLength,rawData=props.rawData,rawDataLength=props.rawDataLength,mode=props.mode,style=props.style,width=props.width,height=props.height,vertical=props.vertical,autoPlay=props.autoPlay,windowSize=props.windowSize,autoPlayReverse=props.autoPlayReverse,autoPlayInterval=props.autoPlayInterval,scrollAnimationDuration=props.scrollAnimationDuration,withAnimation=props.withAnimation,renderItem=props.renderItem,onScrollEnd=props.onScrollEnd,onSnapToItem=props.onSnapToItem,_onScrollBegin=props.onScrollBegin,onProgressChange=props.onProgressChange,customAnimation=props.customAnimation,defaultIndex=props.defaultIndex;var commonVariables=(0,_useCommonVariables.useCommonVariables)(props);var size=commonVariables.size,handlerOffset=commonVariables.handlerOffset;var offsetX=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-5,-27];var _f=function _f(){var totalSize=size*dataLength;var x=handlerOffset.value%totalSize;if(!loop)return handlerOffset.value;return isNaN(x)?0:x;};_f._closure={size:size,dataLength:dataLength,handlerOffset:handlerOffset,loop:loop};_f.__initData=_worklet_10125235996566_init_data;_f.__workletHash=10125235996566;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[loop,size,dataLength]);(0,_usePropsErrorBoundary.usePropsErrorBoundary)(Object.assign({},props,{dataLength:dataLength}));(0,_useOnProgressChange.useOnProgressChange)({autoFillData:autoFillData,loop:loop,size:size,offsetX:offsetX,rawDataLength:rawDataLength,onProgressChange:onProgressChange});var carouselController=(0,_useCarouselController.useCarouselController)({loop:loop,size:size,dataLength:dataLength,autoFillData:autoFillData,handlerOffset:handlerOffset,withAnimation:withAnimation,defaultIndex:defaultIndex,onScrollEnd:function onScrollEnd(){return(0,_reactNativeReanimated.runOnJS)(_onScrollEnd)();},onScrollBegin:function onScrollBegin(){return!!_onScrollBegin&&(0,_reactNativeReanimated.runOnJS)(_onScrollBegin)();},duration:scrollAnimationDuration});var next=carouselController.next,prev=carouselController.prev,scrollTo=carouselController.scrollTo,getSharedIndex=carouselController.getSharedIndex,getCurrentIndex=carouselController.getCurrentIndex;var _useAutoPlay=(0,_useAutoPlay2.useAutoPlay)({autoPlay:autoPlay,autoPlayInterval:autoPlayInterval,autoPlayReverse:autoPlayReverse,carouselController:carouselController}),startAutoPlay=_useAutoPlay.start,pauseAutoPlay=_useAutoPlay.pause;var _onScrollEnd=_react.default.useCallback(function(){var _sharedIndex=Math.round(getSharedIndex());var realIndex=(0,_computedWithAutoFillData.computedRealIndexWithAutoFillData)({index:_sharedIndex,dataLength:rawDataLength,loop:loop,autoFillData:autoFillData});if(onSnapToItem)onSnapToItem(realIndex);if(onScrollEnd)onScrollEnd(realIndex);},[loop,autoFillData,rawDataLength,getSharedIndex,onSnapToItem,onScrollEnd]);var scrollViewGestureOnScrollBegin=_react.default.useCallback(function(){pauseAutoPlay();_onScrollBegin==null?void 0:_onScrollBegin();},[_onScrollBegin,pauseAutoPlay]);var scrollViewGestureOnScrollEnd=_react.default.useCallback(function(){startAutoPlay();_onScrollEnd();},[_onScrollEnd,startAutoPlay]);var scrollViewGestureOnTouchBegin=_react.default.useCallback(pauseAutoPlay,[pauseAutoPlay]);var scrollViewGestureOnTouchEnd=_react.default.useCallback(startAutoPlay,[startAutoPlay]);_react.default.useImperativeHandle(ref,function(){return{next:next,prev:prev,getCurrentIndex:getCurrentIndex,scrollTo:scrollTo};},[getCurrentIndex,next,prev,scrollTo]);var visibleRanges=(0,_useVisibleRanges.useVisibleRanges)({total:dataLength,viewSize:size,translation:handlerOffset,windowSize:windowSize});var layoutConfig=(0,_useLayoutConfig.useLayoutConfig)(Object.assign({},props,{size:size}));var renderLayout=_react.default.useCallback(function(item,i){var realIndex=(0,_computedWithAutoFillData.computedRealIndexWithAutoFillData)({index:i,dataLength:rawDataLength,loop:loop,autoFillData:autoFillData});return(0,_jsxRuntime.jsx)(_BaseLayout.BaseLayout,{index:i,handlerOffset:offsetX,visibleRanges:visibleRanges,animationStyle:customAnimation||layoutConfig,children:function children(_ref){var animationValue=_ref.animationValue;return renderItem({item:item,index:realIndex,animationValue:animationValue});}},i);},[loop,rawData,offsetX,visibleRanges,autoFillData,renderItem,layoutConfig,customAnimation]);return(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.GestureHandlerRootView,{children:(0,_jsxRuntime.jsx)(_store.CTX.Provider,{value:{props:props,common:commonVariables},children:(0,_jsxRuntime.jsx)(_ScrollViewGesture.ScrollViewGesture,{size:size,translation:handlerOffset,style:[styles.container,{width:width||"100%",height:height||"100%"},style,vertical?styles.itemsVertical:styles.itemsHorizontal],testID:testID,onScrollBegin:scrollViewGestureOnScrollBegin,onScrollEnd:scrollViewGestureOnScrollEnd,onTouchBegin:scrollViewGestureOnTouchBegin,onTouchEnd:scrollViewGestureOnTouchEnd,children:data.map(renderLayout)},mode)})});});var _default=Carousel;exports.default=_default;var styles=_reactNative.StyleSheet.create({container:{overflow:"hidden"},itemsHorizontal:{flexDirection:"row"},itemsVertical:{flexDirection:"column"}});
 //# sourceMappingURL=Carousel.js.map
\ No newline at end of file
diff --git a/lib/commonjs/Carousel.js.map b/lib/commonjs/Carousel.js.map
index 31c846279456fcbd8fc1761b057bce9d5720e540..9a77079a3fcbe343e9c2f6a22c31926a79862a66 100644
--- a/lib/commonjs/Carousel.js.map
+++ b/lib/commonjs/Carousel.js.map
@@ -1 +1 @@
-{"version":3,"sources":["Carousel.tsx"],"names":["Carousel","React","forwardRef","_props","ref","props","testID","loop","autoFillData","data","dataLength","rawData","rawDataLength","mode","style","width","height","vertical","autoPlay","windowSize","autoPlayReverse","autoPlayInterval","scrollAnimationDuration","withAnimation","renderItem","onScrollEnd","onSnapToItem","onScrollBegin","onProgressChange","customAnimation","defaultIndex","commonVariables","size","handlerOffset","offsetX","totalSize","x","value","isNaN","carouselController","_onScrollEnd","duration","next","prev","scrollTo","getSharedIndex","getCurrentIndex","startAutoPlay","start","pauseAutoPlay","pause","useCallback","_sharedIndex","Math","round","realIndex","index","scrollViewGestureOnScrollBegin","scrollViewGestureOnScrollEnd","scrollViewGestureOnTouchBegin","scrollViewGestureOnTouchEnd","useImperativeHandle","visibleRanges","total","viewSize","translation","layoutConfig","renderLayout","item","i","animationValue","common","styles","container","itemsVertical","itemsHorizontal","map","StyleSheet","create","overflow","flexDirection"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-use-before-define */\nimport React from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nimport { runOnJS, useDerivedValue } from \"react-native-reanimated\";\n\nimport { useAutoPlay } from \"./hooks/useAutoPlay\";\nimport { useCarouselController } from \"./hooks/useCarouselController\";\nimport { useCommonVariables } from \"./hooks/useCommonVariables\";\nimport { useInitProps } from \"./hooks/useInitProps\";\nimport { useLayoutConfig } from \"./hooks/useLayoutConfig\";\nimport { useOnProgressChange } from \"./hooks/useOnProgressChange\";\nimport { usePropsErrorBoundary } from \"./hooks/usePropsErrorBoundary\";\nimport { useVisibleRanges } from \"./hooks/useVisibleRanges\";\nimport { BaseLayout } from \"./layouts/BaseLayout\";\nimport { ScrollViewGesture } from \"./ScrollViewGesture\";\nimport { CTX } from \"./store\";\nimport type { ICarouselInstance, TCarouselProps } from \"./types\";\nimport { computedRealIndexWithAutoFillData } from \"./utils/computedWithAutoFillData\";\n\nconst Carousel = React.forwardRef<ICarouselInstance, TCarouselProps<any>>(\n  (_props, ref) => {\n    const props = useInitProps(_props);\n\n    const {\n      testID,\n      loop,\n      autoFillData,\n      // Fill data with autoFillData\n      data,\n      // Length of fill data\n      dataLength,\n      // Raw data that has not been processed\n      rawData,\n      // Length of raw data\n      rawDataLength,\n      mode,\n      style,\n      width,\n      height,\n      vertical,\n      autoPlay,\n      windowSize,\n      autoPlayReverse,\n      autoPlayInterval,\n      scrollAnimationDuration,\n      withAnimation,\n      renderItem,\n      onScrollEnd,\n      onSnapToItem,\n      onScrollBegin,\n      onProgressChange,\n      customAnimation,\n      defaultIndex,\n    } = props;\n\n    const commonVariables = useCommonVariables(props);\n    const { size, handlerOffset } = commonVariables;\n\n    const offsetX = useDerivedValue(() => {\n      const totalSize = size * dataLength;\n      const x = handlerOffset.value % totalSize;\n\n      if (!loop)\n        return handlerOffset.value;\n\n      return isNaN(x) ? 0 : x;\n    }, [loop, size, dataLength]);\n\n    usePropsErrorBoundary({ ...props, dataLength });\n    useOnProgressChange({\n      autoFillData,\n      loop,\n      size,\n      offsetX,\n      rawDataLength,\n      onProgressChange,\n    });\n\n    const carouselController = useCarouselController({\n      loop,\n      size,\n      dataLength,\n      autoFillData,\n      handlerOffset,\n      withAnimation,\n      defaultIndex,\n      onScrollEnd: () => runOnJS(_onScrollEnd)(),\n      onScrollBegin: () => !!onScrollBegin && runOnJS(onScrollBegin)(),\n      duration: scrollAnimationDuration,\n    });\n\n    const { next, prev, scrollTo, getSharedIndex, getCurrentIndex }\n            = carouselController;\n\n    const { start: startAutoPlay, pause: pauseAutoPlay } = useAutoPlay({\n      autoPlay,\n      autoPlayInterval,\n      autoPlayReverse,\n      carouselController,\n    });\n\n    const _onScrollEnd = React.useCallback(() => {\n      const _sharedIndex = Math.round(getSharedIndex());\n\n      const realIndex = computedRealIndexWithAutoFillData({\n        index: _sharedIndex,\n        dataLength: rawDataLength,\n        loop,\n        autoFillData,\n      });\n\n      if (onSnapToItem)\n        onSnapToItem(realIndex);\n\n      if (onScrollEnd)\n        onScrollEnd(realIndex);\n    }, [\n      loop,\n      autoFillData,\n      rawDataLength,\n      getSharedIndex,\n      onSnapToItem,\n      onScrollEnd,\n    ]);\n\n    const scrollViewGestureOnScrollBegin = React.useCallback(() => {\n      pauseAutoPlay();\n      onScrollBegin?.();\n    }, [onScrollBegin, pauseAutoPlay]);\n\n    const scrollViewGestureOnScrollEnd = React.useCallback(() => {\n      startAutoPlay();\n      _onScrollEnd();\n    }, [_onScrollEnd, startAutoPlay]);\n\n    const scrollViewGestureOnTouchBegin = React.useCallback(pauseAutoPlay, [\n      pauseAutoPlay,\n    ]);\n\n    const scrollViewGestureOnTouchEnd = React.useCallback(startAutoPlay, [\n      startAutoPlay,\n    ]);\n\n    React.useImperativeHandle(\n      ref,\n      () => ({\n        next,\n        prev,\n        getCurrentIndex,\n        scrollTo,\n      }),\n      [getCurrentIndex, next, prev, scrollTo],\n    );\n\n    const visibleRanges = useVisibleRanges({\n      total: dataLength,\n      viewSize: size,\n      translation: handlerOffset,\n      windowSize,\n    });\n\n    const layoutConfig = useLayoutConfig({ ...props, size });\n\n    const renderLayout = React.useCallback(\n      (item: any, i: number) => {\n        const realIndex = computedRealIndexWithAutoFillData({\n          index: i,\n          dataLength: rawDataLength,\n          loop,\n          autoFillData,\n        });\n\n        return (\n          <BaseLayout\n            key={i}\n            index={i}\n            handlerOffset={offsetX}\n            visibleRanges={visibleRanges}\n            animationStyle={customAnimation || layoutConfig}\n          >\n            {({ animationValue }) =>\n              renderItem({\n                item,\n                index: realIndex,\n                animationValue,\n              })\n            }\n          </BaseLayout>\n        );\n      },\n      [\n        loop,\n        rawData,\n        offsetX,\n        visibleRanges,\n        autoFillData,\n        renderItem,\n        layoutConfig,\n        customAnimation,\n      ],\n    );\n\n    return (\n      <GestureHandlerRootView>\n        <CTX.Provider value={{ props, common: commonVariables }}>\n          <ScrollViewGesture\n            key={mode}\n            size={size}\n            translation={handlerOffset}\n            style={[\n              styles.container,\n              {\n                width: width || \"100%\",\n                height: height || \"100%\",\n              },\n              style,\n              vertical\n                ? styles.itemsVertical\n                : styles.itemsHorizontal,\n            ]}\n            testID={testID}\n            onScrollBegin={scrollViewGestureOnScrollBegin}\n            onScrollEnd={scrollViewGestureOnScrollEnd}\n            onTouchBegin={scrollViewGestureOnTouchBegin}\n            onTouchEnd={scrollViewGestureOnTouchEnd}\n          >\n            {data.map(renderLayout)}\n          </ScrollViewGesture>\n        </CTX.Provider>\n      </GestureHandlerRootView>\n    );\n  },\n);\n\nexport default Carousel as <T extends any>(\n  props: React.PropsWithChildren<TCarouselProps<T>>\n) => React.ReactElement;\n\nconst styles = StyleSheet.create({\n  container: {\n    overflow: \"hidden\",\n  },\n  itemsHorizontal: {\n    flexDirection: \"row\",\n  },\n  itemsVertical: {\n    flexDirection: \"column\",\n  },\n});\n"]}
\ No newline at end of file
+{"version":3,"sources":["Carousel.tsx"],"names":["Carousel","React","forwardRef","_props","ref","props","testID","loop","autoFillData","data","dataLength","rawData","rawDataLength","mode","style","width","height","vertical","autoPlay","windowSize","autoPlayReverse","autoPlayInterval","scrollAnimationDuration","withAnimation","renderItem","onScrollEnd","onSnapToItem","onScrollBegin","onProgressChange","customAnimation","defaultIndex","commonVariables","size","handlerOffset","offsetX","totalSize","x","value","isNaN","carouselController","_onScrollEnd","duration","next","prev","scrollTo","getSharedIndex","getCurrentIndex","startAutoPlay","start","pauseAutoPlay","pause","useCallback","_sharedIndex","Math","round","realIndex","index","scrollViewGestureOnScrollBegin","scrollViewGestureOnScrollEnd","scrollViewGestureOnTouchBegin","scrollViewGestureOnTouchEnd","useImperativeHandle","visibleRanges","total","viewSize","translation","layoutConfig","renderLayout","item","i","animationValue","common","styles","container","itemsVertical","itemsHorizontal","map","StyleSheet","create","overflow","flexDirection"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-use-before-define */\nimport React from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nimport { runOnJS, useDerivedValue } from \"react-native-reanimated\";\n\nimport { useAutoPlay } from \"./hooks/useAutoPlay\";\nimport { useCarouselController } from \"./hooks/useCarouselController\";\nimport { useCommonVariables } from \"./hooks/useCommonVariables\";\nimport { useInitProps } from \"./hooks/useInitProps\";\nimport { useLayoutConfig } from \"./hooks/useLayoutConfig\";\nimport { useOnProgressChange } from \"./hooks/useOnProgressChange\";\nimport { usePropsErrorBoundary } from \"./hooks/usePropsErrorBoundary\";\nimport { useVisibleRanges } from \"./hooks/useVisibleRanges\";\nimport { BaseLayout } from \"./layouts/BaseLayout\";\nimport { ScrollViewGesture } from \"./ScrollViewGesture\";\nimport { CTX } from \"./store\";\nimport type { ICarouselInstance, TCarouselProps } from \"./types\";\nimport { computedRealIndexWithAutoFillData } from \"./utils/computedWithAutoFillData\";\n\nconst Carousel = React.forwardRef<ICarouselInstance, TCarouselProps<any>>(\n  (_props, ref) => {\n    const props = useInitProps(_props);\n\n    const {\n      testID,\n      loop,\n      autoFillData,\n      // Fill data with autoFillData\n      data,\n      // Length of fill data\n      dataLength,\n      // Raw data that has not been processed\n      rawData,\n      // Length of raw data\n      rawDataLength,\n      mode,\n      style,\n      width,\n      height,\n      vertical,\n      autoPlay,\n      windowSize,\n      autoPlayReverse,\n      autoPlayInterval,\n      scrollAnimationDuration,\n      withAnimation,\n      renderItem,\n      onScrollEnd,\n      onSnapToItem,\n      onScrollBegin,\n      onProgressChange,\n      customAnimation,\n      defaultIndex,\n    } = props;\n\n    const commonVariables = useCommonVariables(props);\n    const { size, handlerOffset } = commonVariables;\n\n    const offsetX = useDerivedValue(() => {\n      const totalSize = size * dataLength;\n      const x = handlerOffset.value % totalSize;\n\n      if (!loop)\n        return handlerOffset.value;\n\n      return isNaN(x) ? 0 : x;\n    }, [loop, size, dataLength]);\n\n    usePropsErrorBoundary({ ...props, dataLength });\n    useOnProgressChange({\n      autoFillData,\n      loop,\n      size,\n      offsetX,\n      rawDataLength,\n      onProgressChange,\n    });\n\n    const carouselController = useCarouselController({\n      loop,\n      size,\n      dataLength,\n      autoFillData,\n      handlerOffset,\n      withAnimation,\n      defaultIndex,\n      onScrollEnd: () => runOnJS(_onScrollEnd)(),\n      onScrollBegin: () => !!onScrollBegin && runOnJS(onScrollBegin)(),\n      duration: scrollAnimationDuration,\n    });\n\n    const { next, prev, scrollTo, getSharedIndex, getCurrentIndex }\n            = carouselController;\n\n    const { start: startAutoPlay, pause: pauseAutoPlay } = useAutoPlay({\n      autoPlay,\n      autoPlayInterval,\n      autoPlayReverse,\n      carouselController,\n    });\n\n    const _onScrollEnd = React.useCallback(() => {\n      const _sharedIndex = Math.round(getSharedIndex());\n\n      const realIndex = computedRealIndexWithAutoFillData({\n        index: _sharedIndex,\n        dataLength: rawDataLength,\n        loop,\n        autoFillData,\n      });\n\n      if (onSnapToItem)\n        onSnapToItem(realIndex);\n\n      if (onScrollEnd)\n        onScrollEnd(realIndex);\n    }, [\n      loop,\n      autoFillData,\n      rawDataLength,\n      getSharedIndex,\n      onSnapToItem,\n      onScrollEnd,\n    ]);\n\n    const scrollViewGestureOnScrollBegin = React.useCallback(() => {\n      pauseAutoPlay();\n      onScrollBegin?.();\n    }, [onScrollBegin, pauseAutoPlay]);\n\n    const scrollViewGestureOnScrollEnd = React.useCallback(() => {\n      startAutoPlay();\n      _onScrollEnd();\n    }, [_onScrollEnd, startAutoPlay]);\n\n    const scrollViewGestureOnTouchBegin = React.useCallback(pauseAutoPlay, [\n      pauseAutoPlay,\n    ]);\n\n    const scrollViewGestureOnTouchEnd = React.useCallback(startAutoPlay, [\n      startAutoPlay,\n    ]);\n\n    React.useImperativeHandle(\n      ref,\n      () => ({\n        next,\n        prev,\n        getCurrentIndex,\n        scrollTo,\n      }),\n      [getCurrentIndex, next, prev, scrollTo],\n    );\n\n    const visibleRanges = useVisibleRanges({\n      total: dataLength,\n      viewSize: size,\n      translation: handlerOffset,\n      windowSize,\n    });\n\n    const layoutConfig = useLayoutConfig({ ...props, size });\n\n    const renderLayout = React.useCallback(\n      (item: any, i: number) => {\n        const realIndex = computedRealIndexWithAutoFillData({\n          index: i,\n          dataLength: rawDataLength,\n          loop,\n          autoFillData,\n        });\n\n        return (\n          <BaseLayout\n            key={i}\n            index={i}\n            handlerOffset={offsetX}\n            visibleRanges={visibleRanges}\n            animationStyle={customAnimation || layoutConfig}\n          >\n            {({ animationValue }) =>\n              renderItem({\n                item,\n                index: realIndex,\n                animationValue,\n              })\n            }\n          </BaseLayout>\n        );\n      },\n      [\n        loop,\n        rawData,\n        offsetX,\n        visibleRanges,\n        autoFillData,\n        renderItem,\n        layoutConfig,\n        customAnimation,\n      ],\n    );\n\n    return (\n      <GestureHandlerRootView>\n        <CTX.Provider value={{ props, common: commonVariables }}>\n          <ScrollViewGesture\n            key={mode}\n            size={size}\n            translation={handlerOffset}\n            style={[\n              styles.container,\n              {\n                width: width || \"100%\",\n                height: height || \"100%\",\n              },\n              style,\n              vertical\n                ? styles.itemsVertical\n                : styles.itemsHorizontal,\n            ]}\n            testID={testID}\n            onScrollBegin={scrollViewGestureOnScrollBegin}\n            onScrollEnd={scrollViewGestureOnScrollEnd}\n            onTouchBegin={scrollViewGestureOnTouchBegin}\n            onTouchEnd={scrollViewGestureOnTouchEnd}\n          >\n            {data.map(renderLayout)}\n          </ScrollViewGesture>\n        </CTX.Provider>\n      </GestureHandlerRootView>\n    );\n  },\n);\n\nexport default Carousel as <T extends any>(\n  props: React.PropsWithChildren<TCarouselProps<T>>\n) => React.ReactElement;\n\nconst styles = StyleSheet.create({\n  container: {\n    overflow: \"hidden\",\n  },\n  itemsHorizontal: {\n    flexDirection: \"row\",\n  },\n  itemsVertical: {\n    flexDirection: \"column\",\n  },\n});\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/ScrollViewGesture.js b/lib/commonjs/ScrollViewGesture.js
index d4392aea12481c503041a34ebfb8d2f24d884cba..0a18d4ce747bb3f911aa0bebc8423c3de164ee26 100644
--- a/lib/commonjs/ScrollViewGesture.js
+++ b/lib/commonjs/ScrollViewGesture.js
@@ -1,2 +1,2 @@
-var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ScrollViewGesture=void 0;var _react=_interopRequireDefault(require("react"));var _reactNativeGestureHandler=require("react-native-gesture-handler");var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _constants=require("./constants");var _store=require("./store");var _dealWithAnimation=require("./utils/dealWithAnimation");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_10100718122216_init_data={code:"function anonymous() {\n  const {\n    vertical\n  } = this._closure;\n  return !vertical;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"vertical\",\"_closure\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAqEuC,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAO,CAAAD,QAAA;AAAA\"}"};var _worklet_736417391548_init_data={code:"function anonymous() {\n  const {\n    infinite,\n    overscrollEnabled,\n    measure,\n    containerRef,\n    dataLength,\n    size\n  } = this._closure;\n  if (!infinite && !overscrollEnabled) {\n    const {\n      width: containerWidth = 0\n    } = measure(containerRef);\n    if (dataLength * size < containerWidth) return 0;\n    return dataLength * size - containerWidth;\n  }\n  return dataLength * size;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"infinite\",\"overscrollEnabled\",\"measure\",\"containerRef\",\"dataLength\",\"size\",\"_closure\",\"width\",\"containerWidth\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA4EqC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,iBAAA;IAAAC,OAAA;IAAAC,YAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EAGvC,IAAI,CAACN,QAAQ,IAAI,CAACC,iBAAiB,EAAE;IACnC,MAAM;MAAEM,KAAK,EAAEC,cAAc,GAAG;IAAE,CAAC,GAAGN,OAAO,CAACC,YAAY,CAAC;IAG3D,IAAIC,UAAU,GAAGC,IAAI,GAAGG,cAAc,EACpC,OAAO,CAAC;IAGV,OAAOJ,UAAU,GAAGC,IAAI,GAAGG,cAAc;EAC3C;EAEA,OAAOJ,UAAU,GAAGC,IAAI;AAC1B\"}"};var _worklet_38454346678_init_data={code:"function anonymous(toValue, onFinished) {\n  const {\n    scrollAnimationDuration,\n    Easing,\n    dealWithAnimation,\n    withAnimation,\n    runOnJS\n  } = this._closure;\n  var _withAnimation;\n  const defaultWithAnimation = {\n    type: \"timing\",\n    config: {\n      duration: scrollAnimationDuration + 100,\n      easing: Easing.easeOutQuart\n    }\n  };\n  return dealWithAnimation((_withAnimation = withAnimation) !== null && _withAnimation !== void 0 ? _withAnimation : defaultWithAnimation)(toValue, function (isFinished) {\n    \"worklet\";\n\n    if (isFinished) onFinished && runOnJS(onFinished)();\n  });\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"toValue\",\"onFinished\",\"scrollAnimationDuration\",\"Easing\",\"dealWithAnimation\",\"withAnimation\",\"runOnJS\",\"_closure\",\"_withAnimation\",\"defaultWithAnimation\",\"type\",\"config\",\"duration\",\"easing\",\"easeOutQuart\",\"isFinished\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA8FI,SAACA,SAAeA,CAAAC,OAAE,EAAAC,UAA4B;EAAA;IAAAC,uBAAA;IAAAC,MAAA;IAAAC,iBAAA;IAAAC,aAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,cAAA;EAE5C,MAAMC,oBAAyC,GAAG;IAChDC,IAAI,EAAE,QAAQ;IACdC,MAAM,EAAE;MACNC,QAAQ,EAAEV,uBAAuB,GAAG,GAAG;MACvCW,MAAM,EAAEV,MAAM,CAACW;IACjB;EACF,CAAC;EAED,OAAOV,iBAAiB,EAAAI,cAAA,GAACH,aAAa,cAAAG,cAAA,cAAAA,cAAA,GAAIC,oBAAoB,CAAC,CAC7DT,OAAO,EACP,UAACe,UAAmB,EAAK;IACvB,SAAS;;IACT,IAAIA,UAAU,EACZd,UAAU,IAAIK,OAAO,CAACL,UAAU,CAAC,CAAC,CAAC;EACvC,CACF,CAAC;AACH\"}"};var _worklet_15664499378840_init_data={code:"function anonymous(isFinished) {\n  const {\n    onFinished,\n    runOnJS\n  } = this._closure;\n  if (isFinished) onFinished && runOnJS(onFinished)();\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"onFinished\",\"runOnJS\",\"_closure\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA0GQ,SAACA,UAAAC,UAAwB;EAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EAEvB,IAAIH,UAAU,EACZC,UAAU,IAAIC,OAAO,CAACD,UAAU,CAAC,CAAC,CAAC;AACvC\"}"};var _worklet_15595988837712_init_data={code:"function anonymous(onFinished) {\n  const {\n    translation,\n    scrollEndVelocity,\n    withDecay,\n    maxScrollDistancePerSwipe,\n    scrollEndTranslation,\n    pagingEnabled,\n    size,\n    infinite,\n    withSpring,\n    maxPage,\n    snapEnabled,\n    overscrollEnabled,\n    getLimit\n  } = this._closure;\n  const origin = translation.value;\n  const velocity = scrollEndVelocity.value;\n  let finalTranslation = withDecay({\n    velocity: velocity,\n    deceleration: 0.999\n  });\n  if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe) {\n    finalTranslation = origin;\n  } else {\n    if (pagingEnabled) {\n      const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1);\n      const computed = offset < 0 ? Math.ceil : Math.floor;\n      const page = computed(-translation.value / size);\n      if (infinite) {\n        const finalPage = page + offset;\n        finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n      } else {\n        const finalPage = Math.min(maxPage - 1, Math.max(0, page + offset));\n        finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n      }\n    }\n    if (!pagingEnabled && snapEnabled) {\n      const nextPage = Math.round((origin + velocity * 0.4) / size) * size;\n      finalTranslation = withSpring(withProcessTranslation(nextPage), onFinished);\n    }\n  }\n  translation.value = finalTranslation;\n  function withProcessTranslation(translation) {\n    if (!infinite && !overscrollEnabled) {\n      const limit = getLimit();\n      const sign = Math.sign(translation);\n      return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n    }\n    return translation;\n  }\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"onFinished\",\"translation\",\"scrollEndVelocity\",\"withDecay\",\"maxScrollDistancePerSwipe\",\"scrollEndTranslation\",\"pagingEnabled\",\"size\",\"infinite\",\"withSpring\",\"maxPage\",\"snapEnabled\",\"overscrollEnabled\",\"getLimit\",\"_closure\",\"origin\",\"value\",\"velocity\",\"finalTranslation\",\"deceleration\",\"Math\",\"abs\",\"offset\",\"computed\",\"ceil\",\"floor\",\"page\",\"finalPage\",\"withProcessTranslation\",\"min\",\"max\",\"nextPage\",\"round\",\"limit\",\"sign\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAqHI,SAACA,UAAAC,UAA4B;EAAA;IAAAC,WAAA;IAAAC,iBAAA;IAAAC,SAAA;IAAAC,yBAAA;IAAAC,oBAAA;IAAAC,aAAA;IAAAC,IAAA;IAAAC,QAAA;IAAAC,UAAA;IAAAC,OAAA;IAAAC,WAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAE3B,MAAMC,MAAM,GAAGd,WAAW,CAACe,KAAK;EAChC,MAAMC,QAAQ,GAAGf,iBAAiB,CAACc,KAAK;EAExC,IAAIE,gBAAwB,GAAGf,SAAS,CAAC;IAAEc,QAAQ,EAARA,QAAQ;IAAEE,YAAY,EAAE;EAAM,CAAC,CAAC;EAG3E,IAAI,OAAOf,yBAAyB,KAAK,QAAQ,IAAIgB,IAAI,CAACC,GAAG,CAAChB,oBAAoB,CAACW,KAAK,CAAC,GAAGZ,yBAAyB,EAAE;IACrHc,gBAAgB,GAAGH,MAAM;EAC3B,CAAC,MACI;IAQH,IAAIT,aAAa,EAAE;MAEjB,MAAMgB,MAAM,GAAG,EAAEjB,oBAAoB,CAACW,KAAK,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;MAC1D,MAAMO,QAAQ,GAAGD,MAAM,GAAG,CAAC,GAAGF,IAAI,CAACI,IAAI,GAAGJ,IAAI,CAACK,KAAK;MACpD,MAAMC,IAAI,GAAGH,QAAQ,CAAC,CAACtB,WAAW,CAACe,KAAK,GAAGT,IAAI,CAAC;MAEhD,IAAIC,QAAQ,EAAE;QACZ,MAAMmB,SAAS,GAAGD,IAAI,GAAGJ,MAAM;QAC/BJ,gBAAgB,GAAGT,UAAU,CAACmB,sBAAsB,CAAC,CAACD,SAAS,GAAGpB,IAAI,CAAC,EAAEP,UAAU,CAAC;MACtF,CAAC,MACI;QACH,MAAM2B,SAAS,GAAGP,IAAI,CAACS,GAAG,CAACnB,OAAO,GAAG,CAAC,EAAEU,IAAI,CAACU,GAAG,CAAC,CAAC,EAAEJ,IAAI,GAAGJ,MAAM,CAAC,CAAC;QACnEJ,gBAAgB,GAAGT,UAAU,CAACmB,sBAAsB,CAAC,CAACD,SAAS,GAAGpB,IAAI,CAAC,EAAEP,UAAU,CAAC;MACtF;IACF;IAEA,IAAI,CAACM,aAAa,IAAIK,WAAW,EAAE;MAEjC,MAAMoB,QAAQ,GAAGX,IAAI,CAACY,KAAK,CAAC,CAACjB,MAAM,GAAGE,QAAQ,GAAG,GAAG,IAAIV,IAAI,CAAC,GAAGA,IAAI;MACpEW,gBAAgB,GAAGT,UAAU,CAACmB,sBAAsB,CAACG,QAAQ,CAAC,EAAE/B,UAAU,CAAC;IAC7E;EACF;EAEAC,WAAW,CAACe,KAAK,GAAGE,gBAAgB;EAEpC,SAASU,sBAAsBA,CAAC3B,WAAmB,EAAE;IACnD,IAAI,CAACO,QAAQ,IAAI,CAACI,iBAAiB,EAAE;MACnC,MAAMqB,KAAK,GAAGpB,QAAQ,CAAC,CAAC;MACxB,MAAMqB,IAAI,GAAGd,IAAI,CAACc,IAAI,CAACjC,WAAW,CAAC;MACnC,OAAOiC,IAAI,GAAGd,IAAI,CAACU,GAAG,CAAC,CAAC,EAAEV,IAAI,CAACS,GAAG,CAACI,KAAK,EAAEb,IAAI,CAACC,GAAG,CAACpB,WAAW,CAAC,CAAC,CAAC;IACnE;IAEA,OAAOA,WAAW;EACpB;AACF\"}"};var _worklet_14734469187996_init_data={code:"function anonymous(isFinished) {\n  const {\n    touching,\n    onScrollEnd,\n    runOnJS\n  } = this._closure;\n  if (isFinished) {\n    touching.value = false;\n    onScrollEnd && runOnJS(onScrollEnd)();\n  }\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"touching\",\"onScrollEnd\",\"runOnJS\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA0LI,SAACA,UAAAC,UAAwB;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAEvB,IAAIJ,UAAU,EAAE;IACdC,QAAQ,CAACI,KAAK,GAAG,KAAK;IACtBH,WAAW,IAAIC,OAAO,CAACD,WAAW,CAAC,CAAC,CAAC;EACvC;AACF\"}"};var _worklet_14660770182194_init_data={code:"function anonymous() {\n  const {\n    touching,\n    translation,\n    withDecay,\n    scrollEndVelocity,\n    onFinish\n  } = this._closure;\n  touching.value = true;\n  translation.value = withDecay({\n    velocity: scrollEndVelocity.value\n  }, function (isFinished) {\n    return onFinish(isFinished);\n  });\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"touching\",\"translation\",\"withDecay\",\"scrollEndVelocity\",\"onFinish\",\"_closure\",\"value\",\"velocity\",\"isFinished\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAoMwC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC,SAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAE1CL,QAAQ,CAACM,KAAK,GAAG,IAAI;EACrBL,WAAW,CAACK,KAAK,GAAGJ,SAAS,CAC3B;IAAEK,QAAQ,EAAEJ,iBAAiB,CAACG;EAAM,CAAC,EACrC,UAAAE,UAAU;IAAA,OAAIJ,QAAQ,CAACI,UAAqB,CAC9C;EAAA,EAAC;AACH\"}"};var _worklet_11301139675464_init_data={code:"function anonymous(isFinished) {\n  const {\n    onFinish\n  } = this._closure;\n  return onFinish(isFinished);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"onFinish\",\"_closure\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAyMM,SAAAA,UAAAC,UAAU;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAID,QAAQ,CAACD,UAAqB;AAAA\"}"};var _worklet_5253258937186_init_data={code:"function anonymous() {\n  const {\n    touching,\n    translation,\n    scrollEndTranslation,\n    activeDecay,\n    infinite,\n    withSpring,\n    maxPage,\n    size\n  } = this._closure;\n  if (touching.value) return;\n  if (translation.value > 0) {\n    if (scrollEndTranslation.value < 0) {\n      activeDecay();\n      return;\n    }\n    if (!infinite) {\n      translation.value = withSpring(0);\n      return;\n    }\n  }\n  if (translation.value < -((maxPage - 1) * size)) {\n    if (scrollEndTranslation.value > 0) {\n      activeDecay();\n      return;\n    }\n    if (!infinite) translation.value = withSpring(-((maxPage - 1) * size));\n  }\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"touching\",\"translation\",\"scrollEndTranslation\",\"activeDecay\",\"infinite\",\"withSpring\",\"maxPage\",\"size\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA6M0C,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC,oBAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC,UAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EAE5C,IAAIR,QAAQ,CAACS,KAAK,EAChB;EAEF,IAAIR,WAAW,CAACQ,KAAK,GAAG,CAAC,EAAE;IACzB,IAAIP,oBAAoB,CAACO,KAAK,GAAG,CAAC,EAAE;MAClCN,WAAW,CAAC,CAAC;MACb;IACF;IACA,IAAI,CAACC,QAAQ,EAAE;MACbH,WAAW,CAACQ,KAAK,GAAGJ,UAAU,CAAC,CAAC,CAAC;MACjC;IACF;EACF;EAEA,IAAIJ,WAAW,CAACQ,KAAK,GAAG,EAAE,CAACH,OAAO,GAAG,CAAC,IAAIC,IAAI,CAAC,EAAE;IAC/C,IAAIL,oBAAoB,CAACO,KAAK,GAAG,CAAC,EAAE;MAClCN,WAAW,CAAC,CAAC;MACb;IACF;IACA,IAAI,CAACC,QAAQ,EACXH,WAAW,CAACQ,KAAK,GAAGJ,UAAU,CAAC,EAAE,CAACC,OAAO,GAAG,CAAC,IAAIC,IAAI,CAAC,CAAC;EAC3D;AACF\"}"};var _worklet_15931544841004_init_data={code:"function anonymous() {\n  const {\n    translation\n  } = this._closure;\n  return translation.value;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"translation\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAiPI,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,WAAY,CAAAE,KAAA;AAAA\"}"};var _worklet_12444593625099_init_data={code:"function anonymous() {\n  const {\n    pagingEnabled,\n    resetBoundary\n  } = this._closure;\n  if (!pagingEnabled) resetBoundary();\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"pagingEnabled\",\"resetBoundary\",\"_closure\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAkPI,SAAAA,SAAMA,CAAA;EAAA;IAAAC,aAAA;IAAAC;EAAA,SAAAC,QAAA;EACJ,IAAI,CAACF,aAAa,EAChBC,aAAa,CAAC,CAAC;AACnB\"}"};var _worklet_11427369935693_init_data={code:"function withProcessTranslation(translation) {\n  const {\n    infinite,\n    overscrollEnabled,\n    getLimit\n  } = this._closure;\n  if (!infinite && !overscrollEnabled) {\n    const limit = getLimit();\n    const sign = Math.sign(translation);\n    return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n  }\n  return translation;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"withProcessTranslation\",\"translation\",\"infinite\",\"overscrollEnabled\",\"getLimit\",\"_closure\",\"limit\",\"sign\",\"Math\",\"max\",\"min\",\"abs\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAyPE,SAAAA,sBAASA,CAAuBC,WAAA,EAAmB;EAAA;IAAAC,QAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAGjD,IAAI,CAACH,QAAQ,IAAI,CAACC,iBAAiB,EAAE;IACnC,MAAMG,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,IAAI,GAAGC,IAAI,CAACD,IAAI,CAACN,WAAW,CAAC;IACnC,OAAOM,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAACJ,KAAK,EAAEE,IAAI,CAACG,GAAG,CAACV,WAAW,CAAC,CAAC,CAAC;EACnE;EAEA,OAAOA,WAAW;AACpB\"}"};var _worklet_6283859030724_init_data={code:"function anonymous(_, ctx) {\n  const {\n    touching,\n    onScrollBegin,\n    runOnJS,\n    maxPage,\n    size,\n    infinite,\n    overscrollEnabled,\n    getLimit,\n    translation\n  } = this._closure;\n  touching.value = true;\n  ctx.validStart = true;\n  onScrollBegin && runOnJS(onScrollBegin)();\n  ctx.max = (maxPage - 1) * size;\n  if (!infinite && !overscrollEnabled) ctx.max = getLimit();\n  ctx.panOffset = translation.value;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_\",\"ctx\",\"touching\",\"onScrollBegin\",\"runOnJS\",\"maxPage\",\"size\",\"infinite\",\"overscrollEnabled\",\"getLimit\",\"translation\",\"_closure\",\"value\",\"validStart\",\"max\",\"panOffset\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA0Qe,SAACA,SAAMA,CAAKC,CAAA,EAAAC,GAAA;EAAA;IAAAC,QAAA;IAAAC,aAAA;IAAAC,OAAA;IAAAC,OAAA;IAAAC,IAAA;IAAAC,QAAA;IAAAC,iBAAA;IAAAC,QAAA;IAAAC;EAAA,SAAAC,QAAA;EACnBT,QAAQ,CAACU,KAAK,GAAG,IAAI;EACrBX,GAAG,CAACY,UAAU,GAAG,IAAI;EACrBV,aAAa,IAAIC,OAAO,CAACD,aAAa,CAAC,CAAC,CAAC;EAEzCF,GAAG,CAACa,GAAG,GAAG,CAACT,OAAO,GAAG,CAAC,IAAIC,IAAI;EAC9B,IAAI,CAACC,QAAQ,IAAI,CAACC,iBAAiB,EACjCP,GAAG,CAACa,GAAG,GAAGL,QAAQ,CAAC,CAAC;EAEtBR,GAAG,CAACc,SAAS,GAAGL,WAAW,CAACE,KAAK;AACnC\"}"};var _worklet_14494691336804_init_data={code:"function anonymous(e, ctx) {\n  const {\n    cancelAnimation,\n    translation,\n    touching,\n    isHorizontal,\n    maxScrollDistancePerSwipe,\n    infinite\n  } = this._closure;\n  if (ctx.validStart) {\n    ctx.validStart = false;\n    cancelAnimation(translation);\n  }\n  touching.value = true;\n  let {\n    translationX: translationX,\n    translationY: translationY\n  } = e;\n  const totalTranslation = isHorizontal.value ? translationX : translationY;\n  if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {\n    const overSwipe = Math.abs(totalTranslation) - maxScrollDistancePerSwipe;\n    const dampedTranslation = maxScrollDistancePerSwipe + overSwipe * 0.5;\n    translationX = isHorizontal.value ? dampedTranslation * Math.sign(translationX) : translationX;\n    translationY = !isHorizontal.value ? dampedTranslation * Math.sign(translationY) : translationY;\n  }\n  const panTranslation = isHorizontal.value ? translationX : translationY;\n  if (!infinite) {\n    if (translation.value > 0 || translation.value < -ctx.max) {\n      const boundary = translation.value > 0 ? 0 : -ctx.max;\n      const fixed = boundary - ctx.panOffset;\n      const dynamic = panTranslation - fixed;\n      translation.value = boundary + dynamic * 0.5;\n      return;\n    }\n  }\n  const translationValue = ctx.panOffset + panTranslation;\n  translation.value = translationValue;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"e\",\"ctx\",\"cancelAnimation\",\"translation\",\"touching\",\"isHorizontal\",\"maxScrollDistancePerSwipe\",\"infinite\",\"_closure\",\"validStart\",\"value\",\"translationX\",\"translationY\",\"totalTranslation\",\"Math\",\"abs\",\"overSwipe\",\"dampedTranslation\",\"sign\",\"panTranslation\",\"max\",\"boundary\",\"fixed\",\"panOffset\",\"dynamic\",\"translationValue\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAqRgB,SAACA,SAAMA,CAAKC,CAAA,EAAAC,GAAA;EAAA;IAAAC,eAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC,YAAA;IAAAC,yBAAA;IAAAC;EAAA,SAAAC,QAAA;EACpB,IAAIP,GAAG,CAACQ,UAAU,EAAE;IAClBR,GAAG,CAACQ,UAAU,GAAG,KAAK;IACtBP,eAAe,CAACC,WAAW,CAAC;EAC9B;EACAC,QAAQ,CAACM,KAAK,GAAG,IAAI;EACrB,IAAI;IAAEC,YAAY,EAAZA,YAAY;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGZ,CAAC;EAEtC,MAAMa,gBAAgB,GAAGR,YAAY,CAACK,KAAK,GAAGC,YAAY,GAAGC,YAAY;EAEzE,IAAI,OAAON,yBAAyB,KAAK,QAAQ,IAAIQ,IAAI,CAACC,GAAG,CAACF,gBAAgB,CAAC,GAAGP,yBAAyB,EAAE;IAC3G,MAAMU,SAAS,GAAGF,IAAI,CAACC,GAAG,CAACF,gBAAgB,CAAC,GAAGP,yBAAyB;IACxE,MAAMW,iBAAiB,GAAGX,yBAAyB,GAAGU,SAAS,GAAG,GAAG;IAErEL,YAAY,GAAGN,YAAY,CAACK,KAAK,GAAGO,iBAAiB,GAAGH,IAAI,CAACI,IAAI,CAACP,YAAY,CAAC,GAAGA,YAAY;IAC9FC,YAAY,GAAG,CAACP,YAAY,CAACK,KAAK,GAAGO,iBAAiB,GAAGH,IAAI,CAACI,IAAI,CAACN,YAAY,CAAC,GAAGA,YAAY;EACjG;EAEA,MAAMO,cAAc,GAAGd,YAAY,CAACK,KAAK,GAAGC,YAAY,GAAGC,YAAY;EACvE,IAAI,CAACL,QAAQ,EAAE;IACb,IAAKJ,WAAW,CAACO,KAAK,GAAG,CAAC,IAAIP,WAAW,CAACO,KAAK,GAAG,CAACT,GAAG,CAACmB,GAAG,EAAG;MAC3D,MAAMC,QAAQ,GAAGlB,WAAW,CAACO,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAACT,GAAG,CAACmB,GAAG;MACrD,MAAME,KAAK,GAAGD,QAAQ,GAAGpB,GAAG,CAACsB,SAAS;MACtC,MAAMC,OAAO,GAAGL,cAAc,GAAGG,KAAK;MACtCnB,WAAW,CAACO,KAAK,GAAGW,QAAQ,GAAGG,OAAO,GAAG,GAAG;MAC5C;IACF;EACF;EAEA,MAAMC,gBAAgB,GAAGxB,GAAG,CAACsB,SAAS,GAAGJ,cAAc;EAEvDhB,WAAW,CAACO,KAAK,GAAGe,gBAAgB;AACtC\"}"};var _worklet_15532837681820_init_data={code:"function anonymous(e, ctx) {\n  const {\n    scrollEndVelocity,\n    isHorizontal,\n    scrollEndTranslation,\n    maxScrollDistancePerSwipe,\n    size,\n    translation,\n    withSpring,\n    withProcessTranslation,\n    onScrollEnd,\n    endWithSpring,\n    infinite,\n    touching\n  } = this._closure;\n  const {\n    velocityX: velocityX,\n    velocityY: velocityY,\n    translationX: translationX,\n    translationY: translationY\n  } = e;\n  scrollEndVelocity.value = isHorizontal.value ? velocityX : velocityY;\n  scrollEndTranslation.value = isHorizontal.value ? translationX : translationY;\n  const totalTranslation = isHorizontal.value ? translationX : translationY;\n  if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {\n    const nextPage = Math.round((ctx.panOffset + maxScrollDistancePerSwipe * Math.sign(totalTranslation)) / size) * size;\n    translation.value = withSpring(withProcessTranslation(nextPage), onScrollEnd);\n  } else {\n    endWithSpring(onScrollEnd);\n  }\n  if (!infinite) touching.value = false;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"e\",\"ctx\",\"scrollEndVelocity\",\"isHorizontal\",\"scrollEndTranslation\",\"maxScrollDistancePerSwipe\",\"size\",\"translation\",\"withSpring\",\"withProcessTranslation\",\"onScrollEnd\",\"endWithSpring\",\"infinite\",\"touching\",\"_closure\",\"velocityX\",\"velocityY\",\"translationX\",\"translationY\",\"value\",\"totalTranslation\",\"Math\",\"abs\",\"nextPage\",\"round\",\"panOffset\",\"sign\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAsTa,SAACA,SAAMA,CAAKC,CAAA,EAAAC,GAAA;EAAA;IAAAC,iBAAA;IAAAC,YAAA;IAAAC,oBAAA;IAAAC,yBAAA;IAAAC,IAAA;IAAAC,WAAA;IAAAC,UAAA;IAAAC,sBAAA;IAAAC,WAAA;IAAAC,aAAA;IAAAC,QAAA;IAAAC;EAAA,SAAAC,QAAA;EACjB,MAAM;IAAEC,SAAS,EAATA,SAAS;IAAEC,SAAS,EAATA,SAAS;IAAEC,YAAY,EAAZA,YAAY;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGlB,CAAC;EAC9DE,iBAAiB,CAACiB,KAAK,GAAGhB,YAAY,CAACgB,KAAK,GACxCJ,SAAS,GACTC,SAAS;EACbZ,oBAAoB,CAACe,KAAK,GAAGhB,YAAY,CAACgB,KAAK,GAC3CF,YAAY,GACZC,YAAY;EAEhB,MAAME,gBAAgB,GAAGjB,YAAY,CAACgB,KAAK,GAAGF,YAAY,GAAGC,YAAY;EAEzE,IAAI,OAAOb,yBAAyB,KAAK,QAAQ,IAAIgB,IAAI,CAACC,GAAG,CAACF,gBAAgB,CAAC,GAAGf,yBAAyB,EAAE;IAC3G,MAAMkB,QAAQ,GAAGF,IAAI,CAACG,KAAK,CAAC,CAACvB,GAAG,CAACwB,SAAS,GAAGpB,yBAAyB,GAAGgB,IAAI,CAACK,IAAI,CAACN,gBAAgB,CAAC,IAAId,IAAI,CAAC,GAAGA,IAAI;IACpHC,WAAW,CAACY,KAAK,GAAGX,UAAU,CAACC,sBAAsB,CAACc,QAAQ,CAAC,EAAEb,WAAW,CAAC;EAC/E,CAAC,MACI;IACHC,aAAa,CAACD,WAAW,CAAC;EAC5B;EAEA,IAAI,CAACE,QAAQ,EACXC,QAAQ,CAACM,KAAK,GAAG,KAAK;AAC1B\"}"};var IScrollViewGesture=function IScrollViewGesture(props){var _React$useContext=_react.default.useContext(_store.CTX),_React$useContext$pro=_React$useContext.props,vertical=_React$useContext$pro.vertical,pagingEnabled=_React$useContext$pro.pagingEnabled,snapEnabled=_React$useContext$pro.snapEnabled,panGestureHandlerProps=_React$useContext$pro.panGestureHandlerProps,infinite=_React$useContext$pro.loop,scrollAnimationDuration=_React$useContext$pro.scrollAnimationDuration,withAnimation=_React$useContext$pro.withAnimation,enabled=_React$useContext$pro.enabled,dataLength=_React$useContext$pro.dataLength,overscrollEnabled=_React$useContext$pro.overscrollEnabled,maxScrollDistancePerSwipe=_React$useContext$pro.maxScrollDistancePerSwipe;var size=props.size,translation=props.translation,testID=props.testID,_props$style=props.style,style=_props$style===void 0?{}:_props$style,onScrollBegin=props.onScrollBegin,onScrollEnd=props.onScrollEnd,onTouchBegin=props.onTouchBegin,onTouchEnd=props.onTouchEnd;var maxPage=dataLength;var isHorizontal=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return!vertical;};_f._closure={vertical:vertical};_f.__initData=_worklet_10100718122216_init_data;_f.__workletHash=10100718122216;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[vertical]);var touching=(0,_reactNativeReanimated.useSharedValue)(false);var scrollEndTranslation=(0,_reactNativeReanimated.useSharedValue)(0);var scrollEndVelocity=(0,_reactNativeReanimated.useSharedValue)(0);var containerRef=(0,_reactNativeReanimated.useAnimatedRef)();var getLimit=_react.default.useCallback(function(){var _e=[new global.Error(),-7,-27];var _f=function _f(){if(!infinite&&!overscrollEnabled){var _measure=(0,_reactNativeReanimated.measure)(containerRef),_measure$width=_measure.width,containerWidth=_measure$width===void 0?0:_measure$width;if(dataLength*size<containerWidth)return 0;return dataLength*size-containerWidth;}return dataLength*size;};_f._closure={infinite:infinite,overscrollEnabled:overscrollEnabled,measure:_reactNativeReanimated.measure,containerRef:containerRef,dataLength:dataLength,size:size};_f.__initData=_worklet_736417391548_init_data;_f.__workletHash=736417391548;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[infinite,size,dataLength,overscrollEnabled]);var withSpring=_react.default.useCallback(function(){var _e=[new global.Error(),-6,-27];var _f=function _f(toValue,onFinished){var defaultWithAnimation={type:"timing",config:{duration:scrollAnimationDuration+100,easing:_constants.Easing.easeOutQuart}};return(0,_dealWithAnimation.dealWithAnimation)(withAnimation!=null?withAnimation:defaultWithAnimation)(toValue,function(){var _e=[new global.Error(),-3,-27];var _f=function _f(isFinished){if(isFinished)onFinished&&(0,_reactNativeReanimated.runOnJS)(onFinished)();};_f._closure={onFinished:onFinished,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_15664499378840_init_data;_f.__workletHash=15664499378840;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}());};_f._closure={scrollAnimationDuration:scrollAnimationDuration,Easing:_constants.Easing,dealWithAnimation:_dealWithAnimation.dealWithAnimation,withAnimation:withAnimation,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_38454346678_init_data;_f.__workletHash=38454346678;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[scrollAnimationDuration,withAnimation]);var endWithSpring=_react.default.useCallback(function(){var _e=[new global.Error(),-14,-27];var _f=function _f(onFinished){var origin=translation.value;var velocity=scrollEndVelocity.value;var finalTranslation=(0,_reactNativeReanimated.withDecay)({velocity:velocity,deceleration:0.999});if(typeof maxScrollDistancePerSwipe==="number"&&Math.abs(scrollEndTranslation.value)>maxScrollDistancePerSwipe){finalTranslation=origin;}else{if(pagingEnabled){var offset=-(scrollEndTranslation.value>=0?1:-1);var computed=offset<0?Math.ceil:Math.floor;var page=computed(-translation.value/size);if(infinite){var finalPage=page+offset;finalTranslation=withSpring(withProcessTranslation(-finalPage*size),onFinished);}else{var _finalPage=Math.min(maxPage-1,Math.max(0,page+offset));finalTranslation=withSpring(withProcessTranslation(-_finalPage*size),onFinished);}}if(!pagingEnabled&&snapEnabled){var nextPage=Math.round((origin+velocity*0.4)/size)*size;finalTranslation=withSpring(withProcessTranslation(nextPage),onFinished);}}translation.value=finalTranslation;function withProcessTranslation(translation){if(!infinite&&!overscrollEnabled){var limit=getLimit();var sign=Math.sign(translation);return sign*Math.max(0,Math.min(limit,Math.abs(translation)));}return translation;}};_f._closure={translation:translation,scrollEndVelocity:scrollEndVelocity,withDecay:_reactNativeReanimated.withDecay,maxScrollDistancePerSwipe:maxScrollDistancePerSwipe,scrollEndTranslation:scrollEndTranslation,pagingEnabled:pagingEnabled,size:size,infinite:infinite,withSpring:withSpring,maxPage:maxPage,snapEnabled:snapEnabled,overscrollEnabled:overscrollEnabled,getLimit:getLimit};_f.__initData=_worklet_15595988837712_init_data;_f.__workletHash=15595988837712;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[withSpring,size,maxPage,infinite,snapEnabled,translation,pagingEnabled,scrollEndVelocity.value,maxScrollDistancePerSwipe,scrollEndTranslation.value]);var onFinish=_react.default.useCallback(function(){var _e=[new global.Error(),-4,-27];var _f=function _f(isFinished){if(isFinished){touching.value=false;onScrollEnd&&(0,_reactNativeReanimated.runOnJS)(onScrollEnd)();}};_f._closure={touching:touching,onScrollEnd:onScrollEnd,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_14734469187996_init_data;_f.__workletHash=14734469187996;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[onScrollEnd,touching]);var activeDecay=_react.default.useCallback(function(){var _e=[new global.Error(),-6,-27];var _f=function _f(){touching.value=true;translation.value=(0,_reactNativeReanimated.withDecay)({velocity:scrollEndVelocity.value},function(){var _e=[new global.Error(),-2,-27];var _f=function _f(isFinished){return onFinish(isFinished);};_f._closure={onFinish:onFinish};_f.__initData=_worklet_11301139675464_init_data;_f.__workletHash=11301139675464;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}());};_f._closure={touching:touching,translation:translation,withDecay:_reactNativeReanimated.withDecay,scrollEndVelocity:scrollEndVelocity,onFinish:onFinish};_f.__initData=_worklet_14660770182194_init_data;_f.__workletHash=14660770182194;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[onFinish,scrollEndVelocity.value,touching,translation]);var resetBoundary=_react.default.useCallback(function(){var _e=[new global.Error(),-9,-27];var _f=function _f(){if(touching.value)return;if(translation.value>0){if(scrollEndTranslation.value<0){activeDecay();return;}if(!infinite){translation.value=withSpring(0);return;}}if(translation.value<-((maxPage-1)*size)){if(scrollEndTranslation.value>0){activeDecay();return;}if(!infinite)translation.value=withSpring(-((maxPage-1)*size));}};_f._closure={touching:touching,translation:translation,scrollEndTranslation:scrollEndTranslation,activeDecay:activeDecay,infinite:infinite,withSpring:withSpring,maxPage:maxPage,size:size};_f.__initData=_worklet_5253258937186_init_data;_f.__workletHash=5253258937186;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[touching.value,translation,maxPage,size,scrollEndTranslation.value,infinite,activeDecay,withSpring]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return translation.value;};_f._closure={translation:translation};_f.__initData=_worklet_15931544841004_init_data;_f.__workletHash=15931544841004;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-3,-27];var _f=function _f(){if(!pagingEnabled)resetBoundary();};_f._closure={pagingEnabled:pagingEnabled,resetBoundary:resetBoundary};_f.__initData=_worklet_12444593625099_init_data;_f.__workletHash=12444593625099;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[pagingEnabled,resetBoundary]);var withProcessTranslation=function(){var _e=[new global.Error(),-4,-27];var _f=function _f(translation){if(!infinite&&!overscrollEnabled){var limit=getLimit();var sign=Math.sign(translation);return sign*Math.max(0,Math.min(limit,Math.abs(translation)));}return translation;};_f._closure={infinite:infinite,overscrollEnabled:overscrollEnabled,getLimit:getLimit};_f.__initData=_worklet_11427369935693_init_data;_f.__workletHash=11427369935693;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();var panGestureEventHandler=(0,_reactNativeReanimated.useAnimatedGestureHandler)({onStart:function(){var _e=[new global.Error(),-10,-27];var _f=function _f(_,ctx){touching.value=true;ctx.validStart=true;onScrollBegin&&(0,_reactNativeReanimated.runOnJS)(onScrollBegin)();ctx.max=(maxPage-1)*size;if(!infinite&&!overscrollEnabled)ctx.max=getLimit();ctx.panOffset=translation.value;};_f._closure={touching:touching,onScrollBegin:onScrollBegin,runOnJS:_reactNativeReanimated.runOnJS,maxPage:maxPage,size:size,infinite:infinite,overscrollEnabled:overscrollEnabled,getLimit:getLimit,translation:translation};_f.__initData=_worklet_6283859030724_init_data;_f.__workletHash=6283859030724;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),onActive:function(){var _e=[new global.Error(),-7,-27];var _f=function _f(e,ctx){if(ctx.validStart){ctx.validStart=false;(0,_reactNativeReanimated.cancelAnimation)(translation);}touching.value=true;var translationX=e.translationX,translationY=e.translationY;var totalTranslation=isHorizontal.value?translationX:translationY;if(typeof maxScrollDistancePerSwipe==="number"&&Math.abs(totalTranslation)>maxScrollDistancePerSwipe){var overSwipe=Math.abs(totalTranslation)-maxScrollDistancePerSwipe;var dampedTranslation=maxScrollDistancePerSwipe+overSwipe*0.5;translationX=isHorizontal.value?dampedTranslation*Math.sign(translationX):translationX;translationY=!isHorizontal.value?dampedTranslation*Math.sign(translationY):translationY;}var panTranslation=isHorizontal.value?translationX:translationY;if(!infinite){if(translation.value>0||translation.value<-ctx.max){var boundary=translation.value>0?0:-ctx.max;var fixed=boundary-ctx.panOffset;var dynamic=panTranslation-fixed;translation.value=boundary+dynamic*0.5;return;}}var translationValue=ctx.panOffset+panTranslation;translation.value=translationValue;};_f._closure={cancelAnimation:_reactNativeReanimated.cancelAnimation,translation:translation,touching:touching,isHorizontal:isHorizontal,maxScrollDistancePerSwipe:maxScrollDistancePerSwipe,infinite:infinite};_f.__initData=_worklet_14494691336804_init_data;_f.__workletHash=14494691336804;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),onEnd:function(){var _e=[new global.Error(),-13,-27];var _f=function _f(e,ctx){var velocityX=e.velocityX,velocityY=e.velocityY,translationX=e.translationX,translationY=e.translationY;scrollEndVelocity.value=isHorizontal.value?velocityX:velocityY;scrollEndTranslation.value=isHorizontal.value?translationX:translationY;var totalTranslation=isHorizontal.value?translationX:translationY;if(typeof maxScrollDistancePerSwipe==="number"&&Math.abs(totalTranslation)>maxScrollDistancePerSwipe){var nextPage=Math.round((ctx.panOffset+maxScrollDistancePerSwipe*Math.sign(totalTranslation))/size)*size;translation.value=withSpring(withProcessTranslation(nextPage),onScrollEnd);}else{endWithSpring(onScrollEnd);}if(!infinite)touching.value=false;};_f._closure={scrollEndVelocity:scrollEndVelocity,isHorizontal:isHorizontal,scrollEndTranslation:scrollEndTranslation,maxScrollDistancePerSwipe:maxScrollDistancePerSwipe,size:size,translation:translation,withSpring:withSpring,withProcessTranslation:withProcessTranslation,onScrollEnd:onScrollEnd,endWithSpring:endWithSpring,infinite:infinite,touching:touching};_f.__initData=_worklet_15532837681820_init_data;_f.__workletHash=15532837681820;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}()},[pagingEnabled,isHorizontal.value,infinite,maxPage,size,snapEnabled,onScrollBegin,onScrollEnd]);return(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.PanGestureHandler,Object.assign({},panGestureHandlerProps,{enabled:enabled,onGestureEvent:panGestureEventHandler,children:(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{ref:containerRef,testID:testID,style:style,onTouchStart:onTouchBegin,onTouchEnd:onTouchEnd,children:props.children})}));};var ScrollViewGesture=IScrollViewGesture;exports.ScrollViewGesture=ScrollViewGesture;
+var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ScrollViewGesture=void 0;var _react=_interopRequireDefault(require("react"));var _reactNativeGestureHandler=require("react-native-gesture-handler");var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _constants=require("./constants");var _store=require("./store");var _dealWithAnimation=require("./utils/dealWithAnimation");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_10100718122216_init_data={code:"function anonymous() {\n  const {\n    vertical\n  } = this._closure;\n  return !vertical;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"vertical\",\"_closure\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAqEyC,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAO,CAAAD,QAAA;AAAA\"}"};var _worklet_736417391548_init_data={code:"function anonymous() {\n  const {\n    infinite,\n    overscrollEnabled,\n    measure,\n    containerRef,\n    dataLength,\n    size\n  } = this._closure;\n  if (!infinite && !overscrollEnabled) {\n    const {\n      width: containerWidth = 0\n    } = measure(containerRef);\n    if (dataLength * size < containerWidth) return 0;\n    return dataLength * size - containerWidth;\n  }\n  return dataLength * size;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"infinite\",\"overscrollEnabled\",\"measure\",\"containerRef\",\"dataLength\",\"size\",\"_closure\",\"width\",\"containerWidth\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA4EuC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,iBAAA;IAAAC,OAAA;IAAAC,YAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EAGrC,IAAI,CAACN,QAAQ,IAAI,CAACC,iBAAiB,EAAE;IACjC,MAAM;MAAEM,KAAK,EAAEC,cAAc,GAAG;IAAE,CAAC,GAAGN,OAAO,CAACC,YAAY,CAAC;IAG3D,IAAIC,UAAU,GAAGC,IAAI,GAAGG,cAAc,EAAE,OAAO,CAAC;IAGhD,OAAOJ,UAAU,GAAGC,IAAI,GAAGG,cAAc;EAC7C;EAEA,OAAOJ,UAAU,GAAGC,IAAI;AAC5B\"}"};var _worklet_11185458721430_init_data={code:"function anonymous(toValue, onFinished) {\n  const {\n    scrollAnimationDuration,\n    Easing,\n    dealWithAnimation,\n    withAnimation,\n    runOnJS\n  } = this._closure;\n  var _withAnimation;\n  const defaultWithAnimation = {\n    type: 'timing',\n    config: {\n      duration: scrollAnimationDuration + 100,\n      easing: Easing.easeOutQuart\n    }\n  };\n  return dealWithAnimation((_withAnimation = withAnimation) !== null && _withAnimation !== void 0 ? _withAnimation : defaultWithAnimation)(toValue, function (isFinished) {\n    'worklet';\n\n    if (isFinished) onFinished && runOnJS(onFinished)();\n  });\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"toValue\",\"onFinished\",\"scrollAnimationDuration\",\"Easing\",\"dealWithAnimation\",\"withAnimation\",\"runOnJS\",\"_closure\",\"_withAnimation\",\"defaultWithAnimation\",\"type\",\"config\",\"duration\",\"easing\",\"easeOutQuart\",\"isFinished\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA6FQ,SAACA,SAAeA,CAAAC,OAAE,EAAAC,UAA4B;EAAA;IAAAC,uBAAA;IAAAC,MAAA;IAAAC,iBAAA;IAAAC,aAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,cAAA;EAE1C,MAAMC,oBAAyC,GAAG;IAC9CC,IAAI,EAAE,QAAQ;IACdC,MAAM,EAAE;MACJC,QAAQ,EAAEV,uBAAuB,GAAG,GAAG;MACvCW,MAAM,EAAEV,MAAM,CAACW;IACnB;EACJ,CAAC;EAED,OAAOV,iBAAiB,EAAAI,cAAA,GAACH,aAAa,cAAAG,cAAA,cAAAA,cAAA,GAAIC,oBAAoB,CAAC,CAC3DT,OAAO,EACP,UAACe,UAAmB,EAAK;IACrB,SAAS;;IACT,IAAIA,UAAU,EAAEd,UAAU,IAAIK,OAAO,CAACL,UAAU,CAAC,CAAC,CAAC;EACvD,CACJ,CAAC;AACL\"}"};var _worklet_15664499378840_init_data={code:"function anonymous(isFinished) {\n  const {\n    onFinished,\n    runOnJS\n  } = this._closure;\n  if (isFinished) onFinished && runOnJS(onFinished)();\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"onFinished\",\"runOnJS\",\"_closure\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAyGgB,SAACA,UAAAC,UAAwB;EAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EAErB,IAAIH,UAAU,EAAEC,UAAU,IAAIC,OAAO,CAACD,UAAU,CAAC,CAAC,CAAC;AACvD\"}"};var _worklet_17014417787428_init_data={code:"function anonymous(onFinished) {\n  const {\n    translation,\n    scrollEndVelocity,\n    withDecay,\n    maxScrollDistancePerSwipe,\n    scrollEndTranslation,\n    pagingEnabled,\n    size,\n    infinite,\n    withSpring,\n    maxPage,\n    snapEnabled,\n    overscrollEnabled,\n    getLimit\n  } = this._closure;\n  const origin = translation.value;\n  const velocity = scrollEndVelocity.value;\n  let finalTranslation = withDecay({\n    velocity: velocity,\n    deceleration: 0.999\n  });\n  if (typeof maxScrollDistancePerSwipe === 'number' && Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe) {\n    finalTranslation = origin;\n  } else {\n    if (pagingEnabled) {\n      const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1);\n      let page;\n      if (Math.abs(scrollEndVelocity.value) >= size * 0.3) {\n        const computed = offset < 0 ? Math.ceil : Math.floor;\n        page = computed(-translation.value / size);\n      } else {\n        page = Math.round(-translation.value / size) - offset;\n      }\n      if (infinite) {\n        const finalPage = page + offset;\n        finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n      } else {\n        const finalPage = Math.min(maxPage - 1, Math.max(0, page + offset));\n        finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n      }\n    }\n    if (!pagingEnabled && snapEnabled) {\n      const nextPage = Math.round((origin + velocity * 0.4) / size) * size;\n      finalTranslation = withSpring(withProcessTranslation(nextPage), onFinished);\n    }\n  }\n  translation.value = finalTranslation;\n  function withProcessTranslation(translation) {\n    if (!infinite && !overscrollEnabled) {\n      const limit = getLimit();\n      const sign = Math.sign(translation);\n      return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n    }\n    return translation;\n  }\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"onFinished\",\"translation\",\"scrollEndVelocity\",\"withDecay\",\"maxScrollDistancePerSwipe\",\"scrollEndTranslation\",\"pagingEnabled\",\"size\",\"infinite\",\"withSpring\",\"maxPage\",\"snapEnabled\",\"overscrollEnabled\",\"getLimit\",\"_closure\",\"origin\",\"value\",\"velocity\",\"finalTranslation\",\"deceleration\",\"Math\",\"abs\",\"offset\",\"page\",\"computed\",\"ceil\",\"floor\",\"round\",\"finalPage\",\"withProcessTranslation\",\"min\",\"max\",\"nextPage\",\"limit\",\"sign\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAmHQ,SAACA,UAAAC,UAA4B;EAAA;IAAAC,WAAA;IAAAC,iBAAA;IAAAC,SAAA;IAAAC,yBAAA;IAAAC,oBAAA;IAAAC,aAAA;IAAAC,IAAA;IAAAC,QAAA;IAAAC,UAAA;IAAAC,OAAA;IAAAC,WAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAEzB,MAAMC,MAAM,GAAGd,WAAW,CAACe,KAAK;EAChC,MAAMC,QAAQ,GAAGf,iBAAiB,CAACc,KAAK;EAExC,IAAIE,gBAAwB,GAAGf,SAAS,CAAC;IACrCc,QAAQ,EAARA,QAAQ;IACRE,YAAY,EAAE;EAClB,CAAC,CAAC;EAGF,IACI,OAAOf,yBAAyB,KAAK,QAAQ,IAC7CgB,IAAI,CAACC,GAAG,CAAChB,oBAAoB,CAACW,KAAK,CAAC,GAAGZ,yBAAyB,EAClE;IACEc,gBAAgB,GAAGH,MAAM;EAC7B,CAAC,MAAM;IAQH,IAAIT,aAAa,EAAE;MAEf,MAAMgB,MAAM,GAAG,EAAEjB,oBAAoB,CAACW,KAAK,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;MAC1D,IAAIO,IAAY;MAEhB,IAAIH,IAAI,CAACC,GAAG,CAACnB,iBAAiB,CAACc,KAAK,CAAC,IAAIT,IAAI,GAAG,GAAG,EAAE;QACjD,MAAMiB,QAAQ,GAAGF,MAAM,GAAG,CAAC,GAAGF,IAAI,CAACK,IAAI,GAAGL,IAAI,CAACM,KAAK;QACpDH,IAAI,GAAGC,QAAQ,CAAC,CAACvB,WAAW,CAACe,KAAK,GAAGT,IAAI,CAAC;MAC9C,CAAC,MAAM;QACHgB,IAAI,GAAGH,IAAI,CAACO,KAAK,CAAC,CAAC1B,WAAW,CAACe,KAAK,GAAGT,IAAI,CAAC,GAAGe,MAAM;MACzD;MAEA,IAAId,QAAQ,EAAE;QACV,MAAMoB,SAAS,GAAGL,IAAI,GAAGD,MAAM;QAC/BJ,gBAAgB,GAAGT,UAAU,CACzBoB,sBAAsB,CAAC,CAACD,SAAS,GAAGrB,IAAI,CAAC,EACzCP,UACJ,CAAC;MACL,CAAC,MAAM;QACH,MAAM4B,SAAS,GAAGR,IAAI,CAACU,GAAG,CACtBpB,OAAO,GAAG,CAAC,EACXU,IAAI,CAACW,GAAG,CAAC,CAAC,EAAER,IAAI,GAAGD,MAAM,CAC7B,CAAC;QACDJ,gBAAgB,GAAGT,UAAU,CACzBoB,sBAAsB,CAAC,CAACD,SAAS,GAAGrB,IAAI,CAAC,EACzCP,UACJ,CAAC;MACL;IACJ;IAEA,IAAI,CAACM,aAAa,IAAIK,WAAW,EAAE;MAE/B,MAAMqB,QAAQ,GACVZ,IAAI,CAACO,KAAK,CAAC,CAACZ,MAAM,GAAGE,QAAQ,GAAG,GAAG,IAAIV,IAAI,CAAC,GAAGA,IAAI;MACvDW,gBAAgB,GAAGT,UAAU,CACzBoB,sBAAsB,CAACG,QAAQ,CAAC,EAChChC,UACJ,CAAC;IACL;EACJ;EAEAC,WAAW,CAACe,KAAK,GAAGE,gBAAgB;EAEpC,SAASW,sBAAsBA,CAAC5B,WAAmB,EAAE;IACjD,IAAI,CAACO,QAAQ,IAAI,CAACI,iBAAiB,EAAE;MACjC,MAAMqB,KAAK,GAAGpB,QAAQ,CAAC,CAAC;MACxB,MAAMqB,IAAI,GAAGd,IAAI,CAACc,IAAI,CAACjC,WAAW,CAAC;MACnC,OACIiC,IAAI,GACJd,IAAI,CAACW,GAAG,CAAC,CAAC,EAAEX,IAAI,CAACU,GAAG,CAACG,KAAK,EAAEb,IAAI,CAACC,GAAG,CAACpB,WAAW,CAAC,CAAC,CAAC;IAE3D;IAEA,OAAOA,WAAW;EACtB;AACJ\"}"};var _worklet_14734469187996_init_data={code:"function anonymous(isFinished) {\n  const {\n    touching,\n    onScrollEnd,\n    runOnJS\n  } = this._closure;\n  if (isFinished) {\n    touching.value = false;\n    onScrollEnd && runOnJS(onScrollEnd)();\n  }\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"touching\",\"onScrollEnd\",\"runOnJS\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAkNQ,SAACA,UAAAC,UAAwB;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAErB,IAAIJ,UAAU,EAAE;IACZC,QAAQ,CAACI,KAAK,GAAG,KAAK;IACtBH,WAAW,IAAIC,OAAO,CAACD,WAAW,CAAC,CAAC,CAAC;EACzC;AACJ\"}"};var _worklet_14660770182194_init_data={code:"function anonymous() {\n  const {\n    touching,\n    translation,\n    withDecay,\n    scrollEndVelocity,\n    onFinish\n  } = this._closure;\n  touching.value = true;\n  translation.value = withDecay({\n    velocity: scrollEndVelocity.value\n  }, function (isFinished) {\n    return onFinish(isFinished);\n  });\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"touching\",\"translation\",\"withDecay\",\"scrollEndVelocity\",\"onFinish\",\"_closure\",\"value\",\"velocity\",\"isFinished\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA4N0C,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC,SAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAExCL,QAAQ,CAACM,KAAK,GAAG,IAAI;EACrBL,WAAW,CAACK,KAAK,GAAGJ,SAAS,CACzB;IAAEK,QAAQ,EAAEJ,iBAAiB,CAACG;EAAM,CAAC,EACpC,UAAAE,UAAU;IAAA,OAAKJ,QAAQ,CAACI,UAAqB,CAClD;EAAA,EAAC;AACL\"}"};var _worklet_11301139675464_init_data={code:"function anonymous(isFinished) {\n  const {\n    onFinish\n  } = this._closure;\n  return onFinish(isFinished);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"onFinish\",\"_closure\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAiOa,SAAAA,UAAAC,UAAU;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAKD,QAAQ,CAACD,UAAqB;AAAA\"}"};var _worklet_5253258937186_init_data={code:"function anonymous() {\n  const {\n    touching,\n    translation,\n    scrollEndTranslation,\n    activeDecay,\n    infinite,\n    withSpring,\n    maxPage,\n    size\n  } = this._closure;\n  if (touching.value) return;\n  if (translation.value > 0) {\n    if (scrollEndTranslation.value < 0) {\n      activeDecay();\n      return;\n    }\n    if (!infinite) {\n      translation.value = withSpring(0);\n      return;\n    }\n  }\n  if (translation.value < -((maxPage - 1) * size)) {\n    if (scrollEndTranslation.value > 0) {\n      activeDecay();\n      return;\n    }\n    if (!infinite) translation.value = withSpring(-((maxPage - 1) * size));\n  }\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"touching\",\"translation\",\"scrollEndTranslation\",\"activeDecay\",\"infinite\",\"withSpring\",\"maxPage\",\"size\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAqO4C,SAAAA,SAAMA,CAAA;EAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC,oBAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC,UAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EAE1C,IAAIR,QAAQ,CAACS,KAAK,EAAE;EAEpB,IAAIR,WAAW,CAACQ,KAAK,GAAG,CAAC,EAAE;IACvB,IAAIP,oBAAoB,CAACO,KAAK,GAAG,CAAC,EAAE;MAChCN,WAAW,CAAC,CAAC;MACb;IACJ;IACA,IAAI,CAACC,QAAQ,EAAE;MACXH,WAAW,CAACQ,KAAK,GAAGJ,UAAU,CAAC,CAAC,CAAC;MACjC;IACJ;EACJ;EAEA,IAAIJ,WAAW,CAACQ,KAAK,GAAG,EAAE,CAACH,OAAO,GAAG,CAAC,IAAIC,IAAI,CAAC,EAAE;IAC7C,IAAIL,oBAAoB,CAACO,KAAK,GAAG,CAAC,EAAE;MAChCN,WAAW,CAAC,CAAC;MACb;IACJ;IACA,IAAI,CAACC,QAAQ,EACTH,WAAW,CAACQ,KAAK,GAAGJ,UAAU,CAAC,EAAE,CAACC,OAAO,GAAG,CAAC,IAAIC,IAAI,CAAC,CAAC;EAC/D;AACJ\"}"};var _worklet_15931544841004_init_data={code:"function anonymous() {\n  const {\n    translation\n  } = this._closure;\n  return translation.value;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"translation\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAwQQ,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,WAAY,CAAAE,KAAA;AAAA\"}"};var _worklet_12444593625099_init_data={code:"function anonymous() {\n  const {\n    pagingEnabled,\n    resetBoundary\n  } = this._closure;\n  if (!pagingEnabled) resetBoundary();\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"pagingEnabled\",\"resetBoundary\",\"_closure\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAyQQ,SAAAA,SAAMA,CAAA;EAAA;IAAAC,aAAA;IAAAC;EAAA,SAAAC,QAAA;EACF,IAAI,CAACF,aAAa,EAAEC,aAAa,CAAC,CAAC;AACvC\"}"};var _worklet_11427369935693_init_data={code:"function withProcessTranslation(translation) {\n  const {\n    infinite,\n    overscrollEnabled,\n    getLimit\n  } = this._closure;\n  if (!infinite && !overscrollEnabled) {\n    const limit = getLimit();\n    const sign = Math.sign(translation);\n    return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n  }\n  return translation;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"withProcessTranslation\",\"translation\",\"infinite\",\"overscrollEnabled\",\"getLimit\",\"_closure\",\"limit\",\"sign\",\"Math\",\"max\",\"min\",\"abs\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AA+QI,SAAAA,sBAASA,CAAuBC,WAAA,EAAmB;EAAA;IAAAC,QAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAG/C,IAAI,CAACH,QAAQ,IAAI,CAACC,iBAAiB,EAAE;IACjC,MAAMG,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,IAAI,GAAGC,IAAI,CAACD,IAAI,CAACN,WAAW,CAAC;IACnC,OAAOM,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAACJ,KAAK,EAAEE,IAAI,CAACG,GAAG,CAACV,WAAW,CAAC,CAAC,CAAC;EACrE;EAEA,OAAOA,WAAW;AACtB\"}"};var _worklet_15522222380281_init_data={code:"function anonymous(_, ctx) {\n  const {\n    touching,\n    onScrollBegin,\n    runOnJS,\n    maxPage,\n    size,\n    infinite,\n    overscrollEnabled,\n    getLimit,\n    translation,\n    cancelAnimation\n  } = this._closure;\n  touching.value = true;\n  ctx.validStart = true;\n  onScrollBegin && runOnJS(onScrollBegin)();\n  ctx.max = (maxPage - 1) * size;\n  if (!infinite && !overscrollEnabled) ctx.max = getLimit();\n  ctx.panOffset = translation.value;\n  cancelAnimation(translation);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_\",\"ctx\",\"touching\",\"onScrollBegin\",\"runOnJS\",\"maxPage\",\"size\",\"infinite\",\"overscrollEnabled\",\"getLimit\",\"translation\",\"cancelAnimation\",\"_closure\",\"value\",\"validStart\",\"max\",\"panOffset\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAsSqB,SAACA,SAAMA,CAAKC,CAAA,EAAAC,GAAA;EAAA;IAAAC,QAAA;IAAAC,aAAA;IAAAC,OAAA;IAAAC,OAAA;IAAAC,IAAA;IAAAC,QAAA;IAAAC,iBAAA;IAAAC,QAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EACjBV,QAAQ,CAACW,KAAK,GAAG,IAAI;EACrBZ,GAAG,CAACa,UAAU,GAAG,IAAI;EACrBX,aAAa,IAAIC,OAAO,CAACD,aAAa,CAAC,CAAC,CAAC;EAEzCF,GAAG,CAACc,GAAG,GAAG,CAACV,OAAO,GAAG,CAAC,IAAIC,IAAI;EAC9B,IAAI,CAACC,QAAQ,IAAI,CAACC,iBAAiB,EAAEP,GAAG,CAACc,GAAG,GAAGN,QAAQ,CAAC,CAAC;EAEzDR,GAAG,CAACe,SAAS,GAAGN,WAAW,CAACG,KAAK;EACjCF,eAAe,CAACD,WAAW,CAAC;AAChC\"}"};var _worklet_3199223540856_init_data={code:"function anonymous(e, ctx) {\n  const {\n    cancelAnimation,\n    translation,\n    isGestureFinished,\n    touching,\n    isHorizontal,\n    maxScrollDistancePerSwipe,\n    infinite\n  } = this._closure;\n  if (ctx.validStart) {\n    ctx.validStart = false;\n    cancelAnimation(translation);\n  }\n  isGestureFinished.value = false;\n  touching.value = true;\n  let {\n    translationX: translationX,\n    translationY: translationY\n  } = e;\n  const totalTranslation = isHorizontal.value ? translationX : translationY;\n  if (typeof maxScrollDistancePerSwipe === 'number' && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {\n    const overSwipe = Math.abs(totalTranslation) - maxScrollDistancePerSwipe;\n    const dampedTranslation = maxScrollDistancePerSwipe + overSwipe * 0.5;\n    translationX = isHorizontal.value ? dampedTranslation * Math.sign(translationX) : translationX;\n    translationY = !isHorizontal.value ? dampedTranslation * Math.sign(translationY) : translationY;\n  }\n  const panTranslation = isHorizontal.value ? translationX : translationY;\n  if (!infinite) {\n    if (translation.value > 0 || translation.value < -ctx.max) {\n      const boundary = translation.value > 0 ? 0 : -ctx.max;\n      const fixed = boundary - (Math.abs(ctx.panOffset - boundary) < 1 ? translation.value : ctx.panOffset);\n      const dynamic = panTranslation - fixed;\n      translation.value = boundary + dynamic * 0.5;\n      return;\n    }\n  }\n  const translationValue = ctx.panOffset + panTranslation;\n  translation.value = translationValue;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"e\",\"ctx\",\"cancelAnimation\",\"translation\",\"isGestureFinished\",\"touching\",\"isHorizontal\",\"maxScrollDistancePerSwipe\",\"infinite\",\"_closure\",\"validStart\",\"value\",\"translationX\",\"translationY\",\"totalTranslation\",\"Math\",\"abs\",\"overSwipe\",\"dampedTranslation\",\"sign\",\"panTranslation\",\"max\",\"boundary\",\"fixed\",\"panOffset\",\"dynamic\",\"translationValue\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAiTsB,SAACA,SAAMA,CAAKC,CAAA,EAAAC,GAAA;EAAA;IAAAC,eAAA;IAAAC,WAAA;IAAAC,iBAAA;IAAAC,QAAA;IAAAC,YAAA;IAAAC,yBAAA;IAAAC;EAAA,SAAAC,QAAA;EAClB,IAAIR,GAAG,CAACS,UAAU,EAAE;IAChBT,GAAG,CAACS,UAAU,GAAG,KAAK;IACtBR,eAAe,CAACC,WAAW,CAAC;EAChC;EACAC,iBAAiB,CAACO,KAAK,GAAG,KAAK;EAC/BN,QAAQ,CAACM,KAAK,GAAG,IAAI;EACrB,IAAI;IAAEC,YAAY,EAAZA,YAAY;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGb,CAAC;EAEtC,MAAMc,gBAAgB,GAAGR,YAAY,CAACK,KAAK,GACrCC,YAAY,GACZC,YAAY;EAElB,IACI,OAAON,yBAAyB,KAAK,QAAQ,IAC7CQ,IAAI,CAACC,GAAG,CAACF,gBAAgB,CAAC,GAAGP,yBAAyB,EACxD;IACE,MAAMU,SAAS,GACXF,IAAI,CAACC,GAAG,CAACF,gBAAgB,CAAC,GAAGP,yBAAyB;IAC1D,MAAMW,iBAAiB,GACnBX,yBAAyB,GAAGU,SAAS,GAAG,GAAG;IAE/CL,YAAY,GAAGN,YAAY,CAACK,KAAK,GAC3BO,iBAAiB,GAAGH,IAAI,CAACI,IAAI,CAACP,YAAY,CAAC,GAC3CA,YAAY;IAClBC,YAAY,GAAG,CAACP,YAAY,CAACK,KAAK,GAC5BO,iBAAiB,GAAGH,IAAI,CAACI,IAAI,CAACN,YAAY,CAAC,GAC3CA,YAAY;EACtB;EAEA,MAAMO,cAAc,GAAGd,YAAY,CAACK,KAAK,GACnCC,YAAY,GACZC,YAAY;EAClB,IAAI,CAACL,QAAQ,EAAE;IACX,IAAIL,WAAW,CAACQ,KAAK,GAAG,CAAC,IAAIR,WAAW,CAACQ,KAAK,GAAG,CAACV,GAAG,CAACoB,GAAG,EAAE;MACvD,MAAMC,QAAQ,GAAGnB,WAAW,CAACQ,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAACV,GAAG,CAACoB,GAAG;MACrD,MAAME,KAAK,GACPD,QAAQ,IACPP,IAAI,CAACC,GAAG,CAACf,GAAG,CAACuB,SAAS,GAAGF,QAAQ,CAAC,GAAG,CAAC,GACjCnB,WAAW,CAACQ,KAAK,GACjBV,GAAG,CAACuB,SAAS,CAAC;MACxB,MAAMC,OAAO,GAAGL,cAAc,GAAGG,KAAK;MACtCpB,WAAW,CAACQ,KAAK,GAAGW,QAAQ,GAAGG,OAAO,GAAG,GAAG;MAC5C;IACJ;EACJ;EAEA,MAAMC,gBAAgB,GAAGzB,GAAG,CAACuB,SAAS,GAAGJ,cAAc;EAEvDjB,WAAW,CAACQ,KAAK,GAAGe,gBAAgB;AACxC\"}"};var _worklet_10290739149889_init_data={code:"function anonymous(e, ctx) {\n  const {\n    isGestureFinished,\n    scrollEndVelocity,\n    isHorizontal,\n    scrollEndTranslation,\n    maxScrollDistancePerSwipe,\n    size,\n    translation,\n    withSpring,\n    withProcessTranslation,\n    handleScrollEnd,\n    endWithSpring,\n    infinite,\n    touching\n  } = this._closure;\n  if (isGestureFinished.value) return;\n  const {\n    velocityX: velocityX,\n    velocityY: velocityY,\n    translationX: translationX,\n    translationY: translationY\n  } = e;\n  scrollEndVelocity.value = isHorizontal.value ? velocityX : velocityY;\n  scrollEndTranslation.value = isHorizontal.value ? translationX : translationY;\n  const totalTranslation = isHorizontal.value ? translationX : translationY;\n  if (typeof maxScrollDistancePerSwipe === 'number' && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {\n    const nextPage = Math.round((ctx.panOffset + maxScrollDistancePerSwipe * Math.sign(totalTranslation)) / size) * size;\n    translation.value = withSpring(withProcessTranslation(nextPage), handleScrollEnd);\n  } else {\n    endWithSpring(handleScrollEnd);\n  }\n  if (!infinite) touching.value = false;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"e\",\"ctx\",\"isGestureFinished\",\"scrollEndVelocity\",\"isHorizontal\",\"scrollEndTranslation\",\"maxScrollDistancePerSwipe\",\"size\",\"translation\",\"withSpring\",\"withProcessTranslation\",\"handleScrollEnd\",\"endWithSpring\",\"infinite\",\"touching\",\"_closure\",\"value\",\"velocityX\",\"velocityY\",\"translationX\",\"translationY\",\"totalTranslation\",\"Math\",\"abs\",\"nextPage\",\"round\",\"panOffset\",\"sign\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/ScrollViewGesture.tsx\"],\"mappings\":\"AAoWsB,SAACA,SAAMA,CAAKC,CAAA,EAAAC,GAAA;EAAA;IAAAC,iBAAA;IAAAC,iBAAA;IAAAC,YAAA;IAAAC,oBAAA;IAAAC,yBAAA;IAAAC,IAAA;IAAAC,WAAA;IAAAC,UAAA;IAAAC,sBAAA;IAAAC,eAAA;IAAAC,aAAA;IAAAC,QAAA;IAAAC;EAAA,SAAAC,QAAA;EAClB,IAAIb,iBAAiB,CAACc,KAAK,EAAE;EAE7B,MAAM;IAAEC,SAAS,EAATA,SAAS;IAAEC,SAAS,EAATA,SAAS;IAAEC,YAAY,EAAZA,YAAY;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGpB,CAAC;EAC9DG,iBAAiB,CAACa,KAAK,GAAGZ,YAAY,CAACY,KAAK,GACtCC,SAAS,GACTC,SAAS;EACfb,oBAAoB,CAACW,KAAK,GAAGZ,YAAY,CAACY,KAAK,GACzCG,YAAY,GACZC,YAAY;EAElB,MAAMC,gBAAgB,GAAGjB,YAAY,CAACY,KAAK,GACrCG,YAAY,GACZC,YAAY;EAElB,IACI,OAAOd,yBAAyB,KAAK,QAAQ,IAC7CgB,IAAI,CAACC,GAAG,CAACF,gBAAgB,CAAC,GAAGf,yBAAyB,EACxD;IACE,MAAMkB,QAAQ,GACVF,IAAI,CAACG,KAAK,CACN,CAACxB,GAAG,CAACyB,SAAS,GACVpB,yBAAyB,GACrBgB,IAAI,CAACK,IAAI,CAACN,gBAAgB,CAAC,IAC/Bd,IACR,CAAC,GAAGA,IAAI;IACZC,WAAW,CAACQ,KAAK,GAAGP,UAAU,CAC1BC,sBAAsB,CAACc,QAAQ,CAAC,EAChCb,eACJ,CAAC;EACL,CAAC,MAAM;IACHC,aAAa,CAACD,eAAe,CAAC;EAClC;EAEA,IAAI,CAACE,QAAQ,EAAEC,QAAQ,CAACE,KAAK,GAAG,KAAK;AACzC\"}"};var IScrollViewGesture=function IScrollViewGesture(props){var _React$useContext=_react.default.useContext(_store.CTX),_React$useContext$pro=_React$useContext.props,vertical=_React$useContext$pro.vertical,pagingEnabled=_React$useContext$pro.pagingEnabled,snapEnabled=_React$useContext$pro.snapEnabled,panGestureHandlerProps=_React$useContext$pro.panGestureHandlerProps,infinite=_React$useContext$pro.loop,scrollAnimationDuration=_React$useContext$pro.scrollAnimationDuration,withAnimation=_React$useContext$pro.withAnimation,enabled=_React$useContext$pro.enabled,dataLength=_React$useContext$pro.dataLength,overscrollEnabled=_React$useContext$pro.overscrollEnabled,maxScrollDistancePerSwipe=_React$useContext$pro.maxScrollDistancePerSwipe;var size=props.size,translation=props.translation,testID=props.testID,_props$style=props.style,style=_props$style===void 0?{}:_props$style,onScrollBegin=props.onScrollBegin,onScrollEnd=props.onScrollEnd,onTouchBegin=props.onTouchBegin,onTouchEnd=props.onTouchEnd;var maxPage=dataLength;var isHorizontal=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return!vertical;};_f._closure={vertical:vertical};_f.__initData=_worklet_10100718122216_init_data;_f.__workletHash=10100718122216;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[vertical]);var touching=(0,_reactNativeReanimated.useSharedValue)(false);var scrollEndTranslation=(0,_reactNativeReanimated.useSharedValue)(0);var scrollEndVelocity=(0,_reactNativeReanimated.useSharedValue)(0);var containerRef=(0,_reactNativeReanimated.useAnimatedRef)();var getLimit=_react.default.useCallback(function(){var _e=[new global.Error(),-7,-27];var _f=function _f(){if(!infinite&&!overscrollEnabled){var _measure=(0,_reactNativeReanimated.measure)(containerRef),_measure$width=_measure.width,containerWidth=_measure$width===void 0?0:_measure$width;if(dataLength*size<containerWidth)return 0;return dataLength*size-containerWidth;}return dataLength*size;};_f._closure={infinite:infinite,overscrollEnabled:overscrollEnabled,measure:_reactNativeReanimated.measure,containerRef:containerRef,dataLength:dataLength,size:size};_f.__initData=_worklet_736417391548_init_data;_f.__workletHash=736417391548;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[infinite,size,dataLength,overscrollEnabled]);var withSpring=_react.default.useCallback(function(){var _e=[new global.Error(),-6,-27];var _f=function _f(toValue,onFinished){var defaultWithAnimation={type:'timing',config:{duration:scrollAnimationDuration+100,easing:_constants.Easing.easeOutQuart}};return(0,_dealWithAnimation.dealWithAnimation)(withAnimation!=null?withAnimation:defaultWithAnimation)(toValue,function(){var _e=[new global.Error(),-3,-27];var _f=function _f(isFinished){if(isFinished)onFinished&&(0,_reactNativeReanimated.runOnJS)(onFinished)();};_f._closure={onFinished:onFinished,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_15664499378840_init_data;_f.__workletHash=15664499378840;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}());};_f._closure={scrollAnimationDuration:scrollAnimationDuration,Easing:_constants.Easing,dealWithAnimation:_dealWithAnimation.dealWithAnimation,withAnimation:withAnimation,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_11185458721430_init_data;_f.__workletHash=11185458721430;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[scrollAnimationDuration,withAnimation]);var endWithSpring=_react.default.useCallback(function(){var _e=[new global.Error(),-14,-27];var _f=function _f(onFinished){var origin=translation.value;var velocity=scrollEndVelocity.value;var finalTranslation=(0,_reactNativeReanimated.withDecay)({velocity:velocity,deceleration:0.999});if(typeof maxScrollDistancePerSwipe==='number'&&Math.abs(scrollEndTranslation.value)>maxScrollDistancePerSwipe){finalTranslation=origin;}else{if(pagingEnabled){var offset=-(scrollEndTranslation.value>=0?1:-1);var page;if(Math.abs(scrollEndVelocity.value)>=size*0.3){var computed=offset<0?Math.ceil:Math.floor;page=computed(-translation.value/size);}else{page=Math.round(-translation.value/size)-offset;}if(infinite){var finalPage=page+offset;finalTranslation=withSpring(withProcessTranslation(-finalPage*size),onFinished);}else{var _finalPage=Math.min(maxPage-1,Math.max(0,page+offset));finalTranslation=withSpring(withProcessTranslation(-_finalPage*size),onFinished);}}if(!pagingEnabled&&snapEnabled){var nextPage=Math.round((origin+velocity*0.4)/size)*size;finalTranslation=withSpring(withProcessTranslation(nextPage),onFinished);}}translation.value=finalTranslation;function withProcessTranslation(translation){if(!infinite&&!overscrollEnabled){var limit=getLimit();var sign=Math.sign(translation);return sign*Math.max(0,Math.min(limit,Math.abs(translation)));}return translation;}};_f._closure={translation:translation,scrollEndVelocity:scrollEndVelocity,withDecay:_reactNativeReanimated.withDecay,maxScrollDistancePerSwipe:maxScrollDistancePerSwipe,scrollEndTranslation:scrollEndTranslation,pagingEnabled:pagingEnabled,size:size,infinite:infinite,withSpring:withSpring,maxPage:maxPage,snapEnabled:snapEnabled,overscrollEnabled:overscrollEnabled,getLimit:getLimit};_f.__initData=_worklet_17014417787428_init_data;_f.__workletHash=17014417787428;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[withSpring,size,maxPage,infinite,snapEnabled,translation,pagingEnabled,scrollEndVelocity.value,maxScrollDistancePerSwipe,scrollEndTranslation.value]);var onFinish=_react.default.useCallback(function(){var _e=[new global.Error(),-4,-27];var _f=function _f(isFinished){if(isFinished){touching.value=false;onScrollEnd&&(0,_reactNativeReanimated.runOnJS)(onScrollEnd)();}};_f._closure={touching:touching,onScrollEnd:onScrollEnd,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_14734469187996_init_data;_f.__workletHash=14734469187996;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[onScrollEnd,touching]);var activeDecay=_react.default.useCallback(function(){var _e=[new global.Error(),-6,-27];var _f=function _f(){touching.value=true;translation.value=(0,_reactNativeReanimated.withDecay)({velocity:scrollEndVelocity.value},function(){var _e=[new global.Error(),-2,-27];var _f=function _f(isFinished){return onFinish(isFinished);};_f._closure={onFinish:onFinish};_f.__initData=_worklet_11301139675464_init_data;_f.__workletHash=11301139675464;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}());};_f._closure={touching:touching,translation:translation,withDecay:_reactNativeReanimated.withDecay,scrollEndVelocity:scrollEndVelocity,onFinish:onFinish};_f.__initData=_worklet_14660770182194_init_data;_f.__workletHash=14660770182194;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[onFinish,scrollEndVelocity.value,touching,translation]);var resetBoundary=_react.default.useCallback(function(){var _e=[new global.Error(),-9,-27];var _f=function _f(){if(touching.value)return;if(translation.value>0){if(scrollEndTranslation.value<0){activeDecay();return;}if(!infinite){translation.value=withSpring(0);return;}}if(translation.value<-((maxPage-1)*size)){if(scrollEndTranslation.value>0){activeDecay();return;}if(!infinite)translation.value=withSpring(-((maxPage-1)*size));}};_f._closure={touching:touching,translation:translation,scrollEndTranslation:scrollEndTranslation,activeDecay:activeDecay,infinite:infinite,withSpring:withSpring,maxPage:maxPage,size:size};_f.__initData=_worklet_5253258937186_init_data;_f.__workletHash=5253258937186;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[touching.value,translation,maxPage,size,scrollEndTranslation.value,infinite,activeDecay,withSpring]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return translation.value;};_f._closure={translation:translation};_f.__initData=_worklet_15931544841004_init_data;_f.__workletHash=15931544841004;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-3,-27];var _f=function _f(){if(!pagingEnabled)resetBoundary();};_f._closure={pagingEnabled:pagingEnabled,resetBoundary:resetBoundary};_f.__initData=_worklet_12444593625099_init_data;_f.__workletHash=12444593625099;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[pagingEnabled,resetBoundary]);var withProcessTranslation=function(){var _e=[new global.Error(),-4,-27];var _f=function _f(translation){if(!infinite&&!overscrollEnabled){var limit=getLimit();var sign=Math.sign(translation);return sign*Math.max(0,Math.min(limit,Math.abs(translation)));}return translation;};_f._closure={infinite:infinite,overscrollEnabled:overscrollEnabled,getLimit:getLimit};_f.__initData=_worklet_11427369935693_init_data;_f.__workletHash=11427369935693;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();var isGestureFinished=(0,_reactNativeReanimated.useSharedValue)(true);var handleScrollEnd=_react.default.useCallback(function(){isGestureFinished.value=true;onScrollEnd==null?void 0:onScrollEnd();},[onScrollEnd]);var panGestureEventHandler=(0,_reactNativeReanimated.useAnimatedGestureHandler)({onStart:function(){var _e=[new global.Error(),-11,-27];var _f=function _f(_,ctx){touching.value=true;ctx.validStart=true;onScrollBegin&&(0,_reactNativeReanimated.runOnJS)(onScrollBegin)();ctx.max=(maxPage-1)*size;if(!infinite&&!overscrollEnabled)ctx.max=getLimit();ctx.panOffset=translation.value;(0,_reactNativeReanimated.cancelAnimation)(translation);};_f._closure={touching:touching,onScrollBegin:onScrollBegin,runOnJS:_reactNativeReanimated.runOnJS,maxPage:maxPage,size:size,infinite:infinite,overscrollEnabled:overscrollEnabled,getLimit:getLimit,translation:translation,cancelAnimation:_reactNativeReanimated.cancelAnimation};_f.__initData=_worklet_15522222380281_init_data;_f.__workletHash=15522222380281;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),onActive:function(){var _e=[new global.Error(),-8,-27];var _f=function _f(e,ctx){if(ctx.validStart){ctx.validStart=false;(0,_reactNativeReanimated.cancelAnimation)(translation);}isGestureFinished.value=false;touching.value=true;var translationX=e.translationX,translationY=e.translationY;var totalTranslation=isHorizontal.value?translationX:translationY;if(typeof maxScrollDistancePerSwipe==='number'&&Math.abs(totalTranslation)>maxScrollDistancePerSwipe){var overSwipe=Math.abs(totalTranslation)-maxScrollDistancePerSwipe;var dampedTranslation=maxScrollDistancePerSwipe+overSwipe*0.5;translationX=isHorizontal.value?dampedTranslation*Math.sign(translationX):translationX;translationY=!isHorizontal.value?dampedTranslation*Math.sign(translationY):translationY;}var panTranslation=isHorizontal.value?translationX:translationY;if(!infinite){if(translation.value>0||translation.value<-ctx.max){var boundary=translation.value>0?0:-ctx.max;var fixed=boundary-(Math.abs(ctx.panOffset-boundary)<1?translation.value:ctx.panOffset);var dynamic=panTranslation-fixed;translation.value=boundary+dynamic*0.5;return;}}var translationValue=ctx.panOffset+panTranslation;translation.value=translationValue;};_f._closure={cancelAnimation:_reactNativeReanimated.cancelAnimation,translation:translation,isGestureFinished:isGestureFinished,touching:touching,isHorizontal:isHorizontal,maxScrollDistancePerSwipe:maxScrollDistancePerSwipe,infinite:infinite};_f.__initData=_worklet_3199223540856_init_data;_f.__workletHash=3199223540856;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),onFinish:function(){var _e=[new global.Error(),-14,-27];var _f=function _f(e,ctx){if(isGestureFinished.value)return;var velocityX=e.velocityX,velocityY=e.velocityY,translationX=e.translationX,translationY=e.translationY;scrollEndVelocity.value=isHorizontal.value?velocityX:velocityY;scrollEndTranslation.value=isHorizontal.value?translationX:translationY;var totalTranslation=isHorizontal.value?translationX:translationY;if(typeof maxScrollDistancePerSwipe==='number'&&Math.abs(totalTranslation)>maxScrollDistancePerSwipe){var nextPage=Math.round((ctx.panOffset+maxScrollDistancePerSwipe*Math.sign(totalTranslation))/size)*size;translation.value=withSpring(withProcessTranslation(nextPage),handleScrollEnd);}else{endWithSpring(handleScrollEnd);}if(!infinite)touching.value=false;};_f._closure={isGestureFinished:isGestureFinished,scrollEndVelocity:scrollEndVelocity,isHorizontal:isHorizontal,scrollEndTranslation:scrollEndTranslation,maxScrollDistancePerSwipe:maxScrollDistancePerSwipe,size:size,translation:translation,withSpring:withSpring,withProcessTranslation:withProcessTranslation,handleScrollEnd:handleScrollEnd,endWithSpring:endWithSpring,infinite:infinite,touching:touching};_f.__initData=_worklet_10290739149889_init_data;_f.__workletHash=10290739149889;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}()},[pagingEnabled,isHorizontal.value,infinite,maxPage,size,snapEnabled,onScrollBegin,handleScrollEnd]);return(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.PanGestureHandler,Object.assign({},panGestureHandlerProps,{enabled:enabled,onGestureEvent:panGestureEventHandler,children:(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{ref:containerRef,testID:testID,style:style,onTouchStart:onTouchBegin,onTouchEnd:onTouchEnd,children:props.children})}));};var ScrollViewGesture=IScrollViewGesture;exports.ScrollViewGesture=ScrollViewGesture;
 //# sourceMappingURL=ScrollViewGesture.js.map
\ No newline at end of file
diff --git a/lib/commonjs/ScrollViewGesture.js.map b/lib/commonjs/ScrollViewGesture.js.map
index 0fcfbc946429f2e782608ee2fe78f2f289a9f986..6d02f3273714e2304adf11fc1d0586fe36354707 100644
--- a/lib/commonjs/ScrollViewGesture.js.map
+++ b/lib/commonjs/ScrollViewGesture.js.map
@@ -1 +1 @@
-{"version":3,"sources":["ScrollViewGesture.tsx"],"names":["IScrollViewGesture","props","React","useContext","CTX","vertical","pagingEnabled","snapEnabled","panGestureHandlerProps","infinite","loop","scrollAnimationDuration","withAnimation","enabled","dataLength","overscrollEnabled","maxScrollDistancePerSwipe","size","translation","testID","style","onScrollBegin","onScrollEnd","onTouchBegin","onTouchEnd","maxPage","isHorizontal","touching","scrollEndTranslation","scrollEndVelocity","containerRef","getLimit","useCallback","width","containerWidth","measure","withSpring","toValue","onFinished","defaultWithAnimation","type","config","duration","easing","Easing","easeOutQuart","isFinished","runOnJS","dealWithAnimation","endWithSpring","origin","value","velocity","finalTranslation","deceleration","Math","abs","offset","computed","ceil","floor","page","finalPage","withProcessTranslation","min","max","nextPage","round","limit","sign","withDecay","onFinish","activeDecay","resetBoundary","panGestureEventHandler","onStart","_","ctx","validStart","panOffset","onActive","e","translationX","translationY","totalTranslation","overSwipe","dampedTranslation","panTranslation","boundary","fixed","dynamic","translationValue","cancelAnimation","onEnd","velocityX","velocityY","children","ScrollViewGesture"],"mappings":"6KACA,oDAGA,uEACA,uFAYA,sCACA,8BAEA,4D,y8vBAoBA,GAAMA,CAAAA,kBAAsD,CAAG,QAAzDA,CAAAA,kBAAyD,CAACC,KAAD,CAAW,CACxE,sBAcIC,eAAMC,UAAN,CAAiBC,UAAjB,CAdJ,yCACEH,KADF,CAEII,QAFJ,uBAEIA,QAFJ,CAGIC,aAHJ,uBAGIA,aAHJ,CAIIC,WAJJ,uBAIIA,WAJJ,CAKIC,sBALJ,uBAKIA,sBALJ,CAMUC,QANV,uBAMIC,IANJ,CAOIC,uBAPJ,uBAOIA,uBAPJ,CAQIC,aARJ,uBAQIA,aARJ,CASIC,OATJ,uBASIA,OATJ,CAUIC,UAVJ,uBAUIA,UAVJ,CAWIC,iBAXJ,uBAWIA,iBAXJ,CAYIC,yBAZJ,uBAYIA,yBAZJ,CAgBA,GACEC,CAAAA,IADF,CASIhB,KATJ,CACEgB,IADF,CAEEC,WAFF,CASIjB,KATJ,CAEEiB,WAFF,CAGEC,MAHF,CASIlB,KATJ,CAGEkB,MAHF,cASIlB,KATJ,CAIEmB,KAJF,CAIEA,KAJF,uBAIU,EAJV,cAKEC,aALF,CASIpB,KATJ,CAKEoB,aALF,CAMEC,WANF,CASIrB,KATJ,CAMEqB,WANF,CAOEC,YAPF,CASItB,KATJ,CAOEsB,YAPF,CAQEC,UARF,CASIvB,KATJ,CAQEuB,UARF,CAWA,GAAMC,CAAAA,OAAO,CAAGX,UAAhB,CACA,GAAMY,CAAAA,YAAY,CAAG,gGAAgB,oBAAM,CAACrB,QAAP,EAAhB,uBArEfA,QAqEe,0IAAiC,CAACA,QAAD,CAAjC,CAArB,CACA,GAAMsB,CAAAA,QAAQ,CAAG,0CAAe,KAAf,CAAjB,CACA,GAAMC,CAAAA,oBAAoB,CAAG,0CAAe,CAAf,CAA7B,CACA,GAAMC,CAAAA,iBAAiB,CAAG,0CAAe,CAAf,CAA1B,CACA,GAAMC,CAAAA,YAAY,CAAG,2CAArB,CAGA,GAAMC,CAAAA,QAAQ,CAAG7B,eAAM8B,WAAN,mEAAwB,CAGvC,GAAI,CAACvB,QAAD,EAAa,CAACM,iBAAlB,CAAqC,CACnC,aAAsC,mCAAQe,YAAR,CAAtC,yBAAQG,KAAR,CAAeC,cAAf,yBAAgC,CAAhC,gBAGA,GAAIpB,UAAU,CAAGG,IAAb,CAAoBiB,cAAxB,CACE,MAAO,EAAP,CAGF,MAAOpB,CAAAA,UAAU,CAAGG,IAAb,CAAoBiB,cAA3B,CACD,CAED,MAAOpB,CAAAA,UAAU,CAAGG,IAApB,CACD,CAfgB,uBA3EZR,QA2EY,mBA3ECM,iBA2ED,SAxEXoB,8BAwEW,cAxEHL,YAwEG,YAhEVhB,UAgEU,MAhEGG,IAgEH,sIAed,CAACR,QAAD,CAAWQ,IAAX,CAAiBH,UAAjB,CAA6BC,iBAA7B,CAfc,CAAjB,CAiBA,GAAMqB,CAAAA,UAAU,CAAGlC,eAAM8B,WAAN,kEAChBK,OADgB,CACCC,UADD,CAC6B,CAE5C,GAAMC,CAAAA,oBAAyC,CAAG,CAChDC,IAAI,CAAE,QAD0C,CAEhDC,MAAM,CAAE,CACNC,QAAQ,CAAE/B,uBAAuB,CAAG,GAD9B,CAENgC,MAAM,CAAEC,kBAAOC,YAFT,CAFwC,CAAlD,CAQA,MAAO,yCAAkBjC,aAAlB,OAAkBA,aAAlB,CAAmC2B,oBAAnC,EACLF,OADK,kEAEJS,UAFI,CAEoB,CAEvB,GAAIA,UAAJ,CACER,UAAU,EAAI,mCAAQA,UAAR,GAAd,CACH,CANI,yBAvG2BA,UAuG3B,SAvGmBS,8BAuGnB,0IAAP,CAQD,CAnBgB,sCAzFLpC,uBAyFK,QAxFPiC,iBAwFO,mBArFZI,oCAqFY,eArFMpC,aAqFN,SAlFamC,8BAkFb,oIAoBjB,CAACpC,uBAAD,CAA0BC,aAA1B,CApBiB,CAAnB,CAuBA,GAAMqC,CAAAA,aAAa,CAAG/C,eAAM8B,WAAN,mEACnBM,UADmB,CACS,CAE3B,GAAMY,CAAAA,MAAM,CAAGhC,WAAW,CAACiC,KAA3B,CACA,GAAMC,CAAAA,QAAQ,CAAGvB,iBAAiB,CAACsB,KAAnC,CAEA,GAAIE,CAAAA,gBAAwB,CAAG,qCAAU,CAAED,QAAQ,CAARA,QAAF,CAAYE,YAAY,CAAE,KAA1B,CAAV,CAA/B,CAGA,GAAI,MAAOtC,CAAAA,yBAAP,GAAqC,QAArC,EAAiDuC,IAAI,CAACC,GAAL,CAAS5B,oBAAoB,CAACuB,KAA9B,EAAuCnC,yBAA5F,CAAuH,CACrHqC,gBAAgB,CAAGH,MAAnB,CACD,CAFD,IAGK,CAQH,GAAI5C,aAAJ,CAAmB,CAEjB,GAAMmD,CAAAA,MAAM,CAAG,EAAE7B,oBAAoB,CAACuB,KAArB,EAA8B,CAA9B,CAAkC,CAAlC,CAAsC,CAAC,CAAzC,CAAf,CACA,GAAMO,CAAAA,QAAQ,CAAGD,MAAM,CAAG,CAAT,CAAaF,IAAI,CAACI,IAAlB,CAAyBJ,IAAI,CAACK,KAA/C,CACA,GAAMC,CAAAA,IAAI,CAAGH,QAAQ,CAAC,CAACxC,WAAW,CAACiC,KAAb,CAAqBlC,IAAtB,CAArB,CAEA,GAAIR,QAAJ,CAAc,CACZ,GAAMqD,CAAAA,SAAS,CAAGD,IAAI,CAAGJ,MAAzB,CACAJ,gBAAgB,CAAGjB,UAAU,CAAC2B,sBAAsB,CAAC,CAACD,SAAD,CAAa7C,IAAd,CAAvB,CAA4CqB,UAA5C,CAA7B,CACD,CAHD,IAIK,CACH,GAAMwB,CAAAA,UAAS,CAAGP,IAAI,CAACS,GAAL,CAASvC,OAAO,CAAG,CAAnB,CAAsB8B,IAAI,CAACU,GAAL,CAAS,CAAT,CAAYJ,IAAI,CAAGJ,MAAnB,CAAtB,CAAlB,CACAJ,gBAAgB,CAAGjB,UAAU,CAAC2B,sBAAsB,CAAC,CAACD,UAAD,CAAa7C,IAAd,CAAvB,CAA4CqB,UAA5C,CAA7B,CACD,CACF,CAED,GAAI,CAAChC,aAAD,EAAkBC,WAAtB,CAAmC,CAEjC,GAAM2D,CAAAA,QAAQ,CAAGX,IAAI,CAACY,KAAL,CAAW,CAACjB,MAAM,CAAGE,QAAQ,CAAG,GAArB,EAA4BnC,IAAvC,EAA+CA,IAAhE,CACAoC,gBAAgB,CAAGjB,UAAU,CAAC2B,sBAAsB,CAACG,QAAD,CAAvB,CAAmC5B,UAAnC,CAA7B,CACD,CACF,CAEDpB,WAAW,CAACiC,KAAZ,CAAoBE,gBAApB,CAEA,QAASU,CAAAA,sBAAT,CAAgC7C,WAAhC,CAAqD,CACnD,GAAI,CAACT,QAAD,EAAa,CAACM,iBAAlB,CAAqC,CACnC,GAAMqD,CAAAA,KAAK,CAAGrC,QAAQ,EAAtB,CACA,GAAMsC,CAAAA,IAAI,CAAGd,IAAI,CAACc,IAAL,CAAUnD,WAAV,CAAb,CACA,MAAOmD,CAAAA,IAAI,CAAGd,IAAI,CAACU,GAAL,CAAS,CAAT,CAAYV,IAAI,CAACS,GAAL,CAASI,KAAT,CAAgBb,IAAI,CAACC,GAAL,CAAStC,WAAT,CAAhB,CAAZ,CAAd,CACD,CAED,MAAOA,CAAAA,WAAP,CACD,CACF,CAtDmB,0BA7EtBA,WA6EsB,mBAlHLW,iBAkHK,WAhHSyC,gCAgHT,2BA1GsEtD,yBA0GtE,sBA9FDY,oBA8FC,eAnFftB,aAmFe,MAjF8CW,IAiF9C,UA3EfR,QA2Ee,YAhFC2B,UAgFD,SAvFWX,OAuFX,aAnFElB,WAmFF,mBA3EFQ,iBA2EE,UA1EJgB,QA0EI,0IAuDpB,CACEK,UADF,CAEEnB,IAFF,CAGEQ,OAHF,CAIEhB,QAJF,CAKEF,WALF,CAMEW,WANF,CAOEZ,aAPF,CAQEuB,iBAAiB,CAACsB,KARpB,CASEnC,yBATF,CAUEY,oBAAoB,CAACuB,KAVvB,CAvDoB,CAAtB,CAqEA,GAAMoB,CAAAA,QAAQ,CAAGrE,eAAM8B,WAAN,kEACdc,UADc,CACU,CAEvB,GAAIA,UAAJ,CAAgB,CACdnB,QAAQ,CAACwB,KAAT,CAAiB,KAAjB,CACA7B,WAAW,EAAI,mCAAQA,WAAR,GAAf,CACD,CACF,CAPc,uBAvLfK,QAuLe,aAtLQL,WAsLR,SAtLAyB,8BAsLA,0IAQf,CAACzB,WAAD,CAAcK,QAAd,CARe,CAAjB,CAWA,GAAM6C,CAAAA,WAAW,CAAGtE,eAAM8B,WAAN,mEAAwB,CAE1CL,QAAQ,CAACwB,KAAT,CAAiB,IAAjB,CACAjC,WAAW,CAACiC,KAAZ,CAAoB,qCAClB,CAAEC,QAAQ,CAAEvB,iBAAiB,CAACsB,KAA9B,CADkB,sDAElB,YAAAL,UAAU,QAAIyB,CAAAA,QAAQ,CAACzB,UAAD,CAAZ,EAFQ,uBAvMTyB,QAuMS,0IAApB,CAID,CAPmB,uBAnMpB5C,QAmMoB,aAlMpBT,WAkMoB,WAlMAoD,gCAkMA,mBAjMRzC,iBAiMQ,UAhMH0C,QAgMG,0IAOjB,CAACA,QAAD,CAAW1C,iBAAiB,CAACsB,KAA7B,CAAoCxB,QAApC,CAA8CT,WAA9C,CAPiB,CAApB,CASA,GAAMuD,CAAAA,aAAa,CAAGvE,eAAM8B,WAAN,mEAAwB,CAE5C,GAAIL,QAAQ,CAACwB,KAAb,CACE,OAEF,GAAIjC,WAAW,CAACiC,KAAZ,CAAoB,CAAxB,CAA2B,CACzB,GAAIvB,oBAAoB,CAACuB,KAArB,CAA6B,CAAjC,CAAoC,CAClCqB,WAAW,GACX,OACD,CACD,GAAI,CAAC/D,QAAL,CAAe,CACbS,WAAW,CAACiC,KAAZ,CAAoBf,UAAU,CAAC,CAAD,CAA9B,CACA,OACD,CACF,CAED,GAAIlB,WAAW,CAACiC,KAAZ,CAAoB,EAAE,CAAC1B,OAAO,CAAG,CAAX,EAAgBR,IAAlB,CAAxB,CAAiD,CAC/C,GAAIW,oBAAoB,CAACuB,KAArB,CAA6B,CAAjC,CAAoC,CAClCqB,WAAW,GACX,OACD,CACD,GAAI,CAAC/D,QAAL,CACES,WAAW,CAACiC,KAAZ,CAAoBf,UAAU,CAAC,EAAE,CAACX,OAAO,CAAG,CAAX,EAAgBR,IAAlB,CAAD,CAA9B,CACH,CACF,CAxBqB,uBA5MlBU,QA4MkB,aA5LLT,WA4LK,sBAhMhBU,oBAgMgB,aA/LlB4C,WA+LkB,UA5Lf/D,QA4Le,YA5Le2B,UA4Lf,SA5L6BX,OA4L7B,MA5L4CR,IA4L5C,wIAwBnB,CACDU,QAAQ,CAACwB,KADR,CAEDjC,WAFC,CAGDO,OAHC,CAIDR,IAJC,CAKDW,oBAAoB,CAACuB,KALpB,CAMD1C,QANC,CAOD+D,WAPC,CAQDpC,UARC,CAxBmB,CAAtB,CAmCA,oGACE,oBAAMlB,CAAAA,WAAW,CAACiC,KAAlB,EADF,0BAhPKjC,WAgPL,4MAEQ,CACJ,GAAI,CAACZ,aAAL,CACEmE,aAAa,GAChB,CALH,4BA/OKnE,aA+OL,eA/OoBmE,aA+OpB,0IAME,CAACnE,aAAD,CAAgBmE,aAAhB,CANF,EAxMwE,GAiN/DV,CAAAA,sBAjN+D,kEAiNxC7C,WAjNwC,CAiNnB,CAGnD,GAAI,CAACT,QAAD,EAAa,CAACM,iBAAlB,CAAqC,CACnC,GAAMqD,CAAAA,KAAK,CAAGrC,QAAQ,EAAtB,CACA,GAAMsC,CAAAA,IAAI,CAAGd,IAAI,CAACc,IAAL,CAAUnD,WAAV,CAAb,CACA,MAAOmD,CAAAA,IAAI,CAAGd,IAAI,CAACU,GAAL,CAAS,CAAT,CAAYV,IAAI,CAACS,GAAL,CAASI,KAAT,CAAgBb,IAAI,CAACC,GAAL,CAAStC,WAAT,CAAhB,CAAZ,CAAd,CACD,CAED,MAAOA,CAAAA,WAAP,CACD,CA3NuE,uBAvCnET,QAuCmE,mBAvCtDM,iBAuCsD,UAtCxDgB,QAsCwD,0IA6NxE,GAAM2C,CAAAA,sBAAsB,CAAG,qDAI7B,CACEC,OAAO,mEAAGC,CAAH,CAAMC,GAAN,CAAc,CACnBlD,QAAQ,CAACwB,KAAT,CAAiB,IAAjB,CACA0B,GAAG,CAACC,UAAJ,CAAiB,IAAjB,CACAzD,aAAa,EAAI,mCAAQA,aAAR,GAAjB,CAEAwD,GAAG,CAACZ,GAAJ,CAAU,CAACxC,OAAO,CAAG,CAAX,EAAgBR,IAA1B,CACA,GAAI,CAACR,QAAD,EAAa,CAACM,iBAAlB,CACE8D,GAAG,CAACZ,GAAJ,CAAUlC,QAAQ,EAAlB,CAEF8C,GAAG,CAACE,SAAJ,CAAgB7D,WAAW,CAACiC,KAA5B,CACD,CAVM,uBAzQXxB,QAyQW,eAvQcN,aAuQd,SAvQM0B,8BAuQN,SAtQAtB,OAsQA,MAtQeR,IAsQf,UArQNR,QAqQM,mBArQOM,iBAqQP,UArQoCgB,QAqQpC,aApQKb,WAoQL,uIADT,CAYE8D,QAAQ,kEAAGC,CAAH,CAAMJ,GAAN,CAAc,CACpB,GAAIA,GAAG,CAACC,UAAR,CAAoB,CAClBD,GAAG,CAACC,UAAJ,CAAiB,KAAjB,CACA,2CAAgB5D,WAAhB,EACD,CACDS,QAAQ,CAACwB,KAAT,CAAiB,IAAjB,CACA,GAAM+B,CAAAA,YAAN,CAAqCD,CAArC,CAAMC,YAAN,CAAoBC,YAApB,CAAqCF,CAArC,CAAoBE,YAApB,CAEA,GAAMC,CAAAA,gBAAgB,CAAG1D,YAAY,CAACyB,KAAb,CAAqB+B,YAArB,CAAoCC,YAA7D,CAEA,GAAI,MAAOnE,CAAAA,yBAAP,GAAqC,QAArC,EAAiDuC,IAAI,CAACC,GAAL,CAAS4B,gBAAT,EAA6BpE,yBAAlF,CAA6G,CAC3G,GAAMqE,CAAAA,SAAS,CAAG9B,IAAI,CAACC,GAAL,CAAS4B,gBAAT,EAA6BpE,yBAA/C,CACA,GAAMsE,CAAAA,iBAAiB,CAAGtE,yBAAyB,CAAGqE,SAAS,CAAG,GAAlE,CAEAH,YAAY,CAAGxD,YAAY,CAACyB,KAAb,CAAqBmC,iBAAiB,CAAG/B,IAAI,CAACc,IAAL,CAAUa,YAAV,CAAzC,CAAmEA,YAAlF,CACAC,YAAY,CAAG,CAACzD,YAAY,CAACyB,KAAd,CAAsBmC,iBAAiB,CAAG/B,IAAI,CAACc,IAAL,CAAUc,YAAV,CAA1C,CAAoEA,YAAnF,CACD,CAED,GAAMI,CAAAA,cAAc,CAAG7D,YAAY,CAACyB,KAAb,CAAqB+B,YAArB,CAAoCC,YAA3D,CACA,GAAI,CAAC1E,QAAL,CAAe,CACb,GAAKS,WAAW,CAACiC,KAAZ,CAAoB,CAApB,EAAyBjC,WAAW,CAACiC,KAAZ,CAAoB,CAAC0B,GAAG,CAACZ,GAAvD,CAA6D,CAC3D,GAAMuB,CAAAA,QAAQ,CAAGtE,WAAW,CAACiC,KAAZ,CAAoB,CAApB,CAAwB,CAAxB,CAA4B,CAAC0B,GAAG,CAACZ,GAAlD,CACA,GAAMwB,CAAAA,KAAK,CAAGD,QAAQ,CAAGX,GAAG,CAACE,SAA7B,CACA,GAAMW,CAAAA,OAAO,CAAGH,cAAc,CAAGE,KAAjC,CACAvE,WAAW,CAACiC,KAAZ,CAAoBqC,QAAQ,CAAGE,OAAO,CAAG,GAAzC,CACA,OACD,CACF,CAED,GAAMC,CAAAA,gBAAgB,CAAGd,GAAG,CAACE,SAAJ,CAAgBQ,cAAzC,CAEArE,WAAW,CAACiC,KAAZ,CAAoBwC,gBAApB,CACD,CAhCO,8BAlRVC,sCAkRU,aAzPZ1E,WAyPY,UAhRZS,QAgRY,cApQWD,YAoQX,2BAxQgBV,yBAwQhB,UAnQPP,QAmQO,yIAZV,CA6CEoF,KAAK,mEAAGZ,CAAH,CAAMJ,GAAN,CAAc,CACjB,GAAQiB,CAAAA,SAAR,CAA6Db,CAA7D,CAAQa,SAAR,CAAmBC,SAAnB,CAA6Dd,CAA7D,CAAmBc,SAAnB,CAA8Bb,YAA9B,CAA6DD,CAA7D,CAA8BC,YAA9B,CAA4CC,YAA5C,CAA6DF,CAA7D,CAA4CE,YAA5C,CACAtD,iBAAiB,CAACsB,KAAlB,CAA0BzB,YAAY,CAACyB,KAAb,CACtB2C,SADsB,CAEtBC,SAFJ,CAGAnE,oBAAoB,CAACuB,KAArB,CAA6BzB,YAAY,CAACyB,KAAb,CACzB+B,YADyB,CAEzBC,YAFJ,CAIA,GAAMC,CAAAA,gBAAgB,CAAG1D,YAAY,CAACyB,KAAb,CAAqB+B,YAArB,CAAoCC,YAA7D,CAEA,GAAI,MAAOnE,CAAAA,yBAAP,GAAqC,QAArC,EAAiDuC,IAAI,CAACC,GAAL,CAAS4B,gBAAT,EAA6BpE,yBAAlF,CAA6G,CAC3G,GAAMkD,CAAAA,QAAQ,CAAGX,IAAI,CAACY,KAAL,CAAW,CAACU,GAAG,CAACE,SAAJ,CAAgB/D,yBAAyB,CAAGuC,IAAI,CAACc,IAAL,CAAUe,gBAAV,CAA7C,EAA4EnE,IAAvF,EAA+FA,IAAhH,CACAC,WAAW,CAACiC,KAAZ,CAAoBf,UAAU,CAAC2B,sBAAsB,CAACG,QAAD,CAAvB,CAAmC5C,WAAnC,CAA9B,CACD,CAHD,IAIK,CACH2B,aAAa,CAAC3B,WAAD,CAAb,CACD,CAED,GAAI,CAACb,QAAL,CACEkB,QAAQ,CAACwB,KAAT,CAAiB,KAAjB,CACH,CArBI,gCA/STtB,iBA+SS,cA7SgBH,YA6ShB,sBA9STE,oBA8SS,2BA3SsCZ,yBA2StC,MA3SyGC,IA2SzG,aA1SPC,WA0SO,YA1SakB,UA0Sb,wBA1SwB2B,sBA0SxB,aAxSOzC,WAwSP,eAxSP2B,aAwSO,UAtSJxC,QAsSI,UAtSMkB,QAsSN,yIA7CP,CAJ6B,CAwE7B,CACErB,aADF,CAEEoB,YAAY,CAACyB,KAFf,CAGE1C,QAHF,CAIEgB,OAJF,CAKER,IALF,CAMEV,WANF,CAOEc,aAPF,CAQEC,WARF,CAxE6B,CAA/B,CAoFA,MACE,oBAAC,4CAAD,kBACMd,sBADN,EAEE,OAAO,CAAEK,OAFX,CAGE,cAAc,CAAE6D,sBAHlB,UAKE,oBAAC,8BAAD,CAAU,IAAV,EACE,GAAG,CAAE5C,YADP,CAEE,MAAM,CAAEX,MAFV,CAGE,KAAK,CAAEC,KAHT,CAIE,YAAY,CAAEG,YAJhB,CAKE,UAAU,CAAEC,UALd,UAOGvB,KAAK,CAAC+F,QAPT,EALF,GADF,CAiBD,CAlUD,CAoUO,GAAMC,CAAAA,iBAAiB,CAAGjG,kBAA1B,C","sourcesContent":["import type { PropsWithChildren } from \"react\";\nimport React from \"react\";\nimport type { StyleProp, ViewStyle } from \"react-native\";\nimport type { PanGestureHandlerGestureEvent } from \"react-native-gesture-handler\";\nimport { PanGestureHandler } from \"react-native-gesture-handler\";\nimport Animated, {\n  cancelAnimation,\n  measure,\n  runOnJS,\n  useAnimatedGestureHandler,\n  useAnimatedReaction,\n  useAnimatedRef,\n  useDerivedValue,\n  useSharedValue,\n  withDecay,\n} from \"react-native-reanimated\";\n\nimport { Easing } from \"./constants\";\nimport { CTX } from \"./store\";\nimport type { WithTimingAnimation } from \"./types\";\nimport { dealWithAnimation } from \"./utils/dealWithAnimation\";\n\ninterface GestureContext extends Record<string, unknown> {\n  validStart: boolean\n  panOffset: number\n  max: number\n}\n\ninterface Props {\n  size: number\n  infinite?: boolean\n  testID?: string\n  style?: StyleProp<ViewStyle>\n  onScrollBegin?: () => void\n  onScrollEnd?: () => void\n  onTouchBegin?: () => void\n  onTouchEnd?: () => void\n  translation: Animated.SharedValue<number>\n}\n\nconst IScrollViewGesture: React.FC<PropsWithChildren<Props>> = (props) => {\n  const {\n    props: {\n      vertical,\n      pagingEnabled,\n      snapEnabled,\n      panGestureHandlerProps,\n      loop: infinite,\n      scrollAnimationDuration,\n      withAnimation,\n      enabled,\n      dataLength,\n      overscrollEnabled,\n      maxScrollDistancePerSwipe,\n    },\n  } = React.useContext(CTX);\n\n  const {\n    size,\n    translation,\n    testID,\n    style = {},\n    onScrollBegin,\n    onScrollEnd,\n    onTouchBegin,\n    onTouchEnd,\n  } = props;\n\n  const maxPage = dataLength;\n  const isHorizontal = useDerivedValue(() => !vertical, [vertical]);\n  const touching = useSharedValue(false);\n  const scrollEndTranslation = useSharedValue(0);\n  const scrollEndVelocity = useSharedValue(0);\n  const containerRef = useAnimatedRef<Animated.View>();\n\n  // Get the limit of the scroll.\n  const getLimit = React.useCallback(() => {\n    \"worklet\";\n\n    if (!infinite && !overscrollEnabled) {\n      const { width: containerWidth = 0 } = measure(containerRef);\n\n      // If the item's total width is less than the container's width, then there is no need to scroll.\n      if (dataLength * size < containerWidth)\n        return 0;\n\n      // Disable the \"overscroll\" effect\n      return dataLength * size - containerWidth;\n    }\n\n    return dataLength * size;\n  }, [infinite, size, dataLength, overscrollEnabled]);\n\n  const withSpring = React.useCallback(\n    (toValue: number, onFinished?: () => void) => {\n      \"worklet\";\n      const defaultWithAnimation: WithTimingAnimation = {\n        type: \"timing\",\n        config: {\n          duration: scrollAnimationDuration + 100,\n          easing: Easing.easeOutQuart,\n        },\n      };\n\n      return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n        toValue,\n        (isFinished: boolean) => {\n          \"worklet\";\n          if (isFinished)\n            onFinished && runOnJS(onFinished)();\n        },\n      );\n    },\n    [scrollAnimationDuration, withAnimation],\n  );\n\n  const endWithSpring = React.useCallback(\n    (onFinished?: () => void) => {\n      \"worklet\";\n      const origin = translation.value;\n      const velocity = scrollEndVelocity.value;\n      // Default to scroll in the direction of the slide (with deceleration)\n      let finalTranslation: number = withDecay({ velocity, deceleration: 0.999 });\n\n      // If the distance of the swipe exceeds the max scroll distance, keep the view at the current position\n      if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe) {\n        finalTranslation = origin;\n      }\n      else {\n      /**\n       * The page size is the same as the item size.\n       * If direction is vertical, the page size is the height of the item.\n       * If direction is horizontal, the page size is the width of the item.\n      *\n      * `page size` equals to `size` variable.\n      * */\n        if (pagingEnabled) {\n          // distance with direction\n          const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1); // 1 or -1\n          const computed = offset < 0 ? Math.ceil : Math.floor;\n          const page = computed(-translation.value / size);\n\n          if (infinite) {\n            const finalPage = page + offset;\n            finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n          }\n          else {\n            const finalPage = Math.min(maxPage - 1, Math.max(0, page + offset));\n            finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n          }\n        }\n\n        if (!pagingEnabled && snapEnabled) {\n          // scroll to the nearest item\n          const nextPage = Math.round((origin + velocity * 0.4) / size) * size;\n          finalTranslation = withSpring(withProcessTranslation(nextPage), onFinished);\n        }\n      }\n\n      translation.value = finalTranslation;\n\n      function withProcessTranslation(translation: number) {\n        if (!infinite && !overscrollEnabled) {\n          const limit = getLimit();\n          const sign = Math.sign(translation);\n          return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n        }\n\n        return translation;\n      }\n    },\n    [\n      withSpring,\n      size,\n      maxPage,\n      infinite,\n      snapEnabled,\n      translation,\n      pagingEnabled,\n      scrollEndVelocity.value,\n      maxScrollDistancePerSwipe,\n      scrollEndTranslation.value,\n    ],\n  );\n\n  const onFinish = React.useCallback(\n    (isFinished: boolean) => {\n      \"worklet\";\n      if (isFinished) {\n        touching.value = false;\n        onScrollEnd && runOnJS(onScrollEnd)();\n      }\n    },\n    [onScrollEnd, touching],\n  );\n\n  const activeDecay = React.useCallback(() => {\n    \"worklet\";\n    touching.value = true;\n    translation.value = withDecay(\n      { velocity: scrollEndVelocity.value },\n      isFinished => onFinish(isFinished as boolean),\n    );\n  }, [onFinish, scrollEndVelocity.value, touching, translation]);\n\n  const resetBoundary = React.useCallback(() => {\n    \"worklet\";\n    if (touching.value)\n      return;\n\n    if (translation.value > 0) {\n      if (scrollEndTranslation.value < 0) {\n        activeDecay();\n        return;\n      }\n      if (!infinite) {\n        translation.value = withSpring(0);\n        return;\n      }\n    }\n\n    if (translation.value < -((maxPage - 1) * size)) {\n      if (scrollEndTranslation.value > 0) {\n        activeDecay();\n        return;\n      }\n      if (!infinite)\n        translation.value = withSpring(-((maxPage - 1) * size));\n    }\n  }, [\n    touching.value,\n    translation,\n    maxPage,\n    size,\n    scrollEndTranslation.value,\n    infinite,\n    activeDecay,\n    withSpring,\n  ]);\n\n  useAnimatedReaction(\n    () => translation.value,\n    () => {\n      if (!pagingEnabled)\n        resetBoundary();\n    },\n    [pagingEnabled, resetBoundary],\n  );\n\n  function withProcessTranslation(translation: number) {\n    \"worklet\";\n\n    if (!infinite && !overscrollEnabled) {\n      const limit = getLimit();\n      const sign = Math.sign(translation);\n      return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n    }\n\n    return translation;\n  }\n\n  const panGestureEventHandler = useAnimatedGestureHandler<\n  PanGestureHandlerGestureEvent,\n  GestureContext\n  >(\n    {\n      onStart: (_, ctx) => {\n        touching.value = true;\n        ctx.validStart = true;\n        onScrollBegin && runOnJS(onScrollBegin)();\n\n        ctx.max = (maxPage - 1) * size;\n        if (!infinite && !overscrollEnabled)\n          ctx.max = getLimit();\n\n        ctx.panOffset = translation.value;\n      },\n      onActive: (e, ctx) => {\n        if (ctx.validStart) {\n          ctx.validStart = false;\n          cancelAnimation(translation);\n        }\n        touching.value = true;\n        let { translationX, translationY } = e;\n\n        const totalTranslation = isHorizontal.value ? translationX : translationY;\n\n        if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {\n          const overSwipe = Math.abs(totalTranslation) - maxScrollDistancePerSwipe;\n          const dampedTranslation = maxScrollDistancePerSwipe + overSwipe * 0.5;\n\n          translationX = isHorizontal.value ? dampedTranslation * Math.sign(translationX) : translationX;\n          translationY = !isHorizontal.value ? dampedTranslation * Math.sign(translationY) : translationY;\n        }\n\n        const panTranslation = isHorizontal.value ? translationX : translationY;\n        if (!infinite) {\n          if ((translation.value > 0 || translation.value < -ctx.max)) {\n            const boundary = translation.value > 0 ? 0 : -ctx.max;\n            const fixed = boundary - ctx.panOffset;\n            const dynamic = panTranslation - fixed;\n            translation.value = boundary + dynamic * 0.5;\n            return;\n          }\n        }\n\n        const translationValue = ctx.panOffset + panTranslation;\n\n        translation.value = translationValue;\n      },\n      onEnd: (e, ctx) => {\n        const { velocityX, velocityY, translationX, translationY } = e;\n        scrollEndVelocity.value = isHorizontal.value\n          ? velocityX\n          : velocityY;\n        scrollEndTranslation.value = isHorizontal.value\n          ? translationX\n          : translationY;\n\n        const totalTranslation = isHorizontal.value ? translationX : translationY;\n\n        if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {\n          const nextPage = Math.round((ctx.panOffset + maxScrollDistancePerSwipe * Math.sign(totalTranslation)) / size) * size;\n          translation.value = withSpring(withProcessTranslation(nextPage), onScrollEnd);\n        }\n        else {\n          endWithSpring(onScrollEnd);\n        }\n\n        if (!infinite)\n          touching.value = false;\n      },\n    },\n    [\n      pagingEnabled,\n      isHorizontal.value,\n      infinite,\n      maxPage,\n      size,\n      snapEnabled,\n      onScrollBegin,\n      onScrollEnd,\n    ],\n  );\n\n  return (\n    <PanGestureHandler\n      {...panGestureHandlerProps}\n      enabled={enabled}\n      onGestureEvent={panGestureEventHandler}\n    >\n      <Animated.View\n        ref={containerRef}\n        testID={testID}\n        style={style}\n        onTouchStart={onTouchBegin}\n        onTouchEnd={onTouchEnd}\n      >\n        {props.children}\n      </Animated.View>\n    </PanGestureHandler>\n  );\n};\n\nexport const ScrollViewGesture = IScrollViewGesture;\n"]}
\ No newline at end of file
+{"version":3,"sources":["ScrollViewGesture.tsx"],"names":["IScrollViewGesture","props","React","useContext","CTX","vertical","pagingEnabled","snapEnabled","panGestureHandlerProps","infinite","loop","scrollAnimationDuration","withAnimation","enabled","dataLength","overscrollEnabled","maxScrollDistancePerSwipe","size","translation","testID","style","onScrollBegin","onScrollEnd","onTouchBegin","onTouchEnd","maxPage","isHorizontal","touching","scrollEndTranslation","scrollEndVelocity","containerRef","getLimit","useCallback","width","containerWidth","measure","withSpring","toValue","onFinished","defaultWithAnimation","type","config","duration","easing","Easing","easeOutQuart","isFinished","runOnJS","dealWithAnimation","endWithSpring","origin","value","velocity","finalTranslation","deceleration","Math","abs","offset","page","computed","ceil","floor","round","finalPage","withProcessTranslation","min","max","nextPage","limit","sign","withDecay","onFinish","activeDecay","resetBoundary","isGestureFinished","handleScrollEnd","panGestureEventHandler","onStart","_","ctx","validStart","panOffset","cancelAnimation","onActive","e","translationX","translationY","totalTranslation","overSwipe","dampedTranslation","panTranslation","boundary","fixed","dynamic","translationValue","velocityX","velocityY","children","ScrollViewGesture"],"mappings":"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","sourcesContent":["import type { PropsWithChildren } from 'react';\nimport React from 'react';\nimport type { StyleProp, ViewStyle } from 'react-native';\nimport type { PanGestureHandlerGestureEvent } from 'react-native-gesture-handler';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport Animated, {\n    cancelAnimation,\n    measure,\n    runOnJS,\n    useAnimatedGestureHandler,\n    useAnimatedReaction,\n    useAnimatedRef,\n    useDerivedValue,\n    useSharedValue,\n    withDecay,\n} from 'react-native-reanimated';\n\nimport { Easing } from './constants';\nimport { CTX } from './store';\nimport type { WithTimingAnimation } from './types';\nimport { dealWithAnimation } from './utils/dealWithAnimation';\n\ninterface GestureContext extends Record<string, unknown> {\n    validStart: boolean;\n    panOffset: number;\n    max: number;\n}\n\ninterface Props {\n    size: number;\n    infinite?: boolean;\n    testID?: string;\n    style?: StyleProp<ViewStyle>;\n    onScrollBegin?: () => void;\n    onScrollEnd?: () => void;\n    onTouchBegin?: () => void;\n    onTouchEnd?: () => void;\n    translation: Animated.SharedValue<number>;\n}\n\nconst IScrollViewGesture: React.FC<PropsWithChildren<Props>> = (props) => {\n    const {\n        props: {\n            vertical,\n            pagingEnabled,\n            snapEnabled,\n            panGestureHandlerProps,\n            loop: infinite,\n            scrollAnimationDuration,\n            withAnimation,\n            enabled,\n            dataLength,\n            overscrollEnabled,\n            maxScrollDistancePerSwipe,\n        },\n    } = React.useContext(CTX);\n\n    const {\n        size,\n        translation,\n        testID,\n        style = {},\n        onScrollBegin,\n        onScrollEnd,\n        onTouchBegin,\n        onTouchEnd,\n    } = props;\n\n    const maxPage = dataLength;\n    const isHorizontal = useDerivedValue(() => !vertical, [vertical]);\n    const touching = useSharedValue(false);\n    const scrollEndTranslation = useSharedValue(0);\n    const scrollEndVelocity = useSharedValue(0);\n    const containerRef = useAnimatedRef<Animated.View>();\n\n    // Get the limit of the scroll.\n    const getLimit = React.useCallback(() => {\n        'worklet';\n\n        if (!infinite && !overscrollEnabled) {\n            const { width: containerWidth = 0 } = measure(containerRef);\n\n            // If the item's total width is less than the container's width, then there is no need to scroll.\n            if (dataLength * size < containerWidth) return 0;\n\n            // Disable the \"overscroll\" effect\n            return dataLength * size - containerWidth;\n        }\n\n        return dataLength * size;\n    }, [infinite, size, dataLength, overscrollEnabled]);\n\n    const withSpring = React.useCallback(\n        (toValue: number, onFinished?: () => void) => {\n            'worklet';\n            const defaultWithAnimation: WithTimingAnimation = {\n                type: 'timing',\n                config: {\n                    duration: scrollAnimationDuration + 100,\n                    easing: Easing.easeOutQuart,\n                },\n            };\n\n            return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n                toValue,\n                (isFinished: boolean) => {\n                    'worklet';\n                    if (isFinished) onFinished && runOnJS(onFinished)();\n                }\n            );\n        },\n        [scrollAnimationDuration, withAnimation]\n    );\n\n    const endWithSpring = React.useCallback(\n        (onFinished?: () => void) => {\n            'worklet';\n            const origin = translation.value;\n            const velocity = scrollEndVelocity.value;\n            // Default to scroll in the direction of the slide (with deceleration)\n            let finalTranslation: number = withDecay({\n                velocity,\n                deceleration: 0.999,\n            });\n\n            // If the distance of the swipe exceeds the max scroll distance, keep the view at the current position\n            if (\n                typeof maxScrollDistancePerSwipe === 'number' &&\n                Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe\n            ) {\n                finalTranslation = origin;\n            } else {\n                /**\n                 * The page size is the same as the item size.\n                 * If direction is vertical, the page size is the height of the item.\n                 * If direction is horizontal, the page size is the width of the item.\n                 *\n                 * `page size` equals to `size` variable.\n                 * */\n                if (pagingEnabled) {\n                    // distance with direction\n                    const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1); // 1 or -1\n                    let page: number;\n\n                    if (Math.abs(scrollEndVelocity.value) >= size * 0.3) {\n                        const computed = offset < 0 ? Math.ceil : Math.floor;\n                        page = computed(-translation.value / size);\n                    } else {\n                        page = Math.round(-translation.value / size) - offset;\n                    }\n\n                    if (infinite) {\n                        const finalPage = page + offset;\n                        finalTranslation = withSpring(\n                            withProcessTranslation(-finalPage * size),\n                            onFinished\n                        );\n                    } else {\n                        const finalPage = Math.min(\n                            maxPage - 1,\n                            Math.max(0, page + offset)\n                        );\n                        finalTranslation = withSpring(\n                            withProcessTranslation(-finalPage * size),\n                            onFinished\n                        );\n                    }\n                }\n\n                if (!pagingEnabled && snapEnabled) {\n                    // scroll to the nearest item\n                    const nextPage =\n                        Math.round((origin + velocity * 0.4) / size) * size;\n                    finalTranslation = withSpring(\n                        withProcessTranslation(nextPage),\n                        onFinished\n                    );\n                }\n            }\n\n            translation.value = finalTranslation;\n\n            function withProcessTranslation(translation: number) {\n                if (!infinite && !overscrollEnabled) {\n                    const limit = getLimit();\n                    const sign = Math.sign(translation);\n                    return (\n                        sign *\n                        Math.max(0, Math.min(limit, Math.abs(translation)))\n                    );\n                }\n\n                return translation;\n            }\n        },\n        [\n            withSpring,\n            size,\n            maxPage,\n            infinite,\n            snapEnabled,\n            translation,\n            pagingEnabled,\n            scrollEndVelocity.value,\n            maxScrollDistancePerSwipe,\n            scrollEndTranslation.value,\n        ]\n    );\n\n    const onFinish = React.useCallback(\n        (isFinished: boolean) => {\n            'worklet';\n            if (isFinished) {\n                touching.value = false;\n                onScrollEnd && runOnJS(onScrollEnd)();\n            }\n        },\n        [onScrollEnd, touching]\n    );\n\n    const activeDecay = React.useCallback(() => {\n        'worklet';\n        touching.value = true;\n        translation.value = withDecay(\n            { velocity: scrollEndVelocity.value },\n            (isFinished) => onFinish(isFinished as boolean)\n        );\n    }, [onFinish, scrollEndVelocity.value, touching, translation]);\n\n    const resetBoundary = React.useCallback(() => {\n        'worklet';\n        if (touching.value) return;\n\n        if (translation.value > 0) {\n            if (scrollEndTranslation.value < 0) {\n                activeDecay();\n                return;\n            }\n            if (!infinite) {\n                translation.value = withSpring(0);\n                return;\n            }\n        }\n\n        if (translation.value < -((maxPage - 1) * size)) {\n            if (scrollEndTranslation.value > 0) {\n                activeDecay();\n                return;\n            }\n            if (!infinite)\n                translation.value = withSpring(-((maxPage - 1) * size));\n        }\n    }, [\n        touching.value,\n        translation,\n        maxPage,\n        size,\n        scrollEndTranslation.value,\n        infinite,\n        activeDecay,\n        withSpring,\n    ]);\n\n    useAnimatedReaction(\n        () => translation.value,\n        () => {\n            if (!pagingEnabled) resetBoundary();\n        },\n        [pagingEnabled, resetBoundary]\n    );\n\n    function withProcessTranslation(translation: number) {\n        'worklet';\n\n        if (!infinite && !overscrollEnabled) {\n            const limit = getLimit();\n            const sign = Math.sign(translation);\n            return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n        }\n\n        return translation;\n    }\n\n    const isGestureFinished = useSharedValue(true);\n    const handleScrollEnd = React.useCallback(() => {\n        isGestureFinished.value = true;\n        onScrollEnd?.();\n    }, [onScrollEnd]);\n\n    const panGestureEventHandler = useAnimatedGestureHandler<\n        PanGestureHandlerGestureEvent,\n        GestureContext\n    >(\n        {\n            onStart: (_, ctx) => {\n                touching.value = true;\n                ctx.validStart = true;\n                onScrollBegin && runOnJS(onScrollBegin)();\n\n                ctx.max = (maxPage - 1) * size;\n                if (!infinite && !overscrollEnabled) ctx.max = getLimit();\n\n                ctx.panOffset = translation.value;\n                cancelAnimation(translation);\n            },\n            onActive: (e, ctx) => {\n                if (ctx.validStart) {\n                    ctx.validStart = false;\n                    cancelAnimation(translation);\n                }\n                isGestureFinished.value = false;\n                touching.value = true;\n                let { translationX, translationY } = e;\n\n                const totalTranslation = isHorizontal.value\n                    ? translationX\n                    : translationY;\n\n                if (\n                    typeof maxScrollDistancePerSwipe === 'number' &&\n                    Math.abs(totalTranslation) > maxScrollDistancePerSwipe\n                ) {\n                    const overSwipe =\n                        Math.abs(totalTranslation) - maxScrollDistancePerSwipe;\n                    const dampedTranslation =\n                        maxScrollDistancePerSwipe + overSwipe * 0.5;\n\n                    translationX = isHorizontal.value\n                        ? dampedTranslation * Math.sign(translationX)\n                        : translationX;\n                    translationY = !isHorizontal.value\n                        ? dampedTranslation * Math.sign(translationY)\n                        : translationY;\n                }\n\n                const panTranslation = isHorizontal.value\n                    ? translationX\n                    : translationY;\n                if (!infinite) {\n                    if (translation.value > 0 || translation.value < -ctx.max) {\n                        const boundary = translation.value > 0 ? 0 : -ctx.max;\n                        const fixed =\n                            boundary -\n                            (Math.abs(ctx.panOffset - boundary) < 1\n                                ? translation.value\n                                : ctx.panOffset);\n                        const dynamic = panTranslation - fixed;\n                        translation.value = boundary + dynamic * 0.5;\n                        return;\n                    }\n                }\n\n                const translationValue = ctx.panOffset + panTranslation;\n\n                translation.value = translationValue;\n            },\n            onFinish: (e, ctx) => {\n                if (isGestureFinished.value) return;\n\n                const { velocityX, velocityY, translationX, translationY } = e;\n                scrollEndVelocity.value = isHorizontal.value\n                    ? velocityX\n                    : velocityY;\n                scrollEndTranslation.value = isHorizontal.value\n                    ? translationX\n                    : translationY;\n\n                const totalTranslation = isHorizontal.value\n                    ? translationX\n                    : translationY;\n\n                if (\n                    typeof maxScrollDistancePerSwipe === 'number' &&\n                    Math.abs(totalTranslation) > maxScrollDistancePerSwipe\n                ) {\n                    const nextPage =\n                        Math.round(\n                            (ctx.panOffset +\n                                maxScrollDistancePerSwipe *\n                                    Math.sign(totalTranslation)) /\n                                size\n                        ) * size;\n                    translation.value = withSpring(\n                        withProcessTranslation(nextPage),\n                        handleScrollEnd\n                    );\n                } else {\n                    endWithSpring(handleScrollEnd);\n                }\n\n                if (!infinite) touching.value = false;\n            },\n        },\n        [\n            pagingEnabled,\n            isHorizontal.value,\n            infinite,\n            maxPage,\n            size,\n            snapEnabled,\n            onScrollBegin,\n            handleScrollEnd,\n        ]\n    );\n\n    return (\n        <PanGestureHandler\n            {...panGestureHandlerProps}\n            enabled={enabled}\n            onGestureEvent={panGestureEventHandler}\n        >\n            <Animated.View\n                ref={containerRef}\n                testID={testID}\n                style={style}\n                onTouchStart={onTouchBegin}\n                onTouchEnd={onTouchEnd}\n            >\n                {props.children}\n            </Animated.View>\n        </PanGestureHandler>\n    );\n};\n\nexport const ScrollViewGesture = IScrollViewGesture;\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/hooks/computeNewIndexWhenDataChanges.js b/lib/commonjs/hooks/computeNewIndexWhenDataChanges.js
index 2370fa31db175c421318c4c832b0839c10d96248..84b1c9dc96e94a2b4518bb429bcaaa158715f98b 100644
--- a/lib/commonjs/hooks/computeNewIndexWhenDataChanges.js
+++ b/lib/commonjs/hooks/computeNewIndexWhenDataChanges.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.omitZero=exports.computeNewIndexWhenDataChanges=void 0;var _worklet_2585996741034_init_data={code:"function omitZero(a, b) {\n  if (a === 0) return 0;\n  return b;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/computeNewIndexWhenDataChanges.ts",sourceMap:"{\"version\":3,\"names\":[\"omitZero\",\"a\",\"b\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/computeNewIndexWhenDataChanges.ts\"],\"mappings\":\"AAAO,SAAAA,QAASA,CAASC,CAAC,EAAQC,CAAG,EAAQ;EAE3C,IAAID,CAAC,KAAK,CAAC,EACT,OAAO,CAAC;EAEV,OAAOC,CAAC;AACV\"}"};var omitZero=function(){var _e=[new global.Error(),1,-27];var _f=function _f(a,b){if(a===0)return 0;return b;};_f._closure={};_f.__initData=_worklet_2585996741034_init_data;_f.__workletHash=2585996741034;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.omitZero=omitZero;var _worklet_1218774587822_init_data={code:"function computeNewIndexWhenDataChanges(params) {\n  const {\n    omitZero\n  } = this._closure;\n  const {\n    direction: direction,\n    handlerOffset: _handlerOffset,\n    size: size,\n    previousLength: previousLength,\n    currentLength: currentLength\n  } = params;\n  let handlerOffset = _handlerOffset;\n  let positionIndex;\n  let round;\n  const isPositive = direction < 0;\n  if (isPositive) {\n    positionIndex = Math.abs(handlerOffset) / size;\n    round = parseInt(String(omitZero(previousLength, positionIndex / previousLength)));\n  } else {\n    positionIndex = (Math.abs(handlerOffset) - size) / size;\n    round = parseInt(String(omitZero(previousLength, positionIndex / previousLength))) + 1;\n  }\n  const prevOffset = omitZero(previousLength, positionIndex % previousLength);\n  const prevIndex = isPositive ? prevOffset : previousLength - prevOffset - 1;\n  const changedLength = round * (currentLength - previousLength);\n  const changedOffset = changedLength * size;\n  if (prevIndex > currentLength - 1 && currentLength < previousLength) {\n    if (isPositive) handlerOffset = (currentLength - 1) * size * direction;else handlerOffset = (currentLength - 1) * size * -1;\n  } else {\n    handlerOffset += changedOffset * direction;\n  }\n  return handlerOffset;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/computeNewIndexWhenDataChanges.ts",sourceMap:"{\"version\":3,\"names\":[\"computeNewIndexWhenDataChanges\",\"params\",\"omitZero\",\"_closure\",\"direction\",\"handlerOffset\",\"_handlerOffset\",\"size\",\"previousLength\",\"currentLength\",\"positionIndex\",\"round\",\"isPositive\",\"Math\",\"abs\",\"parseInt\",\"String\",\"prevOffset\",\"prevIndex\",\"changedLength\",\"changedOffset\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/computeNewIndexWhenDataChanges.ts\"],\"mappings\":\"AAQO,SAAAA,8BAASA,CAA+BC,MAAA,EAM9C;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAEC,MAAM;IAAEC,SAAS,EAATA,SAAS;IAAEC,aAAa,EAAEC,cAAc;IAAEC,IAAI,EAAJA,IAAI;IAAEC,cAAc,EAAdA,cAAc;IAAEC,aAAA,EAAAA;EAAc,CAAC,GAAGR,MAAM;EAEhG,IAAII,aAAa,GAAGC,cAAc;EAClC,IAAII,aAAa;EACjB,IAAIC,KAAK;EAET,MAAMC,UAAU,GAAGR,SAAS,GAAG,CAAC;EAEhC,IAAIQ,UAAU,EAAE;IACdF,aAAa,GAAIG,IAAI,CAACC,GAAG,CAACT,aAAa,CAAC,GAAIE,IAAI;IAChDI,KAAK,GAAGI,QAAQ,CAACC,MAAM,CAACd,QAAQ,CAACM,cAAc,EAAEE,aAAa,GAAGF,cAAc,CAAC,CAAC,CAAC;EACpF,CAAC,MACI;IACHE,aAAa,GAAG,CAACG,IAAI,CAACC,GAAG,CAACT,aAAa,CAAC,GAAGE,IAAI,IAAIA,IAAI;IACvDI,KAAK,GAAGI,QAAQ,CAACC,MAAM,CAACd,QAAQ,CAACM,cAAc,EAAEE,aAAa,GAAGF,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC;EACxF;EAEA,MAAMS,UAAU,GAAGf,QAAQ,CAACM,cAAc,EAAEE,aAAa,GAAGF,cAAc,CAAC;EAC3E,MAAMU,SAAS,GAAGN,UAAU,GAAGK,UAAU,GAAGT,cAAc,GAAGS,UAAU,GAAG,CAAC;EAC3E,MAAME,aAAa,GAAGR,KAAK,IAAIF,aAAa,GAAGD,cAAc,CAAC;EAC9D,MAAMY,aAAa,GAAGD,aAAa,GAAGZ,IAAI;EAC1C,IAAIW,SAAS,GAAGT,aAAa,GAAG,CAAC,IAAIA,aAAa,GAAGD,cAAc,EAAE;IACnE,IAAII,UAAU,EACZP,aAAa,GAAG,CAACI,aAAa,GAAG,CAAC,IAAIF,IAAI,GAAGH,SAAS,CAAC,KAGvDC,aAAa,GAAG,CAACI,aAAa,GAAG,CAAC,IAAIF,IAAI,GAAG,CAAC,CAAC;EACnD,CAAC,MACI;IACHF,aAAa,IAAIe,aAAa,GAAGhB,SAAS;EAC5C;EAEA,OAAOC,aAAa;AACtB\"}"};var computeNewIndexWhenDataChanges=function(){var _e=[new global.Error(),-2,-27];var _f=function _f(params){var direction=params.direction,_handlerOffset=params.handlerOffset,size=params.size,previousLength=params.previousLength,currentLength=params.currentLength;var handlerOffset=_handlerOffset;var positionIndex;var round;var isPositive=direction<0;if(isPositive){positionIndex=Math.abs(handlerOffset)/size;round=parseInt(String(omitZero(previousLength,positionIndex/previousLength)));}else{positionIndex=(Math.abs(handlerOffset)-size)/size;round=parseInt(String(omitZero(previousLength,positionIndex/previousLength)))+1;}var prevOffset=omitZero(previousLength,positionIndex%previousLength);var prevIndex=isPositive?prevOffset:previousLength-prevOffset-1;var changedLength=round*(currentLength-previousLength);var changedOffset=changedLength*size;if(prevIndex>currentLength-1&&currentLength<previousLength){if(isPositive)handlerOffset=(currentLength-1)*size*direction;else handlerOffset=(currentLength-1)*size*-1;}else{handlerOffset+=changedOffset*direction;}return handlerOffset;};_f._closure={omitZero:omitZero};_f.__initData=_worklet_1218774587822_init_data;_f.__workletHash=1218774587822;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.computeNewIndexWhenDataChanges=computeNewIndexWhenDataChanges;
+Object.defineProperty(exports,"__esModule",{value:true});exports.omitZero=exports.computeNewIndexWhenDataChanges=void 0;var _worklet_2585996741034_init_data={code:"function omitZero(a, b) {\n  if (a === 0) return 0;\n  return b;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/computeNewIndexWhenDataChanges.ts",sourceMap:"{\"version\":3,\"names\":[\"omitZero\",\"a\",\"b\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/computeNewIndexWhenDataChanges.ts\"],\"mappings\":\"AAAO,SAAAA,QAASA,CAASC,CAAC,EAAQC,CAAG,EAAQ;EAE3C,IAAID,CAAC,KAAK,CAAC,EACT,OAAO,CAAC;EAEV,OAAOC,CAAC;AACV\"}"};var omitZero=function(){var _e=[new global.Error(),1,-27];var _f=function _f(a,b){if(a===0)return 0;return b;};_f._closure={};_f.__initData=_worklet_2585996741034_init_data;_f.__workletHash=2585996741034;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.omitZero=omitZero;var _worklet_1218774587822_init_data={code:"function computeNewIndexWhenDataChanges(params) {\n  const {\n    omitZero\n  } = this._closure;\n  const {\n    direction: direction,\n    handlerOffset: _handlerOffset,\n    size: size,\n    previousLength: previousLength,\n    currentLength: currentLength\n  } = params;\n  let handlerOffset = _handlerOffset;\n  let positionIndex;\n  let round;\n  const isPositive = direction < 0;\n  if (isPositive) {\n    positionIndex = Math.abs(handlerOffset) / size;\n    round = parseInt(String(omitZero(previousLength, positionIndex / previousLength)));\n  } else {\n    positionIndex = (Math.abs(handlerOffset) - size) / size;\n    round = parseInt(String(omitZero(previousLength, positionIndex / previousLength))) + 1;\n  }\n  const prevOffset = omitZero(previousLength, positionIndex % previousLength);\n  const prevIndex = isPositive ? prevOffset : previousLength - prevOffset - 1;\n  const changedLength = round * (currentLength - previousLength);\n  const changedOffset = changedLength * size;\n  if (prevIndex > currentLength - 1 && currentLength < previousLength) {\n    if (isPositive) handlerOffset = (currentLength - 1) * size * direction;else handlerOffset = (currentLength - 1) * size * -1;\n  } else {\n    handlerOffset += changedOffset * direction;\n  }\n  return handlerOffset;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/computeNewIndexWhenDataChanges.ts",sourceMap:"{\"version\":3,\"names\":[\"computeNewIndexWhenDataChanges\",\"params\",\"omitZero\",\"_closure\",\"direction\",\"handlerOffset\",\"_handlerOffset\",\"size\",\"previousLength\",\"currentLength\",\"positionIndex\",\"round\",\"isPositive\",\"Math\",\"abs\",\"parseInt\",\"String\",\"prevOffset\",\"prevIndex\",\"changedLength\",\"changedOffset\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/computeNewIndexWhenDataChanges.ts\"],\"mappings\":\"AAQO,SAAAA,8BAASA,CAA+BC,MAAA,EAM9C;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAEC,MAAM;IAAEC,SAAS,EAATA,SAAS;IAAEC,aAAa,EAAEC,cAAc;IAAEC,IAAI,EAAJA,IAAI;IAAEC,cAAc,EAAdA,cAAc;IAAEC,aAAA,EAAAA;EAAc,CAAC,GAAGR,MAAM;EAEhG,IAAII,aAAa,GAAGC,cAAc;EAClC,IAAII,aAAa;EACjB,IAAIC,KAAK;EAET,MAAMC,UAAU,GAAGR,SAAS,GAAG,CAAC;EAEhC,IAAIQ,UAAU,EAAE;IACdF,aAAa,GAAIG,IAAI,CAACC,GAAG,CAACT,aAAa,CAAC,GAAIE,IAAI;IAChDI,KAAK,GAAGI,QAAQ,CAACC,MAAM,CAACd,QAAQ,CAACM,cAAc,EAAEE,aAAa,GAAGF,cAAc,CAAC,CAAC,CAAC;EACpF,CAAC,MACI;IACHE,aAAa,GAAG,CAACG,IAAI,CAACC,GAAG,CAACT,aAAa,CAAC,GAAGE,IAAI,IAAIA,IAAI;IACvDI,KAAK,GAAGI,QAAQ,CAACC,MAAM,CAACd,QAAQ,CAACM,cAAc,EAAEE,aAAa,GAAGF,cAAc,CAAC,CAAC,CAAC,GAAG,CAAC;EACxF;EAEA,MAAMS,UAAU,GAAGf,QAAQ,CAACM,cAAc,EAAEE,aAAa,GAAGF,cAAc,CAAC;EAC3E,MAAMU,SAAS,GAAGN,UAAU,GAAGK,UAAU,GAAGT,cAAc,GAAGS,UAAU,GAAG,CAAC;EAC3E,MAAME,aAAa,GAAGR,KAAK,IAAIF,aAAa,GAAGD,cAAc,CAAC;EAC9D,MAAMY,aAAa,GAAGD,aAAa,GAAGZ,IAAI;EAC1C,IAAIW,SAAS,GAAGT,aAAa,GAAG,CAAC,IAAIA,aAAa,GAAGD,cAAc,EAAE;IACnE,IAAII,UAAU,EACZP,aAAa,GAAG,CAACI,aAAa,GAAG,CAAC,IAAIF,IAAI,GAAGH,SAAS,CAAC,KAGvDC,aAAa,GAAG,CAACI,aAAa,GAAG,CAAC,IAAIF,IAAI,GAAG,CAAC,CAAC;EACnD,CAAC,MACI;IACHF,aAAa,IAAIe,aAAa,GAAGhB,SAAS;EAC5C;EAEA,OAAOC,aAAa;AACtB\"}"};var computeNewIndexWhenDataChanges=function(){var _e=[new global.Error(),-2,-27];var _f=function _f(params){var direction=params.direction,_handlerOffset=params.handlerOffset,size=params.size,previousLength=params.previousLength,currentLength=params.currentLength;var handlerOffset=_handlerOffset;var positionIndex;var round;var isPositive=direction<0;if(isPositive){positionIndex=Math.abs(handlerOffset)/size;round=parseInt(String(omitZero(previousLength,positionIndex/previousLength)));}else{positionIndex=(Math.abs(handlerOffset)-size)/size;round=parseInt(String(omitZero(previousLength,positionIndex/previousLength)))+1;}var prevOffset=omitZero(previousLength,positionIndex%previousLength);var prevIndex=isPositive?prevOffset:previousLength-prevOffset-1;var changedLength=round*(currentLength-previousLength);var changedOffset=changedLength*size;if(prevIndex>currentLength-1&&currentLength<previousLength){if(isPositive)handlerOffset=(currentLength-1)*size*direction;else handlerOffset=(currentLength-1)*size*-1;}else{handlerOffset+=changedOffset*direction;}return handlerOffset;};_f._closure={omitZero:omitZero};_f.__initData=_worklet_1218774587822_init_data;_f.__workletHash=1218774587822;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.computeNewIndexWhenDataChanges=computeNewIndexWhenDataChanges;
 //# sourceMappingURL=computeNewIndexWhenDataChanges.js.map
\ No newline at end of file
diff --git a/lib/commonjs/hooks/computeNewIndexWhenDataChanges.js.map b/lib/commonjs/hooks/computeNewIndexWhenDataChanges.js.map
index 38ff000a0b70c95c3be962e7577c0db756da790d..d7edecff890ac4fb338990126da2e5706616e1de 100644
--- a/lib/commonjs/hooks/computeNewIndexWhenDataChanges.js.map
+++ b/lib/commonjs/hooks/computeNewIndexWhenDataChanges.js.map
@@ -1 +1 @@
-{"version":3,"sources":["computeNewIndexWhenDataChanges.ts"],"names":["omitZero","a","b","computeNewIndexWhenDataChanges","params","direction","_handlerOffset","handlerOffset","size","previousLength","currentLength","positionIndex","round","isPositive","Math","abs","parseInt","String","prevOffset","prevIndex","changedLength","changedOffset"],"mappings":"usBAAgBA,CAAAA,Q,iEAASC,C,CAAWC,C,CAAW,CAE7C,GAAID,CAAC,GAAK,CAAV,CACE,MAAO,EAAP,CAEF,MAAOC,CAAAA,CAAP,CACD,C,0yGAEeC,CAAAA,8B,kEAA+BC,M,CAM5C,CAED,GAAQC,CAAAA,SAAR,CAA0FD,MAA1F,CAAQC,SAAR,CAAkCC,cAAlC,CAA0FF,MAA1F,CAAmBG,aAAnB,CAAkDC,IAAlD,CAA0FJ,MAA1F,CAAkDI,IAAlD,CAAwDC,cAAxD,CAA0FL,MAA1F,CAAwDK,cAAxD,CAAwEC,aAAxE,CAA0FN,MAA1F,CAAwEM,aAAxE,CAEA,GAAIH,CAAAA,aAAa,CAAGD,cAApB,CACA,GAAIK,CAAAA,aAAJ,CACA,GAAIC,CAAAA,KAAJ,CAEA,GAAMC,CAAAA,UAAU,CAAGR,SAAS,CAAG,CAA/B,CAEA,GAAIQ,UAAJ,CAAgB,CACdF,aAAa,CAAIG,IAAI,CAACC,GAAL,CAASR,aAAT,CAAD,CAA4BC,IAA5C,CACAI,KAAK,CAAGI,QAAQ,CAACC,MAAM,CAACjB,QAAQ,CAACS,cAAD,CAAiBE,aAAa,CAAGF,cAAjC,CAAT,CAAP,CAAhB,CACD,CAHD,IAIK,CACHE,aAAa,CAAG,CAACG,IAAI,CAACC,GAAL,CAASR,aAAT,EAA0BC,IAA3B,EAAmCA,IAAnD,CACAI,KAAK,CAAGI,QAAQ,CAACC,MAAM,CAACjB,QAAQ,CAACS,cAAD,CAAiBE,aAAa,CAAGF,cAAjC,CAAT,CAAP,CAAR,CAA6E,CAArF,CACD,CAED,GAAMS,CAAAA,UAAU,CAAGlB,QAAQ,CAACS,cAAD,CAAiBE,aAAa,CAAGF,cAAjC,CAA3B,CACA,GAAMU,CAAAA,SAAS,CAAGN,UAAU,CAAGK,UAAH,CAAgBT,cAAc,CAAGS,UAAjB,CAA8B,CAA1E,CACA,GAAME,CAAAA,aAAa,CAAGR,KAAK,EAAIF,aAAa,CAAGD,cAApB,CAA3B,CACA,GAAMY,CAAAA,aAAa,CAAGD,aAAa,CAAGZ,IAAtC,CACA,GAAIW,SAAS,CAAGT,aAAa,CAAG,CAA5B,EAAiCA,aAAa,CAAGD,cAArD,CAAqE,CACnE,GAAII,UAAJ,CACEN,aAAa,CAAG,CAACG,aAAa,CAAG,CAAjB,EAAsBF,IAAtB,CAA6BH,SAA7C,CADF,IAIEE,CAAAA,aAAa,CAAG,CAACG,aAAa,CAAG,CAAjB,EAAsBF,IAAtB,CAA6B,CAAC,CAA9C,CACH,CAND,IAOK,CACHD,aAAa,EAAIc,aAAa,CAAGhB,SAAjC,CACD,CAED,MAAOE,CAAAA,aAAP,CACD,C,uBAxBoBP,Q","sourcesContent":["export function omitZero(a: number, b: number) {\n  \"worklet\";\n  if (a === 0)\n    return 0;\n\n  return b;\n}\n\nexport function computeNewIndexWhenDataChanges(params: {\n  direction: number\n  handlerOffset: number\n  size: number\n  previousLength: number\n  currentLength: number\n}) {\n  \"worklet\";\n  const { direction, handlerOffset: _handlerOffset, size, previousLength, currentLength } = params;\n\n  let handlerOffset = _handlerOffset;\n  let positionIndex;\n  let round;\n\n  const isPositive = direction < 0;\n\n  if (isPositive) {\n    positionIndex = (Math.abs(handlerOffset)) / size;\n    round = parseInt(String(omitZero(previousLength, positionIndex / previousLength)));\n  }\n  else {\n    positionIndex = (Math.abs(handlerOffset) - size) / size;\n    round = parseInt(String(omitZero(previousLength, positionIndex / previousLength))) + 1;\n  }\n\n  const prevOffset = omitZero(previousLength, positionIndex % previousLength);\n  const prevIndex = isPositive ? prevOffset : previousLength - prevOffset - 1;\n  const changedLength = round * (currentLength - previousLength);\n  const changedOffset = changedLength * size;\n  if (prevIndex > currentLength - 1 && currentLength < previousLength) {\n    if (isPositive)\n      handlerOffset = (currentLength - 1) * size * direction;\n\n    else\n      handlerOffset = (currentLength - 1) * size * -1;\n  }\n  else {\n    handlerOffset += changedOffset * direction;\n  }\n\n  return handlerOffset;\n}\n\n"]}
\ No newline at end of file
+{"version":3,"sources":["computeNewIndexWhenDataChanges.ts"],"names":["omitZero","a","b","computeNewIndexWhenDataChanges","params","direction","_handlerOffset","handlerOffset","size","previousLength","currentLength","positionIndex","round","isPositive","Math","abs","parseInt","String","prevOffset","prevIndex","changedLength","changedOffset"],"mappings":"2nBAAgBA,CAAAA,Q,iEAASC,C,CAAWC,C,CAAW,CAE7C,GAAID,CAAC,GAAK,CAAV,CACE,MAAO,EAAP,CAEF,MAAOC,CAAAA,CAAP,CACD,C,8tGAEeC,CAAAA,8B,kEAA+BC,M,CAM5C,CAED,GAAQC,CAAAA,SAAR,CAA0FD,MAA1F,CAAQC,SAAR,CAAkCC,cAAlC,CAA0FF,MAA1F,CAAmBG,aAAnB,CAAkDC,IAAlD,CAA0FJ,MAA1F,CAAkDI,IAAlD,CAAwDC,cAAxD,CAA0FL,MAA1F,CAAwDK,cAAxD,CAAwEC,aAAxE,CAA0FN,MAA1F,CAAwEM,aAAxE,CAEA,GAAIH,CAAAA,aAAa,CAAGD,cAApB,CACA,GAAIK,CAAAA,aAAJ,CACA,GAAIC,CAAAA,KAAJ,CAEA,GAAMC,CAAAA,UAAU,CAAGR,SAAS,CAAG,CAA/B,CAEA,GAAIQ,UAAJ,CAAgB,CACdF,aAAa,CAAIG,IAAI,CAACC,GAAL,CAASR,aAAT,CAAD,CAA4BC,IAA5C,CACAI,KAAK,CAAGI,QAAQ,CAACC,MAAM,CAACjB,QAAQ,CAACS,cAAD,CAAiBE,aAAa,CAAGF,cAAjC,CAAT,CAAP,CAAhB,CACD,CAHD,IAIK,CACHE,aAAa,CAAG,CAACG,IAAI,CAACC,GAAL,CAASR,aAAT,EAA0BC,IAA3B,EAAmCA,IAAnD,CACAI,KAAK,CAAGI,QAAQ,CAACC,MAAM,CAACjB,QAAQ,CAACS,cAAD,CAAiBE,aAAa,CAAGF,cAAjC,CAAT,CAAP,CAAR,CAA6E,CAArF,CACD,CAED,GAAMS,CAAAA,UAAU,CAAGlB,QAAQ,CAACS,cAAD,CAAiBE,aAAa,CAAGF,cAAjC,CAA3B,CACA,GAAMU,CAAAA,SAAS,CAAGN,UAAU,CAAGK,UAAH,CAAgBT,cAAc,CAAGS,UAAjB,CAA8B,CAA1E,CACA,GAAME,CAAAA,aAAa,CAAGR,KAAK,EAAIF,aAAa,CAAGD,cAApB,CAA3B,CACA,GAAMY,CAAAA,aAAa,CAAGD,aAAa,CAAGZ,IAAtC,CACA,GAAIW,SAAS,CAAGT,aAAa,CAAG,CAA5B,EAAiCA,aAAa,CAAGD,cAArD,CAAqE,CACnE,GAAII,UAAJ,CACEN,aAAa,CAAG,CAACG,aAAa,CAAG,CAAjB,EAAsBF,IAAtB,CAA6BH,SAA7C,CADF,IAIEE,CAAAA,aAAa,CAAG,CAACG,aAAa,CAAG,CAAjB,EAAsBF,IAAtB,CAA6B,CAAC,CAA9C,CACH,CAND,IAOK,CACHD,aAAa,EAAIc,aAAa,CAAGhB,SAAjC,CACD,CAED,MAAOE,CAAAA,aAAP,CACD,C,uBAxBoBP,Q","sourcesContent":["export function omitZero(a: number, b: number) {\n  \"worklet\";\n  if (a === 0)\n    return 0;\n\n  return b;\n}\n\nexport function computeNewIndexWhenDataChanges(params: {\n  direction: number\n  handlerOffset: number\n  size: number\n  previousLength: number\n  currentLength: number\n}) {\n  \"worklet\";\n  const { direction, handlerOffset: _handlerOffset, size, previousLength, currentLength } = params;\n\n  let handlerOffset = _handlerOffset;\n  let positionIndex;\n  let round;\n\n  const isPositive = direction < 0;\n\n  if (isPositive) {\n    positionIndex = (Math.abs(handlerOffset)) / size;\n    round = parseInt(String(omitZero(previousLength, positionIndex / previousLength)));\n  }\n  else {\n    positionIndex = (Math.abs(handlerOffset) - size) / size;\n    round = parseInt(String(omitZero(previousLength, positionIndex / previousLength))) + 1;\n  }\n\n  const prevOffset = omitZero(previousLength, positionIndex % previousLength);\n  const prevIndex = isPositive ? prevOffset : previousLength - prevOffset - 1;\n  const changedLength = round * (currentLength - previousLength);\n  const changedOffset = changedLength * size;\n  if (prevIndex > currentLength - 1 && currentLength < previousLength) {\n    if (isPositive)\n      handlerOffset = (currentLength - 1) * size * direction;\n\n    else\n      handlerOffset = (currentLength - 1) * size * -1;\n  }\n  else {\n    handlerOffset += changedOffset * direction;\n  }\n\n  return handlerOffset;\n}\n\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useCarouselController.js b/lib/commonjs/hooks/useCarouselController.js
index c2ed7b3a2f97961f02680eec11bab522709fd33f..8fb2aa8bc5faaf7fbcc6ca039be491c231baac3f 100644
--- a/lib/commonjs/hooks/useCarouselController.js
+++ b/lib/commonjs/hooks/useCarouselController.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.useCarouselController=useCarouselController;var _react=_interopRequireWildcard(require("react"));var _reactNativeReanimated=require("react-native-reanimated");var _constants=require("../constants");var _computedWithAutoFillData=require("../utils/computedWithAutoFillData");var _dealWithAnimation=require("../utils/dealWithAnimation");var _handlerOffsetDirection=require("../utils/handlerOffsetDirection");var _log=require("../utils/log");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_11883385583138_init_data={code:"function anonymous() {\n  const {\n    handlerOffset,\n    round,\n    size,\n    dataInfo,\n    convertToSharedIndex,\n    loop,\n    autoFillData\n  } = this._closure;\n  const handlerOffsetValue = handlerOffset.value;\n  const toInt = round(handlerOffsetValue / size) % dataInfo.length;\n  const isPositive = handlerOffsetValue <= 0;\n  const i = isPositive ? Math.abs(toInt) : Math.abs(toInt > 0 ? dataInfo.length - toInt : 0);\n  const newSharedIndexValue = convertToSharedIndex({\n    loop: loop,\n    rawDataLength: dataInfo.originalLength,\n    autoFillData: autoFillData,\n    index: i\n  });\n  return {\n    i: i,\n    newSharedIndexValue: newSharedIndexValue\n  };\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"handlerOffset\",\"round\",\"size\",\"dataInfo\",\"convertToSharedIndex\",\"loop\",\"autoFillData\",\"_closure\",\"handlerOffsetValue\",\"value\",\"toInt\",\"length\",\"isPositive\",\"i\",\"Math\",\"abs\",\"newSharedIndexValue\",\"rawDataLength\",\"originalLength\",\"index\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AAmFI,SAAAA,SAAMA,CAAA;EAAA;IAAAC,aAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,QAAA;IAAAC,oBAAA;IAAAC,IAAA;IAAAC;EAAA,SAAAC,QAAA;EACJ,MAAMC,kBAAkB,GAAGR,aAAa,CAACS,KAAK;EAC9C,MAAMC,KAAK,GAAGT,KAAK,CAACO,kBAAkB,GAAGN,IAAI,CAAC,GAAGC,QAAQ,CAACQ,MAAM;EAChE,MAAMC,UAAU,GAAGJ,kBAAkB,IAAI,CAAC;EAC1C,MAAMK,CAAC,GAAGD,UAAU,GAChBE,IAAI,CAACC,GAAG,CAACL,KAAK,CAAC,GACfI,IAAI,CAACC,GAAG,CAACL,KAAK,GAAG,CAAC,GAAGP,QAAQ,CAACQ,MAAM,GAAGD,KAAK,GAAG,CAAC,CAAC;EAErD,MAAMM,mBAAmB,GAAGZ,oBAAoB,CAAC;IAC/CC,IAAI,EAAJA,IAAI;IACJY,aAAa,EAAEd,QAAQ,CAACe,cAAc;IACtCZ,YAAY,EAAEA,YAAa;IAC3Ba,KAAK,EAAEN;EACT,CAAC,CAAC;EAEF,OAAO;IACLA,CAAC,EAADA,CAAC;IACDG,mBAAA,EAAAA;EACF,CAAC;AACH\"}"};var _worklet_6063199752963_init_data={code:"function anonymous({\n  i: i,\n  newSharedIndexValue: newSharedIndexValue\n}) {\n  const {\n    index,\n    runOnJS,\n    setSharedIndex\n  } = this._closure;\n  index.value = i;\n  runOnJS(setSharedIndex)(newSharedIndexValue);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"i\",\"newSharedIndexValue\",\"index\",\"runOnJS\",\"setSharedIndex\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AAuGI,SAACA,UAAA;EAAEC,CAAC,EAADA,CAAC;EAAEC,mBAAA,EAAAA;AAAoB,CAAC,EAAK;EAAA;IAAAC,KAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EAC9BH,KAAK,CAACI,KAAK,GAAGN,CAAC;EACfG,OAAO,CAACC,cAAc,CAAC,CAACH,mBAAmB,CAAC;AAC9C\"}"};var _worklet_8876815392037_init_data={code:"function anonymous(toValue, onFinished) {\n  const {\n    runOnJS,\n    onScrollEnd,\n    duration,\n    Easing,\n    dealWithAnimation,\n    withAnimation\n  } = this._closure;\n  var _withAnimation;\n  const callback = function (isFinished) {\n    \"worklet\";\n\n    if (isFinished) {\n      runOnJS(onScrollEnd)();\n      onFinished && runOnJS(onFinished)();\n    }\n  };\n  const defaultWithAnimation = {\n    type: \"timing\",\n    config: {\n      duration: duration,\n      easing: Easing.easeOutQuart\n    }\n  };\n  return dealWithAnimation((_withAnimation = withAnimation) !== null && _withAnimation !== void 0 ? _withAnimation : defaultWithAnimation)(toValue, callback);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"toValue\",\"onFinished\",\"runOnJS\",\"onScrollEnd\",\"duration\",\"Easing\",\"dealWithAnimation\",\"withAnimation\",\"_closure\",\"_withAnimation\",\"callback\",\"isFinished\",\"defaultWithAnimation\",\"type\",\"config\",\"easing\",\"easeOutQuart\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AA+II,SAACA,SAAeA,CAAAC,OAAE,EAAAC,UAA4B;EAAA;IAAAC,OAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC,MAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,cAAA;EAE5C,MAAMC,QAAQ,GAAG,SAAAA,CAACC,UAAmB,EAAK;IACxC,SAAS;;IACT,IAAIA,UAAU,EAAE;MACdT,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC;MACtBF,UAAU,IAAIC,OAAO,CAACD,UAAU,CAAC,CAAC,CAAC;IACrC;EACF,CAAC;EAED,MAAMW,oBAAyC,GAAG;IAChDC,IAAI,EAAE,QAAQ;IACdC,MAAM,EAAE;MAAEV,QAAQ,EAARA,QAAQ;MAAEW,MAAM,EAAEV,MAAM,CAACW;IAAa;EAClD,CAAC;EAED,OAAOV,iBAAiB,EAAAG,cAAA,GAACF,aAAa,cAAAE,cAAA,cAAAA,cAAA,GAAIG,oBAAoB,CAAC,CAC7DZ,OAAO,EACPU,QACF,CAAC;AACH\"}"};var _worklet_1856840040824_init_data={code:"function anonymous(isFinished) {\n  const {\n    runOnJS,\n    onScrollEnd,\n    onFinished\n  } = this._closure;\n  if (isFinished) {\n    runOnJS(onScrollEnd)();\n    onFinished && runOnJS(onFinished)();\n  }\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"runOnJS\",\"onScrollEnd\",\"onFinished\",\"_closure\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AAiJuB,SAACA,UAAAC,UAAwB;EAAA;IAAAC,OAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAExC,IAAIJ,UAAU,EAAE;IACdC,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC;IACtBC,UAAU,IAAIF,OAAO,CAACE,UAAU,CAAC,CAAC,CAAC;EACrC;AACF\"}"};var _worklet_7037612364285_init_data={code:"function anonymous(opts = {}) {\n  const {\n    canSliding,\n    loop,\n    index,\n    dataInfo,\n    onScrollBegin,\n    currentFixedPage,\n    handlerOffset,\n    scrollWithTiming,\n    size\n  } = this._closure;\n  var _onScrollBegin;\n  const {\n    count = 1,\n    animated = true,\n    onFinished: onFinished\n  } = opts;\n  if (!canSliding() || !loop && index.value >= dataInfo.length - 1) return;\n  (_onScrollBegin = onScrollBegin) === null || _onScrollBegin === void 0 ? void 0 : _onScrollBegin();\n  const nextPage = currentFixedPage() + count;\n  index.value = nextPage;\n  if (animated) {\n    handlerOffset.value = scrollWithTiming(-nextPage * size, onFinished);\n  } else {\n    handlerOffset.value = -nextPage * size;\n    onFinished === null || onFinished === void 0 ? void 0 : onFinished();\n  }\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"opts\",\"canSliding\",\"loop\",\"index\",\"dataInfo\",\"onScrollBegin\",\"currentFixedPage\",\"handlerOffset\",\"scrollWithTiming\",\"size\",\"_closure\",\"_onScrollBegin\",\"count\",\"animated\",\"onFinished\",\"value\",\"length\",\"nextPage\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AAuKI,SAACA,SAAgCA,CAACC,IAAK;EAAA;IAAAC,UAAA;IAAAC,IAAA;IAAAC,KAAA;IAAAC,QAAA;IAAAC,aAAA;IAAAC,gBAAA;IAAAC,aAAA;IAAAC,gBAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,cAAA;EAErC,MAAM;IAAEC,KAAK,GAAG,CAAC;IAAEC,QAAQ,GAAG,IAAI;IAAEC,UAAA,EAAAA;EAAW,CAAC,GAAGd,IAAI;EACvD,IAAI,CAACC,UAAU,CAAC,CAAC,IAAK,CAACC,IAAI,IAAIC,KAAK,CAACY,KAAK,IAAIX,QAAQ,CAACY,MAAM,GAAG,CAAE,EAChE;EAEF,CAAAL,cAAA,GAAAN,aAAa,cAAAM,cAAA,uBAAbA,cAAA,CAAgB,CAAC;EAEjB,MAAMM,QAAQ,GAAGX,gBAAgB,CAAC,CAAC,GAAGM,KAAK;EAC3CT,KAAK,CAACY,KAAK,GAAGE,QAAQ;EAEtB,IAAIJ,QAAQ,EAAE;IACZN,aAAa,CAACQ,KAAK,GAAGP,gBAAgB,CACpC,CAACS,QAAQ,GAAGR,IAAI,EAChBK,UACF,CAAQ;EACV,CAAC,MACI;IACHP,aAAa,CAACQ,KAAK,GAAG,CAACE,QAAQ,GAAGR,IAAI;IACtCK,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAG,CAAC;EAChB;AACF\"}"};function useCarouselController(options){var size=options.size,loop=options.loop,dataLength=options.dataLength,handlerOffset=options.handlerOffset,withAnimation=options.withAnimation,_options$defaultIndex=options.defaultIndex,defaultIndex=_options$defaultIndex===void 0?0:_options$defaultIndex,duration=options.duration,autoFillData=options.autoFillData;var dataInfo=_react.default.useMemo(function(){return{length:dataLength,disable:!dataLength,originalLength:dataLength};},[dataLength]);var index=(0,_reactNativeReanimated.useSharedValue)(defaultIndex);var sharedIndex=(0,_react.useRef)(defaultIndex);var sharedPreIndex=(0,_react.useRef)(defaultIndex);var currentFixedPage=_react.default.useCallback(function(){if(loop)return-Math.round(handlerOffset.value/size);var fixed=handlerOffset.value/size%dataInfo.length;return Math.round(handlerOffset.value<=0?Math.abs(fixed):Math.abs(fixed>0?dataInfo.length-fixed:0));},[handlerOffset,dataInfo,size,loop]);function setSharedIndex(newSharedIndex){sharedIndex.current=newSharedIndex;}(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-8,-27];var _f=function _f(){var handlerOffsetValue=handlerOffset.value;var toInt=(0,_log.round)(handlerOffsetValue/size)%dataInfo.length;var isPositive=handlerOffsetValue<=0;var i=isPositive?Math.abs(toInt):Math.abs(toInt>0?dataInfo.length-toInt:0);var newSharedIndexValue=(0,_computedWithAutoFillData.convertToSharedIndex)({loop:loop,rawDataLength:dataInfo.originalLength,autoFillData:autoFillData,index:i});return{i:i,newSharedIndexValue:newSharedIndexValue};};_f._closure={handlerOffset:handlerOffset,round:_log.round,size:size,dataInfo:dataInfo,convertToSharedIndex:_computedWithAutoFillData.convertToSharedIndex,loop:loop,autoFillData:autoFillData};_f.__initData=_worklet_11883385583138_init_data;_f.__workletHash=11883385583138;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-4,-27];var _f=function _f(_ref){var i=_ref.i,newSharedIndexValue=_ref.newSharedIndexValue;index.value=i;(0,_reactNativeReanimated.runOnJS)(setSharedIndex)(newSharedIndexValue);};_f._closure={index:index,runOnJS:_reactNativeReanimated.runOnJS,setSharedIndex:setSharedIndex};_f.__initData=_worklet_6063199752963_init_data;_f.__workletHash=6063199752963;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[sharedPreIndex,sharedIndex,size,dataInfo,index,loop,autoFillData,handlerOffset]);var getCurrentIndex=_react.default.useCallback(function(){var realIndex=(0,_computedWithAutoFillData.computedRealIndexWithAutoFillData)({index:index.value,dataLength:dataInfo.originalLength,loop:loop,autoFillData:autoFillData});return realIndex;},[index,autoFillData,dataInfo,loop]);var canSliding=_react.default.useCallback(function(){return!dataInfo.disable;},[dataInfo]);var onScrollEnd=_react.default.useCallback(function(){options.onScrollEnd==null?void 0:options.onScrollEnd();},[options]);var onScrollBegin=_react.default.useCallback(function(){options.onScrollBegin==null?void 0:options.onScrollBegin();},[options]);var scrollWithTiming=_react.default.useCallback(function(){var _e=[new global.Error(),-7,-27];var _f=function _f(toValue,onFinished){var callback=function(){var _e=[new global.Error(),-4,-27];var _f=function _f(isFinished){if(isFinished){(0,_reactNativeReanimated.runOnJS)(onScrollEnd)();onFinished&&(0,_reactNativeReanimated.runOnJS)(onFinished)();}};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,onScrollEnd:onScrollEnd,onFinished:onFinished};_f.__initData=_worklet_1856840040824_init_data;_f.__workletHash=1856840040824;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();var defaultWithAnimation={type:"timing",config:{duration:duration,easing:_constants.Easing.easeOutQuart}};return(0,_dealWithAnimation.dealWithAnimation)(withAnimation!=null?withAnimation:defaultWithAnimation)(toValue,callback);};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,onScrollEnd:onScrollEnd,duration:duration,Easing:_constants.Easing,dealWithAnimation:_dealWithAnimation.dealWithAnimation,withAnimation:withAnimation};_f.__initData=_worklet_8876815392037_init_data;_f.__workletHash=8876815392037;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[duration,withAnimation,onScrollEnd]);var next=_react.default.useCallback(function(){var _e=[new global.Error(),-10,-27];var _f=function _f(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _opts$count=opts.count,count=_opts$count===void 0?1:_opts$count,_opts$animated=opts.animated,animated=_opts$animated===void 0?true:_opts$animated,onFinished=opts.onFinished;if(!canSliding()||!loop&&index.value>=dataInfo.length-1)return;onScrollBegin==null?void 0:onScrollBegin();var nextPage=currentFixedPage()+count;index.value=nextPage;if(animated){handlerOffset.value=scrollWithTiming(-nextPage*size,onFinished);}else{handlerOffset.value=-nextPage*size;onFinished==null?void 0:onFinished();}};_f._closure={canSliding:canSliding,loop:loop,index:index,dataInfo:dataInfo,onScrollBegin:onScrollBegin,currentFixedPage:currentFixedPage,handlerOffset:handlerOffset,scrollWithTiming:scrollWithTiming,size:size};_f.__initData=_worklet_7037612364285_init_data;_f.__workletHash=7037612364285;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[canSliding,loop,index,dataInfo,onScrollBegin,handlerOffset,size,scrollWithTiming,currentFixedPage]);var prev=_react.default.useCallback(function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _opts$count2=opts.count,count=_opts$count2===void 0?1:_opts$count2,_opts$animated2=opts.animated,animated=_opts$animated2===void 0?true:_opts$animated2,onFinished=opts.onFinished;if(!canSliding()||!loop&&index.value<=0)return;onScrollBegin==null?void 0:onScrollBegin();var prevPage=currentFixedPage()-count;index.value=prevPage;if(animated){handlerOffset.value=scrollWithTiming(-prevPage*size,onFinished);}else{handlerOffset.value=-prevPage*size;onFinished==null?void 0:onFinished();}},[canSliding,loop,index,onScrollBegin,handlerOffset,size,scrollWithTiming,currentFixedPage]);var to=_react.default.useCallback(function(opts){var i=opts.i,_opts$animated3=opts.animated,animated=_opts$animated3===void 0?false:_opts$animated3,onFinished=opts.onFinished;if(i===index.value)return;if(!canSliding())return;onScrollBegin==null?void 0:onScrollBegin();var direction=(0,_handlerOffsetDirection.handlerOffsetDirection)(handlerOffset);var offset=i*size*direction;var totalSize=dataInfo.length*size;var isCloseToNextLoop=false;if(loop){isCloseToNextLoop=Math.abs(handlerOffset.value%totalSize)/totalSize>=0.5;}var finalOffset=(Math.floor(Math.abs(handlerOffset.value/totalSize))+(isCloseToNextLoop?1:0))*totalSize*direction+offset;if(animated){index.value=i;handlerOffset.value=scrollWithTiming(finalOffset,onFinished);}else{handlerOffset.value=finalOffset;index.value=i;onFinished==null?void 0:onFinished();}},[index,canSliding,onScrollBegin,handlerOffset,size,dataInfo.length,loop,scrollWithTiming]);var scrollTo=_react.default.useCallback(function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=opts.index,count=opts.count,_opts$animated4=opts.animated,animated=_opts$animated4===void 0?false:_opts$animated4,onFinished=opts.onFinished;if(typeof i==="number"&&i>-1){to({i:i,animated:animated,onFinished:onFinished});return;}if(!count)return;var n=Math.round(count);if(n<0)prev({count:Math.abs(n),animated:animated,onFinished:onFinished});else next({count:n,animated:animated,onFinished:onFinished});},[prev,next,to]);return{next:next,prev:prev,scrollTo:scrollTo,getCurrentIndex:getCurrentIndex,getSharedIndex:function getSharedIndex(){return sharedIndex.current;}};}
+Object.defineProperty(exports,"__esModule",{value:true});exports.useCarouselController=useCarouselController;var _react=_interopRequireWildcard(require("react"));var _reactNativeReanimated=require("react-native-reanimated");var _constants=require("../constants");var _computedWithAutoFillData=require("../utils/computedWithAutoFillData");var _dealWithAnimation=require("../utils/dealWithAnimation");var _handlerOffsetDirection=require("../utils/handlerOffsetDirection");var _log=require("../utils/log");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_11883385583138_init_data={code:"function anonymous() {\n  const {\n    handlerOffset,\n    round,\n    size,\n    dataInfo,\n    convertToSharedIndex,\n    loop,\n    autoFillData\n  } = this._closure;\n  const handlerOffsetValue = handlerOffset.value;\n  const toInt = round(handlerOffsetValue / size) % dataInfo.length;\n  const isPositive = handlerOffsetValue <= 0;\n  const i = isPositive ? Math.abs(toInt) : Math.abs(toInt > 0 ? dataInfo.length - toInt : 0);\n  const newSharedIndexValue = convertToSharedIndex({\n    loop: loop,\n    rawDataLength: dataInfo.originalLength,\n    autoFillData: autoFillData,\n    index: i\n  });\n  return {\n    i: i,\n    newSharedIndexValue: newSharedIndexValue\n  };\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"handlerOffset\",\"round\",\"size\",\"dataInfo\",\"convertToSharedIndex\",\"loop\",\"autoFillData\",\"_closure\",\"handlerOffsetValue\",\"value\",\"toInt\",\"length\",\"isPositive\",\"i\",\"Math\",\"abs\",\"newSharedIndexValue\",\"rawDataLength\",\"originalLength\",\"index\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AAmFI,SAAAA,SAAMA,CAAA;EAAA;IAAAC,aAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,QAAA;IAAAC,oBAAA;IAAAC,IAAA;IAAAC;EAAA,SAAAC,QAAA;EACJ,MAAMC,kBAAkB,GAAGR,aAAa,CAACS,KAAK;EAC9C,MAAMC,KAAK,GAAGT,KAAK,CAACO,kBAAkB,GAAGN,IAAI,CAAC,GAAGC,QAAQ,CAACQ,MAAM;EAChE,MAAMC,UAAU,GAAGJ,kBAAkB,IAAI,CAAC;EAC1C,MAAMK,CAAC,GAAGD,UAAU,GAChBE,IAAI,CAACC,GAAG,CAACL,KAAK,CAAC,GACfI,IAAI,CAACC,GAAG,CAACL,KAAK,GAAG,CAAC,GAAGP,QAAQ,CAACQ,MAAM,GAAGD,KAAK,GAAG,CAAC,CAAC;EAErD,MAAMM,mBAAmB,GAAGZ,oBAAoB,CAAC;IAC/CC,IAAI,EAAJA,IAAI;IACJY,aAAa,EAAEd,QAAQ,CAACe,cAAc;IACtCZ,YAAY,EAAEA,YAAa;IAC3Ba,KAAK,EAAEN;EACT,CAAC,CAAC;EAEF,OAAO;IACLA,CAAC,EAADA,CAAC;IACDG,mBAAA,EAAAA;EACF,CAAC;AACH\"}"};var _worklet_6063199752963_init_data={code:"function anonymous({\n  i: i,\n  newSharedIndexValue: newSharedIndexValue\n}) {\n  const {\n    index,\n    runOnJS,\n    setSharedIndex\n  } = this._closure;\n  index.value = i;\n  runOnJS(setSharedIndex)(newSharedIndexValue);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"i\",\"newSharedIndexValue\",\"index\",\"runOnJS\",\"setSharedIndex\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AAuGI,SAACA,UAAA;EAAEC,CAAC,EAADA,CAAC;EAAEC,mBAAA,EAAAA;AAAoB,CAAC,EAAK;EAAA;IAAAC,KAAA;IAAAC,OAAA;IAAAC;EAAA,SAAAC,QAAA;EAC9BH,KAAK,CAACI,KAAK,GAAGN,CAAC;EACfG,OAAO,CAACC,cAAc,CAAC,CAACH,mBAAmB,CAAC;AAC9C\"}"};var _worklet_8876815392037_init_data={code:"function anonymous(toValue, onFinished) {\n  const {\n    runOnJS,\n    onScrollEnd,\n    duration,\n    Easing,\n    dealWithAnimation,\n    withAnimation\n  } = this._closure;\n  var _withAnimation;\n  const callback = function (isFinished) {\n    \"worklet\";\n\n    if (isFinished) {\n      runOnJS(onScrollEnd)();\n      onFinished && runOnJS(onFinished)();\n    }\n  };\n  const defaultWithAnimation = {\n    type: \"timing\",\n    config: {\n      duration: duration,\n      easing: Easing.easeOutQuart\n    }\n  };\n  return dealWithAnimation((_withAnimation = withAnimation) !== null && _withAnimation !== void 0 ? _withAnimation : defaultWithAnimation)(toValue, callback);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"toValue\",\"onFinished\",\"runOnJS\",\"onScrollEnd\",\"duration\",\"Easing\",\"dealWithAnimation\",\"withAnimation\",\"_closure\",\"_withAnimation\",\"callback\",\"isFinished\",\"defaultWithAnimation\",\"type\",\"config\",\"easing\",\"easeOutQuart\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AA+II,SAACA,SAAeA,CAAAC,OAAE,EAAAC,UAA4B;EAAA;IAAAC,OAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC,MAAA;IAAAC,iBAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,cAAA;EAE5C,MAAMC,QAAQ,GAAG,SAAAA,CAACC,UAAmB,EAAK;IACxC,SAAS;;IACT,IAAIA,UAAU,EAAE;MACdT,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC;MACtBF,UAAU,IAAIC,OAAO,CAACD,UAAU,CAAC,CAAC,CAAC;IACrC;EACF,CAAC;EAED,MAAMW,oBAAyC,GAAG;IAChDC,IAAI,EAAE,QAAQ;IACdC,MAAM,EAAE;MAAEV,QAAQ,EAARA,QAAQ;MAAEW,MAAM,EAAEV,MAAM,CAACW;IAAa;EAClD,CAAC;EAED,OAAOV,iBAAiB,EAAAG,cAAA,GAACF,aAAa,cAAAE,cAAA,cAAAA,cAAA,GAAIG,oBAAoB,CAAC,CAC7DZ,OAAO,EACPU,QACF,CAAC;AACH\"}"};var _worklet_1856840040824_init_data={code:"function anonymous(isFinished) {\n  const {\n    runOnJS,\n    onScrollEnd,\n    onFinished\n  } = this._closure;\n  if (isFinished) {\n    runOnJS(onScrollEnd)();\n    onFinished && runOnJS(onFinished)();\n  }\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"runOnJS\",\"onScrollEnd\",\"onFinished\",\"_closure\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AAiJuB,SAACA,UAAAC,UAAwB;EAAA;IAAAC,OAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAExC,IAAIJ,UAAU,EAAE;IACdC,OAAO,CAACC,WAAW,CAAC,CAAC,CAAC;IACtBC,UAAU,IAAIF,OAAO,CAACE,UAAU,CAAC,CAAC,CAAC;EACrC;AACF\"}"};var _worklet_7037612364285_init_data={code:"function anonymous(opts = {}) {\n  const {\n    canSliding,\n    loop,\n    index,\n    dataInfo,\n    onScrollBegin,\n    currentFixedPage,\n    handlerOffset,\n    scrollWithTiming,\n    size\n  } = this._closure;\n  var _onScrollBegin;\n  const {\n    count = 1,\n    animated = true,\n    onFinished: onFinished\n  } = opts;\n  if (!canSliding() || !loop && index.value >= dataInfo.length - 1) return;\n  (_onScrollBegin = onScrollBegin) === null || _onScrollBegin === void 0 ? void 0 : _onScrollBegin();\n  const nextPage = currentFixedPage() + count;\n  index.value = nextPage;\n  if (animated) {\n    handlerOffset.value = scrollWithTiming(-nextPage * size, onFinished);\n  } else {\n    handlerOffset.value = -nextPage * size;\n    onFinished === null || onFinished === void 0 ? void 0 : onFinished();\n  }\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"opts\",\"canSliding\",\"loop\",\"index\",\"dataInfo\",\"onScrollBegin\",\"currentFixedPage\",\"handlerOffset\",\"scrollWithTiming\",\"size\",\"_closure\",\"_onScrollBegin\",\"count\",\"animated\",\"onFinished\",\"value\",\"length\",\"nextPage\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCarouselController.tsx\"],\"mappings\":\"AAuKI,SAACA,SAAgCA,CAACC,IAAK;EAAA;IAAAC,UAAA;IAAAC,IAAA;IAAAC,KAAA;IAAAC,QAAA;IAAAC,aAAA;IAAAC,gBAAA;IAAAC,aAAA;IAAAC,gBAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,cAAA;EAErC,MAAM;IAAEC,KAAK,GAAG,CAAC;IAAEC,QAAQ,GAAG,IAAI;IAAEC,UAAA,EAAAA;EAAW,CAAC,GAAGd,IAAI;EACvD,IAAI,CAACC,UAAU,CAAC,CAAC,IAAK,CAACC,IAAI,IAAIC,KAAK,CAACY,KAAK,IAAIX,QAAQ,CAACY,MAAM,GAAG,CAAE,EAChE;EAEF,CAAAL,cAAA,GAAAN,aAAa,cAAAM,cAAA,uBAAbA,cAAA,CAAgB,CAAC;EAEjB,MAAMM,QAAQ,GAAGX,gBAAgB,CAAC,CAAC,GAAGM,KAAK;EAC3CT,KAAK,CAACY,KAAK,GAAGE,QAAQ;EAEtB,IAAIJ,QAAQ,EAAE;IACZN,aAAa,CAACQ,KAAK,GAAGP,gBAAgB,CACpC,CAACS,QAAQ,GAAGR,IAAI,EAChBK,UACF,CAAQ;EACV,CAAC,MACI;IACHP,aAAa,CAACQ,KAAK,GAAG,CAACE,QAAQ,GAAGR,IAAI;IACtCK,UAAU,aAAVA,UAAU,uBAAVA,UAAU,CAAG,CAAC;EAChB;AACF\"}"};function useCarouselController(options){var size=options.size,loop=options.loop,dataLength=options.dataLength,handlerOffset=options.handlerOffset,withAnimation=options.withAnimation,_options$defaultIndex=options.defaultIndex,defaultIndex=_options$defaultIndex===void 0?0:_options$defaultIndex,duration=options.duration,autoFillData=options.autoFillData;var dataInfo=_react.default.useMemo(function(){return{length:dataLength,disable:!dataLength,originalLength:dataLength};},[dataLength]);var index=(0,_reactNativeReanimated.useSharedValue)(defaultIndex);var sharedIndex=(0,_react.useRef)(defaultIndex);var sharedPreIndex=(0,_react.useRef)(defaultIndex);var currentFixedPage=_react.default.useCallback(function(){if(loop)return-Math.round(handlerOffset.value/size);var fixed=handlerOffset.value/size%dataInfo.length;return Math.round(handlerOffset.value<=0?Math.abs(fixed):Math.abs(fixed>0?dataInfo.length-fixed:0));},[handlerOffset,dataInfo,size,loop]);function setSharedIndex(newSharedIndex){sharedIndex.current=newSharedIndex;}(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-8,-27];var _f=function _f(){var handlerOffsetValue=handlerOffset.value;var toInt=(0,_log.round)(handlerOffsetValue/size)%dataInfo.length;var isPositive=handlerOffsetValue<=0;var i=isPositive?Math.abs(toInt):Math.abs(toInt>0?dataInfo.length-toInt:0);var newSharedIndexValue=(0,_computedWithAutoFillData.convertToSharedIndex)({loop:loop,rawDataLength:dataInfo.originalLength,autoFillData:autoFillData,index:i});return{i:i,newSharedIndexValue:newSharedIndexValue};};_f._closure={handlerOffset:handlerOffset,round:_log.round,size:size,dataInfo:dataInfo,convertToSharedIndex:_computedWithAutoFillData.convertToSharedIndex,loop:loop,autoFillData:autoFillData};_f.__initData=_worklet_11883385583138_init_data;_f.__workletHash=11883385583138;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-4,-27];var _f=function _f(_ref){var i=_ref.i,newSharedIndexValue=_ref.newSharedIndexValue;index.value=i;(0,_reactNativeReanimated.runOnJS)(setSharedIndex)(newSharedIndexValue);};_f._closure={index:index,runOnJS:_reactNativeReanimated.runOnJS,setSharedIndex:setSharedIndex};_f.__initData=_worklet_6063199752963_init_data;_f.__workletHash=6063199752963;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[sharedPreIndex,sharedIndex,size,dataInfo,index,loop,autoFillData,handlerOffset]);var getCurrentIndex=_react.default.useCallback(function(){var realIndex=(0,_computedWithAutoFillData.computedRealIndexWithAutoFillData)({index:index.value,dataLength:dataInfo.originalLength,loop:loop,autoFillData:autoFillData});return realIndex;},[index,autoFillData,dataInfo,loop]);var canSliding=_react.default.useCallback(function(){return!dataInfo.disable;},[dataInfo]);var onScrollEnd=_react.default.useCallback(function(){options.onScrollEnd==null?void 0:options.onScrollEnd();},[options]);var onScrollBegin=_react.default.useCallback(function(){options.onScrollBegin==null?void 0:options.onScrollBegin();},[options]);var scrollWithTiming=_react.default.useCallback(function(){var _e=[new global.Error(),-7,-27];var _f=function _f(toValue,onFinished){var callback=function(){var _e=[new global.Error(),-4,-27];var _f=function _f(isFinished){if(isFinished){(0,_reactNativeReanimated.runOnJS)(onScrollEnd)();onFinished&&(0,_reactNativeReanimated.runOnJS)(onFinished)();}};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,onScrollEnd:onScrollEnd,onFinished:onFinished};_f.__initData=_worklet_1856840040824_init_data;_f.__workletHash=1856840040824;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();var defaultWithAnimation={type:"timing",config:{duration:duration,easing:_constants.Easing.easeOutQuart}};return(0,_dealWithAnimation.dealWithAnimation)(withAnimation!=null?withAnimation:defaultWithAnimation)(toValue,callback);};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,onScrollEnd:onScrollEnd,duration:duration,Easing:_constants.Easing,dealWithAnimation:_dealWithAnimation.dealWithAnimation,withAnimation:withAnimation};_f.__initData=_worklet_8876815392037_init_data;_f.__workletHash=8876815392037;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[duration,withAnimation,onScrollEnd]);var next=_react.default.useCallback(function(){var _e=[new global.Error(),-10,-27];var _f=function _f(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _opts$count=opts.count,count=_opts$count===void 0?1:_opts$count,_opts$animated=opts.animated,animated=_opts$animated===void 0?true:_opts$animated,onFinished=opts.onFinished;if(!canSliding()||!loop&&index.value>=dataInfo.length-1)return;onScrollBegin==null?void 0:onScrollBegin();var nextPage=currentFixedPage()+count;index.value=nextPage;if(animated){handlerOffset.value=scrollWithTiming(-nextPage*size,onFinished);}else{handlerOffset.value=-nextPage*size;onFinished==null?void 0:onFinished();}};_f._closure={canSliding:canSliding,loop:loop,index:index,dataInfo:dataInfo,onScrollBegin:onScrollBegin,currentFixedPage:currentFixedPage,handlerOffset:handlerOffset,scrollWithTiming:scrollWithTiming,size:size};_f.__initData=_worklet_7037612364285_init_data;_f.__workletHash=7037612364285;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[canSliding,loop,index,dataInfo,onScrollBegin,handlerOffset,size,scrollWithTiming,currentFixedPage]);var prev=_react.default.useCallback(function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _opts$count2=opts.count,count=_opts$count2===void 0?1:_opts$count2,_opts$animated2=opts.animated,animated=_opts$animated2===void 0?true:_opts$animated2,onFinished=opts.onFinished;if(!canSliding()||!loop&&index.value<=0)return;onScrollBegin==null?void 0:onScrollBegin();var prevPage=currentFixedPage()-count;index.value=prevPage;if(animated){handlerOffset.value=scrollWithTiming(-prevPage*size,onFinished);}else{handlerOffset.value=-prevPage*size;onFinished==null?void 0:onFinished();}},[canSliding,loop,index,onScrollBegin,handlerOffset,size,scrollWithTiming,currentFixedPage]);var to=_react.default.useCallback(function(opts){var i=opts.i,_opts$animated3=opts.animated,animated=_opts$animated3===void 0?false:_opts$animated3,onFinished=opts.onFinished;if(i===index.value)return;if(!canSliding())return;onScrollBegin==null?void 0:onScrollBegin();var direction=(0,_handlerOffsetDirection.handlerOffsetDirection)(handlerOffset);var offset=i*size*direction;var totalSize=dataInfo.length*size;var isCloseToNextLoop=false;if(loop){isCloseToNextLoop=Math.abs(handlerOffset.value%totalSize)/totalSize>=0.5;}var finalOffset=(Math.floor(Math.abs(handlerOffset.value/totalSize))+(isCloseToNextLoop?1:0))*totalSize*direction+offset;if(animated){index.value=i;handlerOffset.value=scrollWithTiming(finalOffset,onFinished);}else{handlerOffset.value=finalOffset;index.value=i;onFinished==null?void 0:onFinished();}},[index,canSliding,onScrollBegin,handlerOffset,size,dataInfo.length,loop,scrollWithTiming]);var scrollTo=_react.default.useCallback(function(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=opts.index,count=opts.count,_opts$animated4=opts.animated,animated=_opts$animated4===void 0?false:_opts$animated4,onFinished=opts.onFinished;if(typeof i==="number"&&i>-1){to({i:i,animated:animated,onFinished:onFinished});return;}if(!count)return;var n=Math.round(count);if(n<0)prev({count:Math.abs(n),animated:animated,onFinished:onFinished});else next({count:n,animated:animated,onFinished:onFinished});},[prev,next,to]);return{next:next,prev:prev,scrollTo:scrollTo,getCurrentIndex:getCurrentIndex,getSharedIndex:function getSharedIndex(){return sharedIndex.current;}};}
 //# sourceMappingURL=useCarouselController.js.map
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useCarouselController.js.map b/lib/commonjs/hooks/useCarouselController.js.map
index f8e14e6502e6eda960ee323563238887e9f82d37..fc208e356ee9f61509d9697821a660cd24b39dab 100644
--- a/lib/commonjs/hooks/useCarouselController.js.map
+++ b/lib/commonjs/hooks/useCarouselController.js.map
@@ -1 +1 @@
-{"version":3,"sources":["useCarouselController.tsx"],"names":["useCarouselController","options","size","loop","dataLength","handlerOffset","withAnimation","defaultIndex","duration","autoFillData","dataInfo","React","useMemo","length","disable","originalLength","index","sharedIndex","sharedPreIndex","currentFixedPage","useCallback","Math","round","value","fixed","abs","setSharedIndex","newSharedIndex","current","handlerOffsetValue","toInt","isPositive","i","newSharedIndexValue","rawDataLength","convertToSharedIndex","runOnJS","getCurrentIndex","realIndex","canSliding","onScrollEnd","onScrollBegin","scrollWithTiming","toValue","onFinished","callback","isFinished","defaultWithAnimation","type","config","easing","Easing","easeOutQuart","dealWithAnimation","next","opts","count","animated","nextPage","prev","prevPage","to","direction","offset","totalSize","isCloseToNextLoop","finalOffset","floor","scrollTo","n","getSharedIndex"],"mappings":"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","sourcesContent":["import React, { useRef } from \"react\";\nimport type Animated from \"react-native-reanimated\";\nimport {\n  runOnJS,\n  useAnimatedReaction,\n  useSharedValue,\n} from \"react-native-reanimated\";\n\nimport { Easing } from \"../constants\";\nimport type {\n  TCarouselActionOptions,\n  TCarouselProps,\n  WithTimingAnimation,\n} from \"../types\";\nimport { computedRealIndexWithAutoFillData, convertToSharedIndex } from \"../utils/computedWithAutoFillData\";\nimport { dealWithAnimation } from \"../utils/dealWithAnimation\";\nimport { handlerOffsetDirection } from \"../utils/handlerOffsetDirection\";\nimport { round } from \"../utils/log\";\n\ninterface IOpts {\n  loop: boolean\n  size: number\n  dataLength: number\n  autoFillData: TCarouselProps[\"autoFillData\"]\n  handlerOffset: Animated.SharedValue<number>\n  withAnimation?: TCarouselProps[\"withAnimation\"]\n  duration?: number\n  defaultIndex?: number\n  onScrollBegin?: () => void\n  onScrollEnd?: () => void\n}\n\nexport interface ICarouselController {\n  getSharedIndex: () => number\n  prev: (opts?: TCarouselActionOptions) => void\n  next: (opts?: TCarouselActionOptions) => void\n  getCurrentIndex: () => number\n  scrollTo: (opts?: TCarouselActionOptions) => void\n}\n\nexport function useCarouselController(options: IOpts): ICarouselController {\n  const {\n    size,\n    loop,\n    dataLength,\n    handlerOffset,\n    withAnimation,\n    defaultIndex = 0,\n    duration,\n    autoFillData,\n  } = options;\n\n  const dataInfo = React.useMemo(\n    () => ({\n      length: dataLength,\n      disable: !dataLength,\n      originalLength: dataLength,\n    }),\n    [dataLength],\n  );\n\n  const index = useSharedValue<number>(defaultIndex);\n  // The Index displayed to the user\n  const sharedIndex = useRef<number>(defaultIndex);\n  const sharedPreIndex = useRef<number>(defaultIndex);\n\n  const currentFixedPage = React.useCallback(() => {\n    if (loop)\n      return -Math.round(handlerOffset.value / size);\n\n    const fixed = (handlerOffset.value / size) % dataInfo.length;\n    return Math.round(\n      handlerOffset.value <= 0\n        ? Math.abs(fixed)\n        : Math.abs(fixed > 0 ? dataInfo.length - fixed : 0),\n    );\n  }, [handlerOffset, dataInfo, size, loop]);\n\n  function setSharedIndex(newSharedIndex: number) {\n    sharedIndex.current = newSharedIndex;\n  }\n\n  useAnimatedReaction(\n    () => {\n      const handlerOffsetValue = handlerOffset.value;\n      const toInt = round(handlerOffsetValue / size) % dataInfo.length;\n      const isPositive = handlerOffsetValue <= 0;\n      const i = isPositive\n        ? Math.abs(toInt)\n        : Math.abs(toInt > 0 ? dataInfo.length - toInt : 0);\n\n      const newSharedIndexValue = convertToSharedIndex({\n        loop,\n        rawDataLength: dataInfo.originalLength,\n        autoFillData: autoFillData!,\n        index: i,\n      });\n\n      return {\n        i,\n        newSharedIndexValue,\n      };\n    },\n    ({ i, newSharedIndexValue }) => {\n      index.value = i;\n      runOnJS(setSharedIndex)(newSharedIndexValue);\n    },\n    [\n      sharedPreIndex,\n      sharedIndex,\n      size,\n      dataInfo,\n      index,\n      loop,\n      autoFillData,\n      handlerOffset,\n    ],\n  );\n\n  const getCurrentIndex = React.useCallback(() => {\n    const realIndex = computedRealIndexWithAutoFillData({\n      index: index.value,\n      dataLength: dataInfo.originalLength,\n      loop,\n      autoFillData: autoFillData!,\n    });\n\n    return realIndex;\n  }, [index, autoFillData, dataInfo, loop]);\n\n  const canSliding = React.useCallback(() => {\n    return !dataInfo.disable;\n  }, [dataInfo]);\n\n  const onScrollEnd = React.useCallback(() => {\n    options.onScrollEnd?.();\n  }, [options]);\n\n  const onScrollBegin = React.useCallback(() => {\n    options.onScrollBegin?.();\n  }, [options]);\n\n  const scrollWithTiming = React.useCallback(\n    (toValue: number, onFinished?: () => void) => {\n      \"worklet\";\n      const callback = (isFinished: boolean) => {\n        \"worklet\";\n        if (isFinished) {\n          runOnJS(onScrollEnd)();\n          onFinished && runOnJS(onFinished)();\n        }\n      };\n\n      const defaultWithAnimation: WithTimingAnimation = {\n        type: \"timing\",\n        config: { duration, easing: Easing.easeOutQuart },\n      };\n\n      return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n        toValue,\n        callback,\n      );\n    },\n    [duration, withAnimation, onScrollEnd],\n  );\n\n  const next = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      \"worklet\";\n      const { count = 1, animated = true, onFinished } = opts;\n      if (!canSliding() || (!loop && index.value >= dataInfo.length - 1))\n        return;\n\n      onScrollBegin?.();\n\n      const nextPage = currentFixedPage() + count;\n      index.value = nextPage;\n\n      if (animated) {\n        handlerOffset.value = scrollWithTiming(\n          -nextPage * size,\n          onFinished,\n        ) as any;\n      }\n      else {\n        handlerOffset.value = -nextPage * size;\n        onFinished?.();\n      }\n    },\n    [\n      canSliding,\n      loop,\n      index,\n      dataInfo,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      scrollWithTiming,\n      currentFixedPage,\n    ],\n  );\n\n  const prev = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      const { count = 1, animated = true, onFinished } = opts;\n      if (!canSliding() || (!loop && index.value <= 0)) return;\n\n      onScrollBegin?.();\n\n      const prevPage = currentFixedPage() - count;\n      index.value = prevPage;\n\n      if (animated) {\n        handlerOffset.value = scrollWithTiming(\n          -prevPage * size,\n          onFinished,\n        );\n      }\n      else {\n        handlerOffset.value = -prevPage * size;\n        onFinished?.();\n      }\n    },\n    [\n      canSliding,\n      loop,\n      index,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      scrollWithTiming,\n      currentFixedPage,\n    ],\n  );\n\n  const to = React.useCallback(\n    (opts: { i: number; animated: boolean; onFinished?: () => void }) => {\n      const { i, animated = false, onFinished } = opts;\n      if (i === index.value) return;\n      if (!canSliding()) return;\n\n      onScrollBegin?.();\n      // direction -> 1 | -1\n      const direction = handlerOffsetDirection(handlerOffset);\n\n      // target offset\n      const offset = i * size * direction;\n      // page width size * page count\n      const totalSize = dataInfo.length * size;\n\n      let isCloseToNextLoop = false;\n\n      if (loop) {\n        isCloseToNextLoop\n                    = Math.abs(handlerOffset.value % totalSize) / totalSize\n                    >= 0.5;\n      }\n\n      const finalOffset\n                = (Math.floor(Math.abs(handlerOffset.value / totalSize))\n                    + (isCloseToNextLoop ? 1 : 0))\n                    * totalSize\n                    * direction\n                + offset;\n\n      if (animated) {\n        index.value = i;\n        handlerOffset.value = scrollWithTiming(finalOffset, onFinished);\n      }\n      else {\n        handlerOffset.value = finalOffset;\n        index.value = i;\n        onFinished?.();\n      }\n    },\n    [\n      index,\n      canSliding,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      dataInfo.length,\n      loop,\n      scrollWithTiming,\n    ],\n  );\n\n  const scrollTo = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      const { index: i, count, animated = false, onFinished } = opts;\n      if (typeof i === \"number\" && i > -1) {\n        to({ i, animated, onFinished });\n        return;\n      }\n\n      if (!count)\n        return;\n\n      const n = Math.round(count);\n\n      if (n < 0)\n        prev({ count: Math.abs(n), animated, onFinished });\n\n      else\n        next({ count: n, animated, onFinished });\n    },\n    [prev, next, to],\n  );\n\n  return {\n    next,\n    prev,\n    scrollTo,\n    getCurrentIndex,\n    getSharedIndex: () => sharedIndex.current,\n  };\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["useCarouselController.tsx"],"names":["useCarouselController","options","size","loop","dataLength","handlerOffset","withAnimation","defaultIndex","duration","autoFillData","dataInfo","React","useMemo","length","disable","originalLength","index","sharedIndex","sharedPreIndex","currentFixedPage","useCallback","Math","round","value","fixed","abs","setSharedIndex","newSharedIndex","current","handlerOffsetValue","toInt","isPositive","i","newSharedIndexValue","rawDataLength","convertToSharedIndex","runOnJS","getCurrentIndex","realIndex","canSliding","onScrollEnd","onScrollBegin","scrollWithTiming","toValue","onFinished","callback","isFinished","defaultWithAnimation","type","config","easing","Easing","easeOutQuart","dealWithAnimation","next","opts","count","animated","nextPage","prev","prevPage","to","direction","offset","totalSize","isCloseToNextLoop","finalOffset","floor","scrollTo","n","getSharedIndex"],"mappings":"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","sourcesContent":["import React, { useRef } from \"react\";\nimport type Animated from \"react-native-reanimated\";\nimport {\n  runOnJS,\n  useAnimatedReaction,\n  useSharedValue,\n} from \"react-native-reanimated\";\n\nimport { Easing } from \"../constants\";\nimport type {\n  TCarouselActionOptions,\n  TCarouselProps,\n  WithTimingAnimation,\n} from \"../types\";\nimport { computedRealIndexWithAutoFillData, convertToSharedIndex } from \"../utils/computedWithAutoFillData\";\nimport { dealWithAnimation } from \"../utils/dealWithAnimation\";\nimport { handlerOffsetDirection } from \"../utils/handlerOffsetDirection\";\nimport { round } from \"../utils/log\";\n\ninterface IOpts {\n  loop: boolean\n  size: number\n  dataLength: number\n  autoFillData: TCarouselProps[\"autoFillData\"]\n  handlerOffset: Animated.SharedValue<number>\n  withAnimation?: TCarouselProps[\"withAnimation\"]\n  duration?: number\n  defaultIndex?: number\n  onScrollBegin?: () => void\n  onScrollEnd?: () => void\n}\n\nexport interface ICarouselController {\n  getSharedIndex: () => number\n  prev: (opts?: TCarouselActionOptions) => void\n  next: (opts?: TCarouselActionOptions) => void\n  getCurrentIndex: () => number\n  scrollTo: (opts?: TCarouselActionOptions) => void\n}\n\nexport function useCarouselController(options: IOpts): ICarouselController {\n  const {\n    size,\n    loop,\n    dataLength,\n    handlerOffset,\n    withAnimation,\n    defaultIndex = 0,\n    duration,\n    autoFillData,\n  } = options;\n\n  const dataInfo = React.useMemo(\n    () => ({\n      length: dataLength,\n      disable: !dataLength,\n      originalLength: dataLength,\n    }),\n    [dataLength],\n  );\n\n  const index = useSharedValue<number>(defaultIndex);\n  // The Index displayed to the user\n  const sharedIndex = useRef<number>(defaultIndex);\n  const sharedPreIndex = useRef<number>(defaultIndex);\n\n  const currentFixedPage = React.useCallback(() => {\n    if (loop)\n      return -Math.round(handlerOffset.value / size);\n\n    const fixed = (handlerOffset.value / size) % dataInfo.length;\n    return Math.round(\n      handlerOffset.value <= 0\n        ? Math.abs(fixed)\n        : Math.abs(fixed > 0 ? dataInfo.length - fixed : 0),\n    );\n  }, [handlerOffset, dataInfo, size, loop]);\n\n  function setSharedIndex(newSharedIndex: number) {\n    sharedIndex.current = newSharedIndex;\n  }\n\n  useAnimatedReaction(\n    () => {\n      const handlerOffsetValue = handlerOffset.value;\n      const toInt = round(handlerOffsetValue / size) % dataInfo.length;\n      const isPositive = handlerOffsetValue <= 0;\n      const i = isPositive\n        ? Math.abs(toInt)\n        : Math.abs(toInt > 0 ? dataInfo.length - toInt : 0);\n\n      const newSharedIndexValue = convertToSharedIndex({\n        loop,\n        rawDataLength: dataInfo.originalLength,\n        autoFillData: autoFillData!,\n        index: i,\n      });\n\n      return {\n        i,\n        newSharedIndexValue,\n      };\n    },\n    ({ i, newSharedIndexValue }) => {\n      index.value = i;\n      runOnJS(setSharedIndex)(newSharedIndexValue);\n    },\n    [\n      sharedPreIndex,\n      sharedIndex,\n      size,\n      dataInfo,\n      index,\n      loop,\n      autoFillData,\n      handlerOffset,\n    ],\n  );\n\n  const getCurrentIndex = React.useCallback(() => {\n    const realIndex = computedRealIndexWithAutoFillData({\n      index: index.value,\n      dataLength: dataInfo.originalLength,\n      loop,\n      autoFillData: autoFillData!,\n    });\n\n    return realIndex;\n  }, [index, autoFillData, dataInfo, loop]);\n\n  const canSliding = React.useCallback(() => {\n    return !dataInfo.disable;\n  }, [dataInfo]);\n\n  const onScrollEnd = React.useCallback(() => {\n    options.onScrollEnd?.();\n  }, [options]);\n\n  const onScrollBegin = React.useCallback(() => {\n    options.onScrollBegin?.();\n  }, [options]);\n\n  const scrollWithTiming = React.useCallback(\n    (toValue: number, onFinished?: () => void) => {\n      \"worklet\";\n      const callback = (isFinished: boolean) => {\n        \"worklet\";\n        if (isFinished) {\n          runOnJS(onScrollEnd)();\n          onFinished && runOnJS(onFinished)();\n        }\n      };\n\n      const defaultWithAnimation: WithTimingAnimation = {\n        type: \"timing\",\n        config: { duration, easing: Easing.easeOutQuart },\n      };\n\n      return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n        toValue,\n        callback,\n      );\n    },\n    [duration, withAnimation, onScrollEnd],\n  );\n\n  const next = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      \"worklet\";\n      const { count = 1, animated = true, onFinished } = opts;\n      if (!canSliding() || (!loop && index.value >= dataInfo.length - 1))\n        return;\n\n      onScrollBegin?.();\n\n      const nextPage = currentFixedPage() + count;\n      index.value = nextPage;\n\n      if (animated) {\n        handlerOffset.value = scrollWithTiming(\n          -nextPage * size,\n          onFinished,\n        ) as any;\n      }\n      else {\n        handlerOffset.value = -nextPage * size;\n        onFinished?.();\n      }\n    },\n    [\n      canSliding,\n      loop,\n      index,\n      dataInfo,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      scrollWithTiming,\n      currentFixedPage,\n    ],\n  );\n\n  const prev = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      const { count = 1, animated = true, onFinished } = opts;\n      if (!canSliding() || (!loop && index.value <= 0)) return;\n\n      onScrollBegin?.();\n\n      const prevPage = currentFixedPage() - count;\n      index.value = prevPage;\n\n      if (animated) {\n        handlerOffset.value = scrollWithTiming(\n          -prevPage * size,\n          onFinished,\n        );\n      }\n      else {\n        handlerOffset.value = -prevPage * size;\n        onFinished?.();\n      }\n    },\n    [\n      canSliding,\n      loop,\n      index,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      scrollWithTiming,\n      currentFixedPage,\n    ],\n  );\n\n  const to = React.useCallback(\n    (opts: { i: number; animated: boolean; onFinished?: () => void }) => {\n      const { i, animated = false, onFinished } = opts;\n      if (i === index.value) return;\n      if (!canSliding()) return;\n\n      onScrollBegin?.();\n      // direction -> 1 | -1\n      const direction = handlerOffsetDirection(handlerOffset);\n\n      // target offset\n      const offset = i * size * direction;\n      // page width size * page count\n      const totalSize = dataInfo.length * size;\n\n      let isCloseToNextLoop = false;\n\n      if (loop) {\n        isCloseToNextLoop\n                    = Math.abs(handlerOffset.value % totalSize) / totalSize\n                    >= 0.5;\n      }\n\n      const finalOffset\n                = (Math.floor(Math.abs(handlerOffset.value / totalSize))\n                    + (isCloseToNextLoop ? 1 : 0))\n                    * totalSize\n                    * direction\n                + offset;\n\n      if (animated) {\n        index.value = i;\n        handlerOffset.value = scrollWithTiming(finalOffset, onFinished);\n      }\n      else {\n        handlerOffset.value = finalOffset;\n        index.value = i;\n        onFinished?.();\n      }\n    },\n    [\n      index,\n      canSliding,\n      onScrollBegin,\n      handlerOffset,\n      size,\n      dataInfo.length,\n      loop,\n      scrollWithTiming,\n    ],\n  );\n\n  const scrollTo = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      const { index: i, count, animated = false, onFinished } = opts;\n      if (typeof i === \"number\" && i > -1) {\n        to({ i, animated, onFinished });\n        return;\n      }\n\n      if (!count)\n        return;\n\n      const n = Math.round(count);\n\n      if (n < 0)\n        prev({ count: Math.abs(n), animated, onFinished });\n\n      else\n        next({ count: n, animated, onFinished });\n    },\n    [prev, next, to],\n  );\n\n  return {\n    next,\n    prev,\n    scrollTo,\n    getCurrentIndex,\n    getSharedIndex: () => sharedIndex.current,\n  };\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useCommonVariables.js b/lib/commonjs/hooks/useCommonVariables.js
index 1575265cac65a838a5fe0fd15cff455c57a11723..4563df9d5ba33462017950d0fb0503bc46898d7e 100644
--- a/lib/commonjs/hooks/useCommonVariables.js
+++ b/lib/commonjs/hooks/useCommonVariables.js
@@ -1,2 +1,2 @@
-var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useCommonVariables=useCommonVariables;var _react=_interopRequireDefault(require("react"));var _reactNativeReanimated=require("react-native-reanimated");var _computeNewIndexWhenDataChanges=require("./computeNewIndexWhenDataChanges");var _handlerOffsetDirection=require("../utils/handlerOffsetDirection");var _worklet_10652703225927_init_data={code:"function anonymous() {\n  const {\n    prevDataLength,\n    dataLength,\n    loop\n  } = this._closure;\n  const previousLength = prevDataLength.value;\n  const currentLength = dataLength;\n  const isLengthChanged = previousLength !== currentLength;\n  const shouldComputed = isLengthChanged && loop;\n  if (shouldComputed) prevDataLength.value = dataLength;\n  return {\n    shouldComputed: shouldComputed,\n    previousLength: previousLength,\n    currentLength: currentLength\n  };\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCommonVariables.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"prevDataLength\",\"dataLength\",\"loop\",\"_closure\",\"previousLength\",\"value\",\"currentLength\",\"isLengthChanged\",\"shouldComputed\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCommonVariables.ts\"],\"mappings\":\"AAsCsB,SAAAA,SAAMA,CAAA;EAAA;IAAAC,cAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EACxB,MAAMC,cAAc,GAAGJ,cAAc,CAACK,KAAK;EAC3C,MAAMC,aAAa,GAAGL,UAAU;EAChC,MAAMM,eAAe,GAAGH,cAAc,KAAKE,aAAa;EACxD,MAAME,cAAc,GAAGD,eAAe,IAAIL,IAAI;EAE9C,IAAIM,cAAc,EAChBR,cAAc,CAACK,KAAK,GAAGJ,UAAU;EAEnC,OAAO;IACLO,cAAc,EAAdA,cAAc;IACdJ,cAAc,EAAdA,cAAc;IACdE,aAAA,EAAAA;EACF,CAAC;AACH\"}"};var _worklet_17314307749108_init_data={code:"function anonymous({\n  shouldComputed: shouldComputed,\n  previousLength: previousLength,\n  currentLength: currentLength\n}) {\n  const {\n    handlerOffsetDirection,\n    handlerOffset,\n    computeNewIndexWhenDataChanges,\n    size\n  } = this._closure;\n  if (shouldComputed) {\n    const direction = handlerOffsetDirection(handlerOffset);\n    handlerOffset.value = computeNewIndexWhenDataChanges({\n      direction: direction,\n      previousLength: previousLength,\n      currentLength: currentLength,\n      size: size,\n      handlerOffset: handlerOffset.value\n    });\n  }\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCommonVariables.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"shouldComputed\",\"previousLength\",\"currentLength\",\"handlerOffsetDirection\",\"handlerOffset\",\"computeNewIndexWhenDataChanges\",\"size\",\"_closure\",\"direction\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useCommonVariables.ts\"],\"mappings\":\"AAoDK,SAACA,UAAA;EAAEC,cAAc,EAAdA,cAAc;EAAEC,cAAc,EAAdA,cAAc;EAAEC,aAAA,EAAAA;AAAc,CAAC,EAAK;EAAA;IAAAC,sBAAA;IAAAC,aAAA;IAAAC,8BAAA;IAAAC;EAAA,SAAAC,QAAA;EACxD,IAAIP,cAAc,EAAE;IAElB,MAAMQ,SAAS,GAAGL,sBAAsB,CAACC,aAAa,CAAC;IAEvDA,aAAa,CAACK,KAAK,GAAGJ,8BAA8B,CAAC;MACnDG,SAAS,EAATA,SAAS;MACTP,cAAc,EAAdA,cAAc;MACdC,aAAa,EAAbA,aAAa;MACbI,IAAI,EAAJA,IAAI;MACJF,aAAa,EAAEA,aAAa,CAACK;IAC/B,CAAC,CAAC;EACJ;AACF\"}"};function useCommonVariables(props){var vertical=props.vertical,height=props.height,width=props.width,dataLength=props.dataLength,defaultIndex=props.defaultIndex,defaultScrollOffsetValue=props.defaultScrollOffsetValue,loop=props.loop;var size=vertical?height:width;var validLength=dataLength-1;var defaultHandlerOffsetValue=-Math.abs(defaultIndex*size);var _handlerOffset=(0,_reactNativeReanimated.useSharedValue)(defaultHandlerOffsetValue);var handlerOffset=defaultScrollOffsetValue!=null?defaultScrollOffsetValue:_handlerOffset;var prevDataLength=(0,_reactNativeReanimated.useSharedValue)(dataLength);_react.default.useEffect(function(){handlerOffset.value=defaultHandlerOffsetValue;},[vertical,handlerOffset,defaultHandlerOffsetValue]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-4,-27];var _f=function _f(){var previousLength=prevDataLength.value;var currentLength=dataLength;var isLengthChanged=previousLength!==currentLength;var shouldComputed=isLengthChanged&&loop;if(shouldComputed)prevDataLength.value=dataLength;return{shouldComputed:shouldComputed,previousLength:previousLength,currentLength:currentLength};};_f._closure={prevDataLength:prevDataLength,dataLength:dataLength,loop:loop};_f.__initData=_worklet_10652703225927_init_data;_f.__workletHash=10652703225927;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-5,-27];var _f=function _f(_ref){var shouldComputed=_ref.shouldComputed,previousLength=_ref.previousLength,currentLength=_ref.currentLength;if(shouldComputed){var direction=(0,_handlerOffsetDirection.handlerOffsetDirection)(handlerOffset);handlerOffset.value=(0,_computeNewIndexWhenDataChanges.computeNewIndexWhenDataChanges)({direction:direction,previousLength:previousLength,currentLength:currentLength,size:size,handlerOffset:handlerOffset.value});}};_f._closure={handlerOffsetDirection:_handlerOffsetDirection.handlerOffsetDirection,handlerOffset:handlerOffset,computeNewIndexWhenDataChanges:_computeNewIndexWhenDataChanges.computeNewIndexWhenDataChanges,size:size};_f.__initData=_worklet_17314307749108_init_data;_f.__workletHash=17314307749108;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[dataLength,loop]);return{size:size,validLength:validLength,handlerOffset:handlerOffset};}
+var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.useCommonVariables=useCommonVariables;var _react=_interopRequireDefault(require("react"));var _reactNativeReanimated=require("react-native-reanimated");var _computeNewIndexWhenDataChanges=require("./computeNewIndexWhenDataChanges");var _handlerOffsetDirection=require("../utils/handlerOffsetDirection");var _worklet_10652703225927_init_data={code:"function anonymous() {\n  const {\n    prevDataLength,\n    dataLength,\n    loop\n  } = this._closure;\n  const previousLength = prevDataLength.value;\n  const currentLength = dataLength;\n  const isLengthChanged = previousLength !== currentLength;\n  const shouldComputed = isLengthChanged && loop;\n  if (shouldComputed) prevDataLength.value = dataLength;\n  return {\n    shouldComputed: shouldComputed,\n    previousLength: previousLength,\n    currentLength: currentLength\n  };\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCommonVariables.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"prevDataLength\",\"dataLength\",\"loop\",\"_closure\",\"previousLength\",\"value\",\"currentLength\",\"isLengthChanged\",\"shouldComputed\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCommonVariables.ts\"],\"mappings\":\"AAsCsB,SAAAA,SAAMA,CAAA;EAAA;IAAAC,cAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EACxB,MAAMC,cAAc,GAAGJ,cAAc,CAACK,KAAK;EAC3C,MAAMC,aAAa,GAAGL,UAAU;EAChC,MAAMM,eAAe,GAAGH,cAAc,KAAKE,aAAa;EACxD,MAAME,cAAc,GAAGD,eAAe,IAAIL,IAAI;EAE9C,IAAIM,cAAc,EAChBR,cAAc,CAACK,KAAK,GAAGJ,UAAU;EAEnC,OAAO;IACLO,cAAc,EAAdA,cAAc;IACdJ,cAAc,EAAdA,cAAc;IACdE,aAAA,EAAAA;EACF,CAAC;AACH\"}"};var _worklet_17314307749108_init_data={code:"function anonymous({\n  shouldComputed: shouldComputed,\n  previousLength: previousLength,\n  currentLength: currentLength\n}) {\n  const {\n    handlerOffsetDirection,\n    handlerOffset,\n    computeNewIndexWhenDataChanges,\n    size\n  } = this._closure;\n  if (shouldComputed) {\n    const direction = handlerOffsetDirection(handlerOffset);\n    handlerOffset.value = computeNewIndexWhenDataChanges({\n      direction: direction,\n      previousLength: previousLength,\n      currentLength: currentLength,\n      size: size,\n      handlerOffset: handlerOffset.value\n    });\n  }\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCommonVariables.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"shouldComputed\",\"previousLength\",\"currentLength\",\"handlerOffsetDirection\",\"handlerOffset\",\"computeNewIndexWhenDataChanges\",\"size\",\"_closure\",\"direction\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useCommonVariables.ts\"],\"mappings\":\"AAoDK,SAACA,UAAA;EAAEC,cAAc,EAAdA,cAAc;EAAEC,cAAc,EAAdA,cAAc;EAAEC,aAAA,EAAAA;AAAc,CAAC,EAAK;EAAA;IAAAC,sBAAA;IAAAC,aAAA;IAAAC,8BAAA;IAAAC;EAAA,SAAAC,QAAA;EACxD,IAAIP,cAAc,EAAE;IAElB,MAAMQ,SAAS,GAAGL,sBAAsB,CAACC,aAAa,CAAC;IAEvDA,aAAa,CAACK,KAAK,GAAGJ,8BAA8B,CAAC;MACnDG,SAAS,EAATA,SAAS;MACTP,cAAc,EAAdA,cAAc;MACdC,aAAa,EAAbA,aAAa;MACbI,IAAI,EAAJA,IAAI;MACJF,aAAa,EAAEA,aAAa,CAACK;IAC/B,CAAC,CAAC;EACJ;AACF\"}"};function useCommonVariables(props){var vertical=props.vertical,height=props.height,width=props.width,dataLength=props.dataLength,defaultIndex=props.defaultIndex,defaultScrollOffsetValue=props.defaultScrollOffsetValue,loop=props.loop;var size=vertical?height:width;var validLength=dataLength-1;var defaultHandlerOffsetValue=-Math.abs(defaultIndex*size);var _handlerOffset=(0,_reactNativeReanimated.useSharedValue)(defaultHandlerOffsetValue);var handlerOffset=defaultScrollOffsetValue!=null?defaultScrollOffsetValue:_handlerOffset;var prevDataLength=(0,_reactNativeReanimated.useSharedValue)(dataLength);_react.default.useEffect(function(){handlerOffset.value=defaultHandlerOffsetValue;},[vertical,handlerOffset,defaultHandlerOffsetValue]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-4,-27];var _f=function _f(){var previousLength=prevDataLength.value;var currentLength=dataLength;var isLengthChanged=previousLength!==currentLength;var shouldComputed=isLengthChanged&&loop;if(shouldComputed)prevDataLength.value=dataLength;return{shouldComputed:shouldComputed,previousLength:previousLength,currentLength:currentLength};};_f._closure={prevDataLength:prevDataLength,dataLength:dataLength,loop:loop};_f.__initData=_worklet_10652703225927_init_data;_f.__workletHash=10652703225927;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-5,-27];var _f=function _f(_ref){var shouldComputed=_ref.shouldComputed,previousLength=_ref.previousLength,currentLength=_ref.currentLength;if(shouldComputed){var direction=(0,_handlerOffsetDirection.handlerOffsetDirection)(handlerOffset);handlerOffset.value=(0,_computeNewIndexWhenDataChanges.computeNewIndexWhenDataChanges)({direction:direction,previousLength:previousLength,currentLength:currentLength,size:size,handlerOffset:handlerOffset.value});}};_f._closure={handlerOffsetDirection:_handlerOffsetDirection.handlerOffsetDirection,handlerOffset:handlerOffset,computeNewIndexWhenDataChanges:_computeNewIndexWhenDataChanges.computeNewIndexWhenDataChanges,size:size};_f.__initData=_worklet_17314307749108_init_data;_f.__workletHash=17314307749108;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[dataLength,loop]);return{size:size,validLength:validLength,handlerOffset:handlerOffset};}
 //# sourceMappingURL=useCommonVariables.js.map
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useCommonVariables.js.map b/lib/commonjs/hooks/useCommonVariables.js.map
index c6e55839a7293887ea12692910d4aa28eca37d19..72c6fdc1bd72caefcf7869c201628011ed4496e4 100644
--- a/lib/commonjs/hooks/useCommonVariables.js.map
+++ b/lib/commonjs/hooks/useCommonVariables.js.map
@@ -1 +1 @@
-{"version":3,"sources":["useCommonVariables.ts"],"names":["useCommonVariables","props","vertical","height","width","dataLength","defaultIndex","defaultScrollOffsetValue","loop","size","validLength","defaultHandlerOffsetValue","Math","abs","_handlerOffset","handlerOffset","prevDataLength","React","useEffect","value","previousLength","currentLength","isLengthChanged","shouldComputed","direction","handlerOffsetDirection","computeNewIndexWhenDataChanges"],"mappings":"0LAAA,oDAEA,8DAEA,gFAGA,uE,y2FAQO,QAASA,CAAAA,kBAAT,CACLC,KADK,CAEa,CAClB,GACEC,CAAAA,QADF,CAQID,KARJ,CACEC,QADF,CAEEC,MAFF,CAQIF,KARJ,CAEEE,MAFF,CAGEC,KAHF,CAQIH,KARJ,CAGEG,KAHF,CAIEC,UAJF,CAQIJ,KARJ,CAIEI,UAJF,CAKEC,YALF,CAQIL,KARJ,CAKEK,YALF,CAMEC,wBANF,CAQIN,KARJ,CAMEM,wBANF,CAOEC,IAPF,CAQIP,KARJ,CAOEO,IAPF,CASA,GAAMC,CAAAA,IAAI,CAAGP,QAAQ,CAAGC,MAAH,CAAYC,KAAjC,CACA,GAAMM,CAAAA,WAAW,CAAGL,UAAU,CAAG,CAAjC,CACA,GAAMM,CAAAA,yBAAyB,CAAG,CAACC,IAAI,CAACC,GAAL,CAASP,YAAY,CAAGG,IAAxB,CAAnC,CACA,GAAMK,CAAAA,cAAc,CAAG,0CAAuBH,yBAAvB,CAAvB,CACA,GAAMI,CAAAA,aAAa,CAAGR,wBAAH,OAAGA,wBAAH,CAA+BO,cAAlD,CACA,GAAME,CAAAA,cAAc,CAAG,0CAAeX,UAAf,CAAvB,CAEAY,eAAMC,SAAN,CAAgB,UAAM,CACpBH,aAAa,CAACI,KAAd,CAAsBR,yBAAtB,CACD,CAFD,CAEG,CAACT,QAAD,CAAWa,aAAX,CAA0BJ,yBAA1B,CAFH,EAIA,iHAA0B,CACxB,GAAMS,CAAAA,cAAc,CAAGJ,cAAc,CAACG,KAAtC,CACA,GAAME,CAAAA,aAAa,CAAGhB,UAAtB,CACA,GAAMiB,CAAAA,eAAe,CAAGF,cAAc,GAAKC,aAA3C,CACA,GAAME,CAAAA,cAAc,CAAGD,eAAe,EAAId,IAA1C,CAEA,GAAIe,cAAJ,CACEP,cAAc,CAACG,KAAf,CAAuBd,UAAvB,CAEF,MAAO,CACLkB,cAAc,CAAdA,cADK,CAELH,cAAc,CAAdA,cAFK,CAGLC,aAAa,CAAbA,aAHK,CAAP,CAKD,CAdD,6BAjCoBL,cAiCpB,YAjC2CX,UAiC3C,MAlC0CG,IAkC1C,gNAc0D,IAApDe,CAAAA,cAAoD,MAApDA,cAAoD,CAApCH,cAAoC,MAApCA,cAAoC,CAApBC,aAAoB,MAApBA,aAAoB,CACxD,GAAIE,cAAJ,CAAoB,CAElB,GAAMC,CAAAA,SAAS,CAAG,mDAAuBT,aAAvB,CAAlB,CAEAA,aAAa,CAACI,KAAd,CAAsB,mEAA+B,CACnDK,SAAS,CAATA,SADmD,CAEnDJ,cAAc,CAAdA,cAFmD,CAGnDC,aAAa,CAAbA,aAHmD,CAInDZ,IAAI,CAAJA,IAJmD,CAKnDM,aAAa,CAAEA,aAAa,CAACI,KALsB,CAA/B,CAAtB,CAOD,CACF,CA3BD,qCA/BoBM,8CA+BpB,eAzBmBV,aAyBnB,gCA9BwBW,8DA8BxB,MA1BIjB,IA0BJ,0IA2BG,CAACJ,UAAD,CAAaG,IAAb,CA3BH,EA6BA,MAAO,CACLC,IAAI,CAAJA,IADK,CAELC,WAAW,CAAXA,WAFK,CAGLK,aAAa,CAAbA,aAHK,CAAP,CAKD","sourcesContent":["import React from \"react\";\nimport type Animated from \"react-native-reanimated\";\nimport { useSharedValue, useAnimatedReaction } from \"react-native-reanimated\";\n\nimport { computeNewIndexWhenDataChanges } from \"./computeNewIndexWhenDataChanges\";\nimport type { TInitializeCarouselProps } from \"./useInitProps\";\n\nimport { handlerOffsetDirection } from \"../utils/handlerOffsetDirection\";\n\ninterface ICommonVariables {\n  size: number\n  validLength: number\n  handlerOffset: Animated.SharedValue<number>\n}\n\nexport function useCommonVariables(\n  props: TInitializeCarouselProps<any>,\n): ICommonVariables {\n  const {\n    vertical,\n    height,\n    width,\n    dataLength,\n    defaultIndex,\n    defaultScrollOffsetValue,\n    loop,\n  } = props;\n  const size = vertical ? height : width;\n  const validLength = dataLength - 1;\n  const defaultHandlerOffsetValue = -Math.abs(defaultIndex * size);\n  const _handlerOffset = useSharedValue<number>(defaultHandlerOffsetValue);\n  const handlerOffset = defaultScrollOffsetValue ?? _handlerOffset;\n  const prevDataLength = useSharedValue(dataLength);\n\n  React.useEffect(() => {\n    handlerOffset.value = defaultHandlerOffsetValue;\n  }, [vertical, handlerOffset, defaultHandlerOffsetValue]);\n\n  useAnimatedReaction(() => {\n    const previousLength = prevDataLength.value;\n    const currentLength = dataLength;\n    const isLengthChanged = previousLength !== currentLength;\n    const shouldComputed = isLengthChanged && loop;\n\n    if (shouldComputed)\n      prevDataLength.value = dataLength;\n\n    return {\n      shouldComputed,\n      previousLength,\n      currentLength,\n    };\n  }, ({ shouldComputed, previousLength, currentLength }) => {\n    if (shouldComputed) {\n      // direction -> 1 | -1\n      const direction = handlerOffsetDirection(handlerOffset);\n\n      handlerOffset.value = computeNewIndexWhenDataChanges({\n        direction,\n        previousLength,\n        currentLength,\n        size,\n        handlerOffset: handlerOffset.value,\n      });\n    }\n  }, [dataLength, loop]);\n\n  return {\n    size,\n    validLength,\n    handlerOffset,\n  };\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["useCommonVariables.ts"],"names":["useCommonVariables","props","vertical","height","width","dataLength","defaultIndex","defaultScrollOffsetValue","loop","size","validLength","defaultHandlerOffsetValue","Math","abs","_handlerOffset","handlerOffset","prevDataLength","React","useEffect","value","previousLength","currentLength","isLengthChanged","shouldComputed","direction","handlerOffsetDirection","computeNewIndexWhenDataChanges"],"mappings":"0LAAA,oDAEA,8DAEA,gFAGA,uE,itFAQO,QAASA,CAAAA,kBAAT,CACLC,KADK,CAEa,CAClB,GACEC,CAAAA,QADF,CAQID,KARJ,CACEC,QADF,CAEEC,MAFF,CAQIF,KARJ,CAEEE,MAFF,CAGEC,KAHF,CAQIH,KARJ,CAGEG,KAHF,CAIEC,UAJF,CAQIJ,KARJ,CAIEI,UAJF,CAKEC,YALF,CAQIL,KARJ,CAKEK,YALF,CAMEC,wBANF,CAQIN,KARJ,CAMEM,wBANF,CAOEC,IAPF,CAQIP,KARJ,CAOEO,IAPF,CASA,GAAMC,CAAAA,IAAI,CAAGP,QAAQ,CAAGC,MAAH,CAAYC,KAAjC,CACA,GAAMM,CAAAA,WAAW,CAAGL,UAAU,CAAG,CAAjC,CACA,GAAMM,CAAAA,yBAAyB,CAAG,CAACC,IAAI,CAACC,GAAL,CAASP,YAAY,CAAGG,IAAxB,CAAnC,CACA,GAAMK,CAAAA,cAAc,CAAG,0CAAuBH,yBAAvB,CAAvB,CACA,GAAMI,CAAAA,aAAa,CAAGR,wBAAH,OAAGA,wBAAH,CAA+BO,cAAlD,CACA,GAAME,CAAAA,cAAc,CAAG,0CAAeX,UAAf,CAAvB,CAEAY,eAAMC,SAAN,CAAgB,UAAM,CACpBH,aAAa,CAACI,KAAd,CAAsBR,yBAAtB,CACD,CAFD,CAEG,CAACT,QAAD,CAAWa,aAAX,CAA0BJ,yBAA1B,CAFH,EAIA,iHAA0B,CACxB,GAAMS,CAAAA,cAAc,CAAGJ,cAAc,CAACG,KAAtC,CACA,GAAME,CAAAA,aAAa,CAAGhB,UAAtB,CACA,GAAMiB,CAAAA,eAAe,CAAGF,cAAc,GAAKC,aAA3C,CACA,GAAME,CAAAA,cAAc,CAAGD,eAAe,EAAId,IAA1C,CAEA,GAAIe,cAAJ,CACEP,cAAc,CAACG,KAAf,CAAuBd,UAAvB,CAEF,MAAO,CACLkB,cAAc,CAAdA,cADK,CAELH,cAAc,CAAdA,cAFK,CAGLC,aAAa,CAAbA,aAHK,CAAP,CAKD,CAdD,6BAjCoBL,cAiCpB,YAjC2CX,UAiC3C,MAlC0CG,IAkC1C,gNAc0D,IAApDe,CAAAA,cAAoD,MAApDA,cAAoD,CAApCH,cAAoC,MAApCA,cAAoC,CAApBC,aAAoB,MAApBA,aAAoB,CACxD,GAAIE,cAAJ,CAAoB,CAElB,GAAMC,CAAAA,SAAS,CAAG,mDAAuBT,aAAvB,CAAlB,CAEAA,aAAa,CAACI,KAAd,CAAsB,mEAA+B,CACnDK,SAAS,CAATA,SADmD,CAEnDJ,cAAc,CAAdA,cAFmD,CAGnDC,aAAa,CAAbA,aAHmD,CAInDZ,IAAI,CAAJA,IAJmD,CAKnDM,aAAa,CAAEA,aAAa,CAACI,KALsB,CAA/B,CAAtB,CAOD,CACF,CA3BD,qCA/BoBM,8CA+BpB,eAzBmBV,aAyBnB,gCA9BwBW,8DA8BxB,MA1BIjB,IA0BJ,0IA2BG,CAACJ,UAAD,CAAaG,IAAb,CA3BH,EA6BA,MAAO,CACLC,IAAI,CAAJA,IADK,CAELC,WAAW,CAAXA,WAFK,CAGLK,aAAa,CAAbA,aAHK,CAAP,CAKD","sourcesContent":["import React from \"react\";\nimport type Animated from \"react-native-reanimated\";\nimport { useSharedValue, useAnimatedReaction } from \"react-native-reanimated\";\n\nimport { computeNewIndexWhenDataChanges } from \"./computeNewIndexWhenDataChanges\";\nimport type { TInitializeCarouselProps } from \"./useInitProps\";\n\nimport { handlerOffsetDirection } from \"../utils/handlerOffsetDirection\";\n\ninterface ICommonVariables {\n  size: number\n  validLength: number\n  handlerOffset: Animated.SharedValue<number>\n}\n\nexport function useCommonVariables(\n  props: TInitializeCarouselProps<any>,\n): ICommonVariables {\n  const {\n    vertical,\n    height,\n    width,\n    dataLength,\n    defaultIndex,\n    defaultScrollOffsetValue,\n    loop,\n  } = props;\n  const size = vertical ? height : width;\n  const validLength = dataLength - 1;\n  const defaultHandlerOffsetValue = -Math.abs(defaultIndex * size);\n  const _handlerOffset = useSharedValue<number>(defaultHandlerOffsetValue);\n  const handlerOffset = defaultScrollOffsetValue ?? _handlerOffset;\n  const prevDataLength = useSharedValue(dataLength);\n\n  React.useEffect(() => {\n    handlerOffset.value = defaultHandlerOffsetValue;\n  }, [vertical, handlerOffset, defaultHandlerOffsetValue]);\n\n  useAnimatedReaction(() => {\n    const previousLength = prevDataLength.value;\n    const currentLength = dataLength;\n    const isLengthChanged = previousLength !== currentLength;\n    const shouldComputed = isLengthChanged && loop;\n\n    if (shouldComputed)\n      prevDataLength.value = dataLength;\n\n    return {\n      shouldComputed,\n      previousLength,\n      currentLength,\n    };\n  }, ({ shouldComputed, previousLength, currentLength }) => {\n    if (shouldComputed) {\n      // direction -> 1 | -1\n      const direction = handlerOffsetDirection(handlerOffset);\n\n      handlerOffset.value = computeNewIndexWhenDataChanges({\n        direction,\n        previousLength,\n        currentLength,\n        size,\n        handlerOffset: handlerOffset.value,\n      });\n    }\n  }, [dataLength, loop]);\n\n  return {\n    size,\n    validLength,\n    handlerOffset,\n  };\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useOffsetX.js b/lib/commonjs/hooks/useOffsetX.js
index 196185a26eb20ad821d73f29ec1ac932476dcb69..0ba3f1d40d753843dd5ff6529cb179b211f437a7 100644
--- a/lib/commonjs/hooks/useOffsetX.js
+++ b/lib/commonjs/hooks/useOffsetX.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.useOffsetX=void 0;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_63816918029_init_data={code:"function anonymous() {\n  const {\n    visibleRanges,\n    index,\n    loop,\n    TOTAL_WIDTH,\n    MIN,\n    HALF_WIDTH,\n    startPos,\n    MAX,\n    interpolate,\n    handlerOffset,\n    Extrapolate,\n    size\n  } = this._closure;\n  const {\n    negativeRange: negativeRange,\n    positiveRange: positiveRange\n  } = visibleRanges.value;\n  if ((index < negativeRange[0] || index > negativeRange[1]) && (index < positiveRange[0] || index > positiveRange[1])) return Number.MAX_SAFE_INTEGER;\n  if (loop) {\n    const inputRange = [-TOTAL_WIDTH, MIN - HALF_WIDTH - startPos - Number.MIN_VALUE, MIN - HALF_WIDTH - startPos, 0, MAX + HALF_WIDTH - startPos, MAX + HALF_WIDTH - startPos + Number.MIN_VALUE, TOTAL_WIDTH];\n    const outputRange = [startPos, MAX + HALF_WIDTH - Number.MIN_VALUE, MIN - HALF_WIDTH, startPos, MAX + HALF_WIDTH, MIN - HALF_WIDTH + Number.MIN_VALUE, startPos];\n    return interpolate(handlerOffset.value, inputRange, outputRange, Extrapolate.CLAMP);\n  }\n  return handlerOffset.value + size * index;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useOffsetX.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"visibleRanges\",\"index\",\"loop\",\"TOTAL_WIDTH\",\"MIN\",\"HALF_WIDTH\",\"startPos\",\"MAX\",\"interpolate\",\"handlerOffset\",\"Extrapolate\",\"size\",\"_closure\",\"negativeRange\",\"positiveRange\",\"value\",\"Number\",\"MAX_SAFE_INTEGER\",\"inputRange\",\"MIN_VALUE\",\"outputRange\",\"CLAMP\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useOffsetX.ts\"],\"mappings\":\"AA8C4B,SAAAA,SAAMA,CAAA;EAAA;IAAAC,aAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,WAAA;IAAAC,GAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,GAAA;IAAAC,WAAA;IAAAC,aAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAC9B,MAAM;IAAEC,aAAa,EAAbA,aAAa;IAAEC,aAAA,EAAAA;EAAc,CAAC,GAAGd,aAAa,CAACe,KAAK;EAC5D,IACE,CAACd,KAAK,GAAGY,aAAa,CAAC,CAAC,CAAC,IAAIZ,KAAK,GAAGY,aAAa,CAAC,CAAC,CAAC,MAC3CZ,KAAK,GAAGa,aAAa,CAAC,CAAC,CAAC,IAAIb,KAAK,GAAGa,aAAa,CAAC,CAAC,CAAC,CAAC,EAE/D,OAAOE,MAAM,CAACC,gBAAgB;EAEhC,IAAIf,IAAI,EAAE;IACR,MAAMgB,UAAU,GAAG,CACjB,CAACf,WAAW,EACZC,GAAG,GAAGC,UAAU,GAAGC,QAAQ,GAAGU,MAAM,CAACG,SAAS,EAC9Cf,GAAG,GAAGC,UAAU,GAAGC,QAAQ,EAC3B,CAAC,EACDC,GAAG,GAAGF,UAAU,GAAGC,QAAQ,EAC3BC,GAAG,GAAGF,UAAU,GAAGC,QAAQ,GAAGU,MAAM,CAACG,SAAS,EAC9ChB,WAAW,CACZ;IAED,MAAMiB,WAAW,GAAG,CAClBd,QAAQ,EACRC,GAAG,GAAGF,UAAU,GAAGW,MAAM,CAACG,SAAS,EACnCf,GAAG,GAAGC,UAAU,EAChBC,QAAQ,EACRC,GAAG,GAAGF,UAAU,EAChBD,GAAG,GAAGC,UAAU,GAAGW,MAAM,CAACG,SAAS,EACnCb,QAAQ,CACT;IAED,OAAOE,WAAW,CAChBC,aAAa,CAACM,KAAK,EACnBG,UAAU,EACVE,WAAW,EACXV,WAAW,CAACW,KACd,CAAC;EACH;EAEA,OAAOZ,aAAa,CAACM,KAAK,GAAGJ,IAAI,GAAGV,KAAK;AAC3C\"}"};var useOffsetX=function useOffsetX(opts,visibleRanges){var handlerOffset=opts.handlerOffset,index=opts.index,size=opts.size,loop=opts.loop,dataLength=opts.dataLength,_opts$type=opts.type,type=_opts$type===void 0?"positive":_opts$type,_viewCount=opts.viewCount;var ITEM_LENGTH=dataLength;var VALID_LENGTH=ITEM_LENGTH-1;var TOTAL_WIDTH=size*ITEM_LENGTH;var HALF_WIDTH=0.5*size;var viewCount=_viewCount!=null?_viewCount:Math.round((ITEM_LENGTH-1)/2);var positiveCount=type==="positive"?viewCount:VALID_LENGTH-viewCount;var startPos=size*index;if(index>positiveCount)startPos=(index-ITEM_LENGTH)*size;var MAX=positiveCount*size;var MIN=-((VALID_LENGTH-positiveCount)*size);var x=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-13,-27];var _f=function _f(){var _visibleRanges$value=visibleRanges.value,negativeRange=_visibleRanges$value.negativeRange,positiveRange=_visibleRanges$value.positiveRange;if((index<negativeRange[0]||index>negativeRange[1])&&(index<positiveRange[0]||index>positiveRange[1]))return Number.MAX_SAFE_INTEGER;if(loop){var inputRange=[-TOTAL_WIDTH,MIN-HALF_WIDTH-startPos-Number.MIN_VALUE,MIN-HALF_WIDTH-startPos,0,MAX+HALF_WIDTH-startPos,MAX+HALF_WIDTH-startPos+Number.MIN_VALUE,TOTAL_WIDTH];var outputRange=[startPos,MAX+HALF_WIDTH-Number.MIN_VALUE,MIN-HALF_WIDTH,startPos,MAX+HALF_WIDTH,MIN-HALF_WIDTH+Number.MIN_VALUE,startPos];return(0,_reactNativeReanimated.interpolate)(handlerOffset.value,inputRange,outputRange,_reactNativeReanimated.Extrapolate.CLAMP);}return handlerOffset.value+size*index;};_f._closure={visibleRanges:visibleRanges,index:index,loop:loop,TOTAL_WIDTH:TOTAL_WIDTH,MIN:MIN,HALF_WIDTH:HALF_WIDTH,startPos:startPos,MAX:MAX,interpolate:_reactNativeReanimated.interpolate,handlerOffset:handlerOffset,Extrapolate:_reactNativeReanimated.Extrapolate,size:size};_f.__initData=_worklet_63816918029_init_data;_f.__workletHash=63816918029;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[loop,dataLength,viewCount,type,size,visibleRanges]);return x;};exports.useOffsetX=useOffsetX;
+Object.defineProperty(exports,"__esModule",{value:true});exports.useOffsetX=void 0;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_63816918029_init_data={code:"function anonymous() {\n  const {\n    visibleRanges,\n    index,\n    loop,\n    TOTAL_WIDTH,\n    MIN,\n    HALF_WIDTH,\n    startPos,\n    MAX,\n    interpolate,\n    handlerOffset,\n    Extrapolate,\n    size\n  } = this._closure;\n  const {\n    negativeRange: negativeRange,\n    positiveRange: positiveRange\n  } = visibleRanges.value;\n  if ((index < negativeRange[0] || index > negativeRange[1]) && (index < positiveRange[0] || index > positiveRange[1])) return Number.MAX_SAFE_INTEGER;\n  if (loop) {\n    const inputRange = [-TOTAL_WIDTH, MIN - HALF_WIDTH - startPos - Number.MIN_VALUE, MIN - HALF_WIDTH - startPos, 0, MAX + HALF_WIDTH - startPos, MAX + HALF_WIDTH - startPos + Number.MIN_VALUE, TOTAL_WIDTH];\n    const outputRange = [startPos, MAX + HALF_WIDTH - Number.MIN_VALUE, MIN - HALF_WIDTH, startPos, MAX + HALF_WIDTH, MIN - HALF_WIDTH + Number.MIN_VALUE, startPos];\n    return interpolate(handlerOffset.value, inputRange, outputRange, Extrapolate.CLAMP);\n  }\n  return handlerOffset.value + size * index;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useOffsetX.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"visibleRanges\",\"index\",\"loop\",\"TOTAL_WIDTH\",\"MIN\",\"HALF_WIDTH\",\"startPos\",\"MAX\",\"interpolate\",\"handlerOffset\",\"Extrapolate\",\"size\",\"_closure\",\"negativeRange\",\"positiveRange\",\"value\",\"Number\",\"MAX_SAFE_INTEGER\",\"inputRange\",\"MIN_VALUE\",\"outputRange\",\"CLAMP\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useOffsetX.ts\"],\"mappings\":\"AA8C4B,SAAAA,SAAMA,CAAA;EAAA;IAAAC,aAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,WAAA;IAAAC,GAAA;IAAAC,UAAA;IAAAC,QAAA;IAAAC,GAAA;IAAAC,WAAA;IAAAC,aAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAC9B,MAAM;IAAEC,aAAa,EAAbA,aAAa;IAAEC,aAAA,EAAAA;EAAc,CAAC,GAAGd,aAAa,CAACe,KAAK;EAC5D,IACE,CAACd,KAAK,GAAGY,aAAa,CAAC,CAAC,CAAC,IAAIZ,KAAK,GAAGY,aAAa,CAAC,CAAC,CAAC,MAC3CZ,KAAK,GAAGa,aAAa,CAAC,CAAC,CAAC,IAAIb,KAAK,GAAGa,aAAa,CAAC,CAAC,CAAC,CAAC,EAE/D,OAAOE,MAAM,CAACC,gBAAgB;EAEhC,IAAIf,IAAI,EAAE;IACR,MAAMgB,UAAU,GAAG,CACjB,CAACf,WAAW,EACZC,GAAG,GAAGC,UAAU,GAAGC,QAAQ,GAAGU,MAAM,CAACG,SAAS,EAC9Cf,GAAG,GAAGC,UAAU,GAAGC,QAAQ,EAC3B,CAAC,EACDC,GAAG,GAAGF,UAAU,GAAGC,QAAQ,EAC3BC,GAAG,GAAGF,UAAU,GAAGC,QAAQ,GAAGU,MAAM,CAACG,SAAS,EAC9ChB,WAAW,CACZ;IAED,MAAMiB,WAAW,GAAG,CAClBd,QAAQ,EACRC,GAAG,GAAGF,UAAU,GAAGW,MAAM,CAACG,SAAS,EACnCf,GAAG,GAAGC,UAAU,EAChBC,QAAQ,EACRC,GAAG,GAAGF,UAAU,EAChBD,GAAG,GAAGC,UAAU,GAAGW,MAAM,CAACG,SAAS,EACnCb,QAAQ,CACT;IAED,OAAOE,WAAW,CAChBC,aAAa,CAACM,KAAK,EACnBG,UAAU,EACVE,WAAW,EACXV,WAAW,CAACW,KACd,CAAC;EACH;EAEA,OAAOZ,aAAa,CAACM,KAAK,GAAGJ,IAAI,GAAGV,KAAK;AAC3C\"}"};var useOffsetX=function useOffsetX(opts,visibleRanges){var handlerOffset=opts.handlerOffset,index=opts.index,size=opts.size,loop=opts.loop,dataLength=opts.dataLength,_opts$type=opts.type,type=_opts$type===void 0?"positive":_opts$type,_viewCount=opts.viewCount;var ITEM_LENGTH=dataLength;var VALID_LENGTH=ITEM_LENGTH-1;var TOTAL_WIDTH=size*ITEM_LENGTH;var HALF_WIDTH=0.5*size;var viewCount=_viewCount!=null?_viewCount:Math.round((ITEM_LENGTH-1)/2);var positiveCount=type==="positive"?viewCount:VALID_LENGTH-viewCount;var startPos=size*index;if(index>positiveCount)startPos=(index-ITEM_LENGTH)*size;var MAX=positiveCount*size;var MIN=-((VALID_LENGTH-positiveCount)*size);var x=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-13,-27];var _f=function _f(){var _visibleRanges$value=visibleRanges.value,negativeRange=_visibleRanges$value.negativeRange,positiveRange=_visibleRanges$value.positiveRange;if((index<negativeRange[0]||index>negativeRange[1])&&(index<positiveRange[0]||index>positiveRange[1]))return Number.MAX_SAFE_INTEGER;if(loop){var inputRange=[-TOTAL_WIDTH,MIN-HALF_WIDTH-startPos-Number.MIN_VALUE,MIN-HALF_WIDTH-startPos,0,MAX+HALF_WIDTH-startPos,MAX+HALF_WIDTH-startPos+Number.MIN_VALUE,TOTAL_WIDTH];var outputRange=[startPos,MAX+HALF_WIDTH-Number.MIN_VALUE,MIN-HALF_WIDTH,startPos,MAX+HALF_WIDTH,MIN-HALF_WIDTH+Number.MIN_VALUE,startPos];return(0,_reactNativeReanimated.interpolate)(handlerOffset.value,inputRange,outputRange,_reactNativeReanimated.Extrapolate.CLAMP);}return handlerOffset.value+size*index;};_f._closure={visibleRanges:visibleRanges,index:index,loop:loop,TOTAL_WIDTH:TOTAL_WIDTH,MIN:MIN,HALF_WIDTH:HALF_WIDTH,startPos:startPos,MAX:MAX,interpolate:_reactNativeReanimated.interpolate,handlerOffset:handlerOffset,Extrapolate:_reactNativeReanimated.Extrapolate,size:size};_f.__initData=_worklet_63816918029_init_data;_f.__workletHash=63816918029;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[loop,dataLength,viewCount,type,size,visibleRanges]);return x;};exports.useOffsetX=useOffsetX;
 //# sourceMappingURL=useOffsetX.js.map
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useOffsetX.js.map b/lib/commonjs/hooks/useOffsetX.js.map
index 2bc747b0886095d6b4446111e088ad8a7746d282..756542fdcc0196561efbfbc0c85ca65619fbe912 100644
--- a/lib/commonjs/hooks/useOffsetX.js.map
+++ b/lib/commonjs/hooks/useOffsetX.js.map
@@ -1 +1 @@
-{"version":3,"sources":["useOffsetX.ts"],"names":["useOffsetX","opts","visibleRanges","handlerOffset","index","size","loop","dataLength","type","_viewCount","viewCount","ITEM_LENGTH","VALID_LENGTH","TOTAL_WIDTH","HALF_WIDTH","Math","round","positiveCount","startPos","MAX","MIN","x","value","negativeRange","positiveRange","Number","MAX_SAFE_INTEGER","inputRange","MIN_VALUE","outputRange","Extrapolate","CLAMP","interpolate"],"mappings":"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","sourcesContent":["import type Animated from \"react-native-reanimated\";\nimport {\n  Extrapolate,\n  interpolate,\n  useDerivedValue,\n} from \"react-native-reanimated\";\n\nimport type { IVisibleRanges } from \"./useVisibleRanges\";\n\nexport interface IOpts {\n  index: number\n  size: number\n  handlerOffset: Animated.SharedValue<number>\n  dataLength: number\n  type?: \"positive\" | \"negative\"\n  viewCount?: number\n  loop?: boolean\n}\n\nexport const useOffsetX = (opts: IOpts, visibleRanges: IVisibleRanges) => {\n  const {\n    handlerOffset,\n    index,\n    size,\n    loop,\n    dataLength,\n    type = \"positive\",\n    viewCount: _viewCount,\n  } = opts;\n\n  const ITEM_LENGTH = dataLength;\n  const VALID_LENGTH = ITEM_LENGTH - 1;\n  const TOTAL_WIDTH = size * ITEM_LENGTH;\n  const HALF_WIDTH = 0.5 * size;\n\n  const viewCount = _viewCount ?? Math.round((ITEM_LENGTH - 1) / 2);\n  const positiveCount\n        = type === \"positive\" ? viewCount : VALID_LENGTH - viewCount;\n\n  let startPos = size * index;\n  if (index > positiveCount)\n    startPos = (index - ITEM_LENGTH) * size;\n\n  const MAX = positiveCount * size;\n  const MIN = -((VALID_LENGTH - positiveCount) * size);\n\n  const x = useDerivedValue(() => {\n    const { negativeRange, positiveRange } = visibleRanges.value;\n    if (\n      (index < negativeRange[0] || index > negativeRange[1])\n            && (index < positiveRange[0] || index > positiveRange[1])\n    )\n      return Number.MAX_SAFE_INTEGER;\n\n    if (loop) {\n      const inputRange = [\n        -TOTAL_WIDTH,\n        MIN - HALF_WIDTH - startPos - Number.MIN_VALUE,\n        MIN - HALF_WIDTH - startPos,\n        0,\n        MAX + HALF_WIDTH - startPos,\n        MAX + HALF_WIDTH - startPos + Number.MIN_VALUE,\n        TOTAL_WIDTH,\n      ];\n\n      const outputRange = [\n        startPos,\n        MAX + HALF_WIDTH - Number.MIN_VALUE,\n        MIN - HALF_WIDTH,\n        startPos,\n        MAX + HALF_WIDTH,\n        MIN - HALF_WIDTH + Number.MIN_VALUE,\n        startPos,\n      ];\n\n      return interpolate(\n        handlerOffset.value,\n        inputRange,\n        outputRange,\n        Extrapolate.CLAMP,\n      );\n    }\n\n    return handlerOffset.value + size * index;\n  }, [loop, dataLength, viewCount, type, size, visibleRanges]);\n\n  return x;\n};\n"]}
\ No newline at end of file
+{"version":3,"sources":["useOffsetX.ts"],"names":["useOffsetX","opts","visibleRanges","handlerOffset","index","size","loop","dataLength","type","_viewCount","viewCount","ITEM_LENGTH","VALID_LENGTH","TOTAL_WIDTH","HALF_WIDTH","Math","round","positiveCount","startPos","MAX","MIN","x","value","negativeRange","positiveRange","Number","MAX_SAFE_INTEGER","inputRange","MIN_VALUE","outputRange","Extrapolate","CLAMP","interpolate"],"mappings":"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","sourcesContent":["import type Animated from \"react-native-reanimated\";\nimport {\n  Extrapolate,\n  interpolate,\n  useDerivedValue,\n} from \"react-native-reanimated\";\n\nimport type { IVisibleRanges } from \"./useVisibleRanges\";\n\nexport interface IOpts {\n  index: number\n  size: number\n  handlerOffset: Animated.SharedValue<number>\n  dataLength: number\n  type?: \"positive\" | \"negative\"\n  viewCount?: number\n  loop?: boolean\n}\n\nexport const useOffsetX = (opts: IOpts, visibleRanges: IVisibleRanges) => {\n  const {\n    handlerOffset,\n    index,\n    size,\n    loop,\n    dataLength,\n    type = \"positive\",\n    viewCount: _viewCount,\n  } = opts;\n\n  const ITEM_LENGTH = dataLength;\n  const VALID_LENGTH = ITEM_LENGTH - 1;\n  const TOTAL_WIDTH = size * ITEM_LENGTH;\n  const HALF_WIDTH = 0.5 * size;\n\n  const viewCount = _viewCount ?? Math.round((ITEM_LENGTH - 1) / 2);\n  const positiveCount\n        = type === \"positive\" ? viewCount : VALID_LENGTH - viewCount;\n\n  let startPos = size * index;\n  if (index > positiveCount)\n    startPos = (index - ITEM_LENGTH) * size;\n\n  const MAX = positiveCount * size;\n  const MIN = -((VALID_LENGTH - positiveCount) * size);\n\n  const x = useDerivedValue(() => {\n    const { negativeRange, positiveRange } = visibleRanges.value;\n    if (\n      (index < negativeRange[0] || index > negativeRange[1])\n            && (index < positiveRange[0] || index > positiveRange[1])\n    )\n      return Number.MAX_SAFE_INTEGER;\n\n    if (loop) {\n      const inputRange = [\n        -TOTAL_WIDTH,\n        MIN - HALF_WIDTH - startPos - Number.MIN_VALUE,\n        MIN - HALF_WIDTH - startPos,\n        0,\n        MAX + HALF_WIDTH - startPos,\n        MAX + HALF_WIDTH - startPos + Number.MIN_VALUE,\n        TOTAL_WIDTH,\n      ];\n\n      const outputRange = [\n        startPos,\n        MAX + HALF_WIDTH - Number.MIN_VALUE,\n        MIN - HALF_WIDTH,\n        startPos,\n        MAX + HALF_WIDTH,\n        MIN - HALF_WIDTH + Number.MIN_VALUE,\n        startPos,\n      ];\n\n      return interpolate(\n        handlerOffset.value,\n        inputRange,\n        outputRange,\n        Extrapolate.CLAMP,\n      );\n    }\n\n    return handlerOffset.value + size * index;\n  }, [loop, dataLength, viewCount, type, size, visibleRanges]);\n\n  return x;\n};\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useOnProgressChange.js b/lib/commonjs/hooks/useOnProgressChange.js
index d2d624c3b6a7ebaa79ed0473ff63dfb6a49812d7..fb10919ea788cda06105574b5e7222d588235765 100644
--- a/lib/commonjs/hooks/useOnProgressChange.js
+++ b/lib/commonjs/hooks/useOnProgressChange.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.useOnProgressChange=useOnProgressChange;var _reactNativeReanimated=require("react-native-reanimated");var _computedWithAutoFillData=require("../utils/computedWithAutoFillData");var _worklet_15415777011180_init_data={code:"function anonymous() {\n  const {\n    offsetX\n  } = this._closure;\n  return offsetX.value;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"offsetX\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts\"],\"mappings\":\"AAsBI,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,OAAQ,CAAAE,KAAA;AAAA\"}"};var _worklet_2512862808065_init_data={code:"function anonymous(_value) {\n  const {\n    computedOffsetXValueWithAutoFillData,\n    rawDataLength,\n    size,\n    autoFillData,\n    loop,\n    onProgressChange,\n    runOnJS\n  } = this._closure;\n  let value = computedOffsetXValueWithAutoFillData({\n    value: _value,\n    rawDataLength: rawDataLength,\n    size: size,\n    autoFillData: autoFillData,\n    loop: loop\n  });\n  if (!loop) {\n    value = Math.max(-((rawDataLength - 1) * size), Math.min(value, 0));\n  }\n  let absoluteProgress = Math.abs(value / size);\n  if (value > 0) absoluteProgress = rawDataLength - absoluteProgress;\n  if (onProgressChange) runOnJS(onProgressChange)(value, absoluteProgress);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_value\",\"computedOffsetXValueWithAutoFillData\",\"rawDataLength\",\"size\",\"autoFillData\",\"loop\",\"onProgressChange\",\"runOnJS\",\"_closure\",\"value\",\"Math\",\"max\",\"min\",\"absoluteProgress\",\"abs\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts\"],\"mappings\":\"AAuBK,SAAAA,SAAMA,CAAKC,MAAA;EAAA;IAAAC,oCAAA;IAAAC,aAAA;IAAAC,IAAA;IAAAC,YAAA;IAAAC,IAAA;IAAAC,gBAAA;IAAAC;EAAA,SAAAC,QAAA;EACV,IAAIC,KAAK,GAAGR,oCAAoC,CAAC;IAC/CQ,KAAK,EAAET,MAAM;IACbE,aAAa,EAAbA,aAAa;IACbC,IAAI,EAAJA,IAAI;IACJC,YAAY,EAAZA,YAAY;IACZC,IAAA,EAAAA;EACF,CAAC,CAAC;EAEF,IAAI,CAACA,IAAI,EAAE;IACTI,KAAK,GAAGC,IAAI,CAACC,GAAG,CACd,EAAE,CAACT,aAAa,GAAG,CAAC,IAAIC,IAAI,CAAC,EAC7BO,IAAI,CAACE,GAAG,CAACH,KAAK,EAAE,CAAC,CACnB,CAAC;EACH;EAEA,IAAII,gBAAgB,GAAGH,IAAI,CAACI,GAAG,CAACL,KAAK,GAAGN,IAAI,CAAC;EAE7C,IAAIM,KAAK,GAAG,CAAC,EACXI,gBAAgB,GAAGX,aAAa,GAAGW,gBAAgB;EAErD,IAAIP,gBAAgB,EAClBC,OAAO,CAACD,gBAAgB,CAAC,CAACG,KAAK,EAAEI,gBAAgB,CAAC;AACtD\"}"};function useOnProgressChange(opts){var autoFillData=opts.autoFillData,loop=opts.loop,offsetX=opts.offsetX,size=opts.size,rawDataLength=opts.rawDataLength,onProgressChange=opts.onProgressChange;(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return offsetX.value;};_f._closure={offsetX:offsetX};_f.__initData=_worklet_15415777011180_init_data;_f.__workletHash=15415777011180;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-8,-27];var _f=function _f(_value){var value=(0,_computedWithAutoFillData.computedOffsetXValueWithAutoFillData)({value:_value,rawDataLength:rawDataLength,size:size,autoFillData:autoFillData,loop:loop});if(!loop){value=Math.max(-((rawDataLength-1)*size),Math.min(value,0));}var absoluteProgress=Math.abs(value/size);if(value>0)absoluteProgress=rawDataLength-absoluteProgress;if(onProgressChange)(0,_reactNativeReanimated.runOnJS)(onProgressChange)(value,absoluteProgress);};_f._closure={computedOffsetXValueWithAutoFillData:_computedWithAutoFillData.computedOffsetXValueWithAutoFillData,rawDataLength:rawDataLength,size:size,autoFillData:autoFillData,loop:loop,onProgressChange:onProgressChange,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_2512862808065_init_data;_f.__workletHash=2512862808065;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[loop,autoFillData,rawDataLength,onProgressChange]);}
+Object.defineProperty(exports,"__esModule",{value:true});exports.useOnProgressChange=useOnProgressChange;var _reactNativeReanimated=require("react-native-reanimated");var _computedWithAutoFillData=require("../utils/computedWithAutoFillData");var _worklet_15415777011180_init_data={code:"function anonymous() {\n  const {\n    offsetX\n  } = this._closure;\n  return offsetX.value;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"offsetX\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts\"],\"mappings\":\"AAsBI,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,OAAQ,CAAAE,KAAA;AAAA\"}"};var _worklet_2512862808065_init_data={code:"function anonymous(_value) {\n  const {\n    computedOffsetXValueWithAutoFillData,\n    rawDataLength,\n    size,\n    autoFillData,\n    loop,\n    onProgressChange,\n    runOnJS\n  } = this._closure;\n  let value = computedOffsetXValueWithAutoFillData({\n    value: _value,\n    rawDataLength: rawDataLength,\n    size: size,\n    autoFillData: autoFillData,\n    loop: loop\n  });\n  if (!loop) {\n    value = Math.max(-((rawDataLength - 1) * size), Math.min(value, 0));\n  }\n  let absoluteProgress = Math.abs(value / size);\n  if (value > 0) absoluteProgress = rawDataLength - absoluteProgress;\n  if (onProgressChange) runOnJS(onProgressChange)(value, absoluteProgress);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_value\",\"computedOffsetXValueWithAutoFillData\",\"rawDataLength\",\"size\",\"autoFillData\",\"loop\",\"onProgressChange\",\"runOnJS\",\"_closure\",\"value\",\"Math\",\"max\",\"min\",\"absoluteProgress\",\"abs\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useOnProgressChange.ts\"],\"mappings\":\"AAuBK,SAAAA,SAAMA,CAAKC,MAAA;EAAA;IAAAC,oCAAA;IAAAC,aAAA;IAAAC,IAAA;IAAAC,YAAA;IAAAC,IAAA;IAAAC,gBAAA;IAAAC;EAAA,SAAAC,QAAA;EACV,IAAIC,KAAK,GAAGR,oCAAoC,CAAC;IAC/CQ,KAAK,EAAET,MAAM;IACbE,aAAa,EAAbA,aAAa;IACbC,IAAI,EAAJA,IAAI;IACJC,YAAY,EAAZA,YAAY;IACZC,IAAA,EAAAA;EACF,CAAC,CAAC;EAEF,IAAI,CAACA,IAAI,EAAE;IACTI,KAAK,GAAGC,IAAI,CAACC,GAAG,CACd,EAAE,CAACT,aAAa,GAAG,CAAC,IAAIC,IAAI,CAAC,EAC7BO,IAAI,CAACE,GAAG,CAACH,KAAK,EAAE,CAAC,CACnB,CAAC;EACH;EAEA,IAAII,gBAAgB,GAAGH,IAAI,CAACI,GAAG,CAACL,KAAK,GAAGN,IAAI,CAAC;EAE7C,IAAIM,KAAK,GAAG,CAAC,EACXI,gBAAgB,GAAGX,aAAa,GAAGW,gBAAgB;EAErD,IAAIP,gBAAgB,EAClBC,OAAO,CAACD,gBAAgB,CAAC,CAACG,KAAK,EAAEI,gBAAgB,CAAC;AACtD\"}"};function useOnProgressChange(opts){var autoFillData=opts.autoFillData,loop=opts.loop,offsetX=opts.offsetX,size=opts.size,rawDataLength=opts.rawDataLength,onProgressChange=opts.onProgressChange;(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return offsetX.value;};_f._closure={offsetX:offsetX};_f.__initData=_worklet_15415777011180_init_data;_f.__workletHash=15415777011180;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-8,-27];var _f=function _f(_value){var value=(0,_computedWithAutoFillData.computedOffsetXValueWithAutoFillData)({value:_value,rawDataLength:rawDataLength,size:size,autoFillData:autoFillData,loop:loop});if(!loop){value=Math.max(-((rawDataLength-1)*size),Math.min(value,0));}var absoluteProgress=Math.abs(value/size);if(value>0)absoluteProgress=rawDataLength-absoluteProgress;if(onProgressChange)(0,_reactNativeReanimated.runOnJS)(onProgressChange)(value,absoluteProgress);};_f._closure={computedOffsetXValueWithAutoFillData:_computedWithAutoFillData.computedOffsetXValueWithAutoFillData,rawDataLength:rawDataLength,size:size,autoFillData:autoFillData,loop:loop,onProgressChange:onProgressChange,runOnJS:_reactNativeReanimated.runOnJS};_f.__initData=_worklet_2512862808065_init_data;_f.__workletHash=2512862808065;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[loop,autoFillData,rawDataLength,onProgressChange]);}
 //# sourceMappingURL=useOnProgressChange.js.map
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useOnProgressChange.js.map b/lib/commonjs/hooks/useOnProgressChange.js.map
index f34e30b43b9be55a0adc9be30b6cd477c7cd2c96..d0373374f5eca98e586c15bdcf4b1deebfa79885 100644
--- a/lib/commonjs/hooks/useOnProgressChange.js.map
+++ b/lib/commonjs/hooks/useOnProgressChange.js.map
@@ -1 +1 @@
-{"version":3,"sources":["useOnProgressChange.ts"],"names":["useOnProgressChange","opts","autoFillData","loop","offsetX","size","rawDataLength","onProgressChange","value","_value","Math","max","min","absoluteProgress","abs","computedOffsetXValueWithAutoFillData","runOnJS"],"mappings":"yGACA,8DAMA,2E,49EAEO,QAASA,CAAAA,mBAAT,CACLC,IADK,CAQL,CACA,GAAQC,CAAAA,YAAR,CACQD,IADR,CAAQC,YAAR,CAAsBC,IAAtB,CACQF,IADR,CAAsBE,IAAtB,CAA4BC,OAA5B,CACQH,IADR,CAA4BG,OAA5B,CAAqCC,IAArC,CACQJ,IADR,CAAqCI,IAArC,CAA2CC,aAA3C,CACQL,IADR,CAA2CK,aAA3C,CAA0DC,gBAA1D,CACQN,IADR,CAA0DM,gBAA1D,CAGA,oGACE,oBAAMH,CAAAA,OAAO,CAACI,KAAd,EADF,sBArBKJ,OAqBL,2MAEGK,MAFH,CAEc,CACV,GAAID,CAAAA,KAAK,CAAG,mEAAqC,CAC/CA,KAAK,CAAEC,MADwC,CAE/CH,aAAa,CAAbA,aAF+C,CAG/CD,IAAI,CAAJA,IAH+C,CAI/CH,YAAY,CAAZA,YAJ+C,CAK/CC,IAAI,CAAJA,IAL+C,CAArC,CAAZ,CAQA,GAAI,CAACA,IAAL,CAAW,CACTK,KAAK,CAAGE,IAAI,CAACC,GAAL,CACN,EAAE,CAACL,aAAa,CAAG,CAAjB,EAAsBD,IAAxB,CADM,CAENK,IAAI,CAACE,GAAL,CAASJ,KAAT,CAAgB,CAAhB,CAFM,CAAR,CAID,CAED,GAAIK,CAAAA,gBAAgB,CAAGH,IAAI,CAACI,GAAL,CAASN,KAAK,CAAGH,IAAjB,CAAvB,CAEA,GAAIG,KAAK,CAAG,CAAZ,CACEK,gBAAgB,CAAGP,aAAa,CAAGO,gBAAnC,CAEF,GAAIN,gBAAJ,CACE,mCAAQA,gBAAR,EAA0BC,KAA1B,CAAiCK,gBAAjC,EACH,CAzBH,mDApBYE,8DAoBZ,eATkCT,aASlC,MAVwCD,IAUxC,cAhBEH,YAgBF,MAbKC,IAaL,kBAR8BI,gBAQ9B,SARsBS,8BAQtB,wIA0BE,CAACb,IAAD,CAAOD,YAAP,CAAqBI,aAArB,CAAoCC,gBAApC,CA1BF,EA4BD","sourcesContent":["import type Animated from \"react-native-reanimated\";\nimport {\n  runOnJS,\n  useAnimatedReaction,\n} from \"react-native-reanimated\";\n\nimport type { TCarouselProps } from \"../types\";\nimport { computedOffsetXValueWithAutoFillData } from \"../utils/computedWithAutoFillData\";\n\nexport function useOnProgressChange(\n  opts: {\n    size: number\n    autoFillData: boolean\n    loop: boolean\n    offsetX: Animated.SharedValue<number>\n    rawDataLength: number\n  } & Pick<TCarouselProps, \"onProgressChange\">,\n) {\n  const { autoFillData, loop, offsetX, size, rawDataLength, onProgressChange }\n        = opts;\n\n  useAnimatedReaction(\n    () => offsetX.value,\n    (_value) => {\n      let value = computedOffsetXValueWithAutoFillData({\n        value: _value,\n        rawDataLength,\n        size,\n        autoFillData,\n        loop,\n      });\n\n      if (!loop) {\n        value = Math.max(\n          -((rawDataLength - 1) * size),\n          Math.min(value, 0),\n        );\n      }\n\n      let absoluteProgress = Math.abs(value / size);\n\n      if (value > 0)\n        absoluteProgress = rawDataLength - absoluteProgress;\n\n      if (onProgressChange)\n        runOnJS(onProgressChange)(value, absoluteProgress);\n    },\n    [loop, autoFillData, rawDataLength, onProgressChange],\n  );\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["useOnProgressChange.ts"],"names":["useOnProgressChange","opts","autoFillData","loop","offsetX","size","rawDataLength","onProgressChange","value","_value","Math","max","min","absoluteProgress","abs","computedOffsetXValueWithAutoFillData","runOnJS"],"mappings":"yGACA,8DAMA,2E,o0EAEO,QAASA,CAAAA,mBAAT,CACLC,IADK,CAQL,CACA,GAAQC,CAAAA,YAAR,CACQD,IADR,CAAQC,YAAR,CAAsBC,IAAtB,CACQF,IADR,CAAsBE,IAAtB,CAA4BC,OAA5B,CACQH,IADR,CAA4BG,OAA5B,CAAqCC,IAArC,CACQJ,IADR,CAAqCI,IAArC,CAA2CC,aAA3C,CACQL,IADR,CAA2CK,aAA3C,CAA0DC,gBAA1D,CACQN,IADR,CAA0DM,gBAA1D,CAGA,oGACE,oBAAMH,CAAAA,OAAO,CAACI,KAAd,EADF,sBArBKJ,OAqBL,2MAEGK,MAFH,CAEc,CACV,GAAID,CAAAA,KAAK,CAAG,mEAAqC,CAC/CA,KAAK,CAAEC,MADwC,CAE/CH,aAAa,CAAbA,aAF+C,CAG/CD,IAAI,CAAJA,IAH+C,CAI/CH,YAAY,CAAZA,YAJ+C,CAK/CC,IAAI,CAAJA,IAL+C,CAArC,CAAZ,CAQA,GAAI,CAACA,IAAL,CAAW,CACTK,KAAK,CAAGE,IAAI,CAACC,GAAL,CACN,EAAE,CAACL,aAAa,CAAG,CAAjB,EAAsBD,IAAxB,CADM,CAENK,IAAI,CAACE,GAAL,CAASJ,KAAT,CAAgB,CAAhB,CAFM,CAAR,CAID,CAED,GAAIK,CAAAA,gBAAgB,CAAGH,IAAI,CAACI,GAAL,CAASN,KAAK,CAAGH,IAAjB,CAAvB,CAEA,GAAIG,KAAK,CAAG,CAAZ,CACEK,gBAAgB,CAAGP,aAAa,CAAGO,gBAAnC,CAEF,GAAIN,gBAAJ,CACE,mCAAQA,gBAAR,EAA0BC,KAA1B,CAAiCK,gBAAjC,EACH,CAzBH,mDApBYE,8DAoBZ,eATkCT,aASlC,MAVwCD,IAUxC,cAhBEH,YAgBF,MAbKC,IAaL,kBAR8BI,gBAQ9B,SARsBS,8BAQtB,wIA0BE,CAACb,IAAD,CAAOD,YAAP,CAAqBI,aAArB,CAAoCC,gBAApC,CA1BF,EA4BD","sourcesContent":["import type Animated from \"react-native-reanimated\";\nimport {\n  runOnJS,\n  useAnimatedReaction,\n} from \"react-native-reanimated\";\n\nimport type { TCarouselProps } from \"../types\";\nimport { computedOffsetXValueWithAutoFillData } from \"../utils/computedWithAutoFillData\";\n\nexport function useOnProgressChange(\n  opts: {\n    size: number\n    autoFillData: boolean\n    loop: boolean\n    offsetX: Animated.SharedValue<number>\n    rawDataLength: number\n  } & Pick<TCarouselProps, \"onProgressChange\">,\n) {\n  const { autoFillData, loop, offsetX, size, rawDataLength, onProgressChange }\n        = opts;\n\n  useAnimatedReaction(\n    () => offsetX.value,\n    (_value) => {\n      let value = computedOffsetXValueWithAutoFillData({\n        value: _value,\n        rawDataLength,\n        size,\n        autoFillData,\n        loop,\n      });\n\n      if (!loop) {\n        value = Math.max(\n          -((rawDataLength - 1) * size),\n          Math.min(value, 0),\n        );\n      }\n\n      let absoluteProgress = Math.abs(value / size);\n\n      if (value > 0)\n        absoluteProgress = rawDataLength - absoluteProgress;\n\n      if (onProgressChange)\n        runOnJS(onProgressChange)(value, absoluteProgress);\n    },\n    [loop, autoFillData, rawDataLength, onProgressChange],\n  );\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useVisibleRanges.js b/lib/commonjs/hooks/useVisibleRanges.js
index e7f2daad87483141e2c58a4828cd34da9dea9e60..e305c01fcced73f78d782a41630725222e4ec919 100644
--- a/lib/commonjs/hooks/useVisibleRanges.js
+++ b/lib/commonjs/hooks/useVisibleRanges.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.useVisibleRanges=useVisibleRanges;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_1686155145629_init_data={code:"function anonymous() {\n  const {\n    windowSize,\n    translation,\n    viewSize,\n    total\n  } = this._closure;\n  const positiveCount = Math.round(windowSize / 2);\n  const negativeCount = windowSize - positiveCount;\n  let curIndex = Math.round(-translation.value / viewSize);\n  curIndex = curIndex < 0 ? curIndex % total + total : curIndex;\n  const negativeRange = [(curIndex - negativeCount + total) % total, (curIndex - 1 + total) % total];\n  const positiveRange = [(curIndex + total) % total, (curIndex + positiveCount + total) % total];\n  if (negativeRange[0] < total && negativeRange[0] > negativeRange[1]) {\n    negativeRange[1] = total - 1;\n    positiveRange[0] = 0;\n  }\n  if (positiveRange[0] > positiveRange[1]) {\n    negativeRange[1] = total - 1;\n    positiveRange[0] = 0;\n  }\n  return {\n    negativeRange: negativeRange,\n    positiveRange: positiveRange\n  };\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useVisibleRanges.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"windowSize\",\"translation\",\"viewSize\",\"total\",\"_closure\",\"positiveCount\",\"Math\",\"round\",\"negativeCount\",\"curIndex\",\"value\",\"negativeRange\",\"positiveRange\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/hooks/useVisibleRanges.tsx\"],\"mappings\":\"AAuBiC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,UAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC;EAAA,SAAAC,QAAA;EACnC,MAAMC,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACP,UAAU,GAAG,CAAC,CAAC;EAChD,MAAMQ,aAAa,GAAGR,UAAU,GAAGK,aAAa;EAChD,IAAII,QAAQ,GAAGH,IAAI,CAACC,KAAK,CAAC,CAACN,WAAW,CAACS,KAAK,GAAGR,QAAQ,CAAC;EACxDO,QAAQ,GAAGA,QAAQ,GAAG,CAAC,GAAIA,QAAQ,GAAGN,KAAK,GAAIA,KAAK,GAAGM,QAAQ;EAC/D,MAAME,aAAa,GAAG,CACpB,CAACF,QAAQ,GAAGD,aAAa,GAAGL,KAAK,IAAIA,KAAK,EAC1C,CAACM,QAAQ,GAAG,CAAC,GAAGN,KAAK,IAAIA,KAAK,CAC/B;EACD,MAAMS,aAAa,GAAG,CACpB,CAACH,QAAQ,GAAGN,KAAK,IAAIA,KAAK,EAC1B,CAACM,QAAQ,GAAGJ,aAAa,GAAGF,KAAK,IAAIA,KAAK,CAC3C;EACD,IAAIQ,aAAa,CAAC,CAAC,CAAC,GAAGR,KAAK,IAAIQ,aAAa,CAAC,CAAC,CAAC,GAAGA,aAAa,CAAC,CAAC,CAAC,EAAE;IACnEA,aAAa,CAAC,CAAC,CAAC,GAAGR,KAAK,GAAG,CAAC;IAC5BS,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC;EACtB;EACA,IAAIA,aAAa,CAAC,CAAC,CAAC,GAAGA,aAAa,CAAC,CAAC,CAAC,EAAE;IACvCD,aAAa,CAAC,CAAC,CAAC,GAAGR,KAAK,GAAG,CAAC;IAC5BS,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC;EACtB;EACA,OAAO;IAAED,aAAa,EAAbA,aAAa;IAAEC,aAAA,EAAAA;EAAc,CAAC;AACzC\"}"};function useVisibleRanges(options){var _options$total=options.total,total=_options$total===void 0?0:_options$total,viewSize=options.viewSize,translation=options.translation,_options$windowSize=options.windowSize,_windowSize=_options$windowSize===void 0?0:_options$windowSize;var windowSize=total<=_windowSize?total:_windowSize;var ranges=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-5,-27];var _f=function _f(){var positiveCount=Math.round(windowSize/2);var negativeCount=windowSize-positiveCount;var curIndex=Math.round(-translation.value/viewSize);curIndex=curIndex<0?curIndex%total+total:curIndex;var negativeRange=[(curIndex-negativeCount+total)%total,(curIndex-1+total)%total];var positiveRange=[(curIndex+total)%total,(curIndex+positiveCount+total)%total];if(negativeRange[0]<total&&negativeRange[0]>negativeRange[1]){negativeRange[1]=total-1;positiveRange[0]=0;}if(positiveRange[0]>positiveRange[1]){negativeRange[1]=total-1;positiveRange[0]=0;}return{negativeRange:negativeRange,positiveRange:positiveRange};};_f._closure={windowSize:windowSize,translation:translation,viewSize:viewSize,total:total};_f.__initData=_worklet_1686155145629_init_data;_f.__workletHash=1686155145629;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[total,windowSize,translation]);return ranges;}
+Object.defineProperty(exports,"__esModule",{value:true});exports.useVisibleRanges=useVisibleRanges;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_1686155145629_init_data={code:"function anonymous() {\n  const {\n    windowSize,\n    translation,\n    viewSize,\n    total\n  } = this._closure;\n  const positiveCount = Math.round(windowSize / 2);\n  const negativeCount = windowSize - positiveCount;\n  let curIndex = Math.round(-translation.value / viewSize);\n  curIndex = curIndex < 0 ? curIndex % total + total : curIndex;\n  const negativeRange = [(curIndex - negativeCount + total) % total, (curIndex - 1 + total) % total];\n  const positiveRange = [(curIndex + total) % total, (curIndex + positiveCount + total) % total];\n  if (negativeRange[0] < total && negativeRange[0] > negativeRange[1]) {\n    negativeRange[1] = total - 1;\n    positiveRange[0] = 0;\n  }\n  if (positiveRange[0] > positiveRange[1]) {\n    negativeRange[1] = total - 1;\n    positiveRange[0] = 0;\n  }\n  return {\n    negativeRange: negativeRange,\n    positiveRange: positiveRange\n  };\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/hooks/useVisibleRanges.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"windowSize\",\"translation\",\"viewSize\",\"total\",\"_closure\",\"positiveCount\",\"Math\",\"round\",\"negativeCount\",\"curIndex\",\"value\",\"negativeRange\",\"positiveRange\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/hooks/useVisibleRanges.tsx\"],\"mappings\":\"AAuBiC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,UAAA;IAAAC,WAAA;IAAAC,QAAA;IAAAC;EAAA,SAAAC,QAAA;EACnC,MAAMC,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACP,UAAU,GAAG,CAAC,CAAC;EAChD,MAAMQ,aAAa,GAAGR,UAAU,GAAGK,aAAa;EAChD,IAAII,QAAQ,GAAGH,IAAI,CAACC,KAAK,CAAC,CAACN,WAAW,CAACS,KAAK,GAAGR,QAAQ,CAAC;EACxDO,QAAQ,GAAGA,QAAQ,GAAG,CAAC,GAAIA,QAAQ,GAAGN,KAAK,GAAIA,KAAK,GAAGM,QAAQ;EAC/D,MAAME,aAAa,GAAG,CACpB,CAACF,QAAQ,GAAGD,aAAa,GAAGL,KAAK,IAAIA,KAAK,EAC1C,CAACM,QAAQ,GAAG,CAAC,GAAGN,KAAK,IAAIA,KAAK,CAC/B;EACD,MAAMS,aAAa,GAAG,CACpB,CAACH,QAAQ,GAAGN,KAAK,IAAIA,KAAK,EAC1B,CAACM,QAAQ,GAAGJ,aAAa,GAAGF,KAAK,IAAIA,KAAK,CAC3C;EACD,IAAIQ,aAAa,CAAC,CAAC,CAAC,GAAGR,KAAK,IAAIQ,aAAa,CAAC,CAAC,CAAC,GAAGA,aAAa,CAAC,CAAC,CAAC,EAAE;IACnEA,aAAa,CAAC,CAAC,CAAC,GAAGR,KAAK,GAAG,CAAC;IAC5BS,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC;EACtB;EACA,IAAIA,aAAa,CAAC,CAAC,CAAC,GAAGA,aAAa,CAAC,CAAC,CAAC,EAAE;IACvCD,aAAa,CAAC,CAAC,CAAC,GAAGR,KAAK,GAAG,CAAC;IAC5BS,aAAa,CAAC,CAAC,CAAC,GAAG,CAAC;EACtB;EACA,OAAO;IAAED,aAAa,EAAbA,aAAa;IAAEC,aAAA,EAAAA;EAAc,CAAC;AACzC\"}"};function useVisibleRanges(options){var _options$total=options.total,total=_options$total===void 0?0:_options$total,viewSize=options.viewSize,translation=options.translation,_options$windowSize=options.windowSize,_windowSize=_options$windowSize===void 0?0:_options$windowSize;var windowSize=total<=_windowSize?total:_windowSize;var ranges=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-5,-27];var _f=function _f(){var positiveCount=Math.round(windowSize/2);var negativeCount=windowSize-positiveCount;var curIndex=Math.round(-translation.value/viewSize);curIndex=curIndex<0?curIndex%total+total:curIndex;var negativeRange=[(curIndex-negativeCount+total)%total,(curIndex-1+total)%total];var positiveRange=[(curIndex+total)%total,(curIndex+positiveCount+total)%total];if(negativeRange[0]<total&&negativeRange[0]>negativeRange[1]){negativeRange[1]=total-1;positiveRange[0]=0;}if(positiveRange[0]>positiveRange[1]){negativeRange[1]=total-1;positiveRange[0]=0;}return{negativeRange:negativeRange,positiveRange:positiveRange};};_f._closure={windowSize:windowSize,translation:translation,viewSize:viewSize,total:total};_f.__initData=_worklet_1686155145629_init_data;_f.__workletHash=1686155145629;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[total,windowSize,translation]);return ranges;}
 //# sourceMappingURL=useVisibleRanges.js.map
\ No newline at end of file
diff --git a/lib/commonjs/hooks/useVisibleRanges.js.map b/lib/commonjs/hooks/useVisibleRanges.js.map
index 690c68c77f3373fe39cabf358f910653c479d7e5..6500416a34dec397c4b94ef6f778d24db773542e 100644
--- a/lib/commonjs/hooks/useVisibleRanges.js.map
+++ b/lib/commonjs/hooks/useVisibleRanges.js.map
@@ -1 +1 @@
-{"version":3,"sources":["useVisibleRanges.tsx"],"names":["useVisibleRanges","options","total","viewSize","translation","windowSize","_windowSize","ranges","positiveCount","Math","round","negativeCount","curIndex","value","negativeRange","positiveRange"],"mappings":"mGACA,8D,m5EAOO,QAASA,CAAAA,gBAAT,CAA0BC,OAA1B,CAKY,CACjB,mBAKIA,OALJ,CACEC,KADF,CACEA,KADF,yBACU,CADV,gBAEEC,QAFF,CAKIF,OALJ,CAEEE,QAFF,CAGEC,WAHF,CAKIH,OALJ,CAGEG,WAHF,qBAKIH,OALJ,CAIEI,UAJF,CAIcC,WAJd,8BAI4B,CAJ5B,qBAOA,GAAMD,CAAAA,UAAU,CAAGH,KAAK,EAAII,WAAT,CAAuBJ,KAAvB,CAA+BI,WAAlD,CAEA,GAAMC,CAAAA,MAAM,CAAG,6GAAsB,CACnC,GAAMC,CAAAA,aAAa,CAAGC,IAAI,CAACC,KAAL,CAAWL,UAAU,CAAG,CAAxB,CAAtB,CACA,GAAMM,CAAAA,aAAa,CAAGN,UAAU,CAAGG,aAAnC,CACA,GAAII,CAAAA,QAAQ,CAAGH,IAAI,CAACC,KAAL,CAAW,CAACN,WAAW,CAACS,KAAb,CAAqBV,QAAhC,CAAf,CACAS,QAAQ,CAAGA,QAAQ,CAAG,CAAX,CAAgBA,QAAQ,CAAGV,KAAZ,CAAqBA,KAApC,CAA4CU,QAAvD,CACA,GAAME,CAAAA,aAAa,CAAG,CACpB,CAACF,QAAQ,CAAGD,aAAX,CAA2BT,KAA5B,EAAqCA,KADjB,CAEpB,CAACU,QAAQ,CAAG,CAAX,CAAeV,KAAhB,EAAyBA,KAFL,CAAtB,CAIA,GAAMa,CAAAA,aAAa,CAAG,CACpB,CAACH,QAAQ,CAAGV,KAAZ,EAAqBA,KADD,CAEpB,CAACU,QAAQ,CAAGJ,aAAX,CAA2BN,KAA5B,EAAqCA,KAFjB,CAAtB,CAIA,GAAIY,aAAa,CAAC,CAAD,CAAb,CAAmBZ,KAAnB,EAA4BY,aAAa,CAAC,CAAD,CAAb,CAAmBA,aAAa,CAAC,CAAD,CAAhE,CAAqE,CACnEA,aAAa,CAAC,CAAD,CAAb,CAAmBZ,KAAK,CAAG,CAA3B,CACAa,aAAa,CAAC,CAAD,CAAb,CAAmB,CAAnB,CACD,CACD,GAAIA,aAAa,CAAC,CAAD,CAAb,CAAmBA,aAAa,CAAC,CAAD,CAApC,CAAyC,CACvCD,aAAa,CAAC,CAAD,CAAb,CAAmBZ,KAAK,CAAG,CAA3B,CACAa,aAAa,CAAC,CAAD,CAAb,CAAmB,CAAnB,CACD,CACD,MAAO,CAAED,aAAa,CAAbA,aAAF,CAAiBC,aAAa,CAAbA,aAAjB,CAAP,CACD,CAtBc,yBArBOV,UAqBP,aApBYD,WAoBZ,UApBgCD,QAoBhC,OAXMD,KAWN,wIAsBZ,CAACA,KAAD,CAAQG,UAAR,CAAoBD,WAApB,CAtBY,CAAf,CAwBA,MAAOG,CAAAA,MAAP,CACD","sourcesContent":["import type Animated from \"react-native-reanimated\";\nimport { useDerivedValue } from \"react-native-reanimated\";\n\nexport type IVisibleRanges = Animated.SharedValue<{\n  negativeRange: number[]\n  positiveRange: number[]\n}>;\n\nexport function useVisibleRanges(options: {\n  total: number\n  viewSize: number\n  windowSize?: number\n  translation: Animated.SharedValue<number>\n}): IVisibleRanges {\n  const {\n    total = 0,\n    viewSize,\n    translation,\n    windowSize: _windowSize = 0,\n  } = options;\n\n  const windowSize = total <= _windowSize ? total : _windowSize;\n\n  const ranges = useDerivedValue(() => {\n    const positiveCount = Math.round(windowSize / 2);\n    const negativeCount = windowSize - positiveCount;\n    let curIndex = Math.round(-translation.value / viewSize);\n    curIndex = curIndex < 0 ? (curIndex % total) + total : curIndex;\n    const negativeRange = [\n      (curIndex - negativeCount + total) % total,\n      (curIndex - 1 + total) % total,\n    ];\n    const positiveRange = [\n      (curIndex + total) % total,\n      (curIndex + positiveCount + total) % total,\n    ];\n    if (negativeRange[0] < total && negativeRange[0] > negativeRange[1]) {\n      negativeRange[1] = total - 1;\n      positiveRange[0] = 0;\n    }\n    if (positiveRange[0] > positiveRange[1]) {\n      negativeRange[1] = total - 1;\n      positiveRange[0] = 0;\n    }\n    return { negativeRange, positiveRange };\n  }, [total, windowSize, translation]);\n\n  return ranges;\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["useVisibleRanges.tsx"],"names":["useVisibleRanges","options","total","viewSize","translation","windowSize","_windowSize","ranges","positiveCount","Math","round","negativeCount","curIndex","value","negativeRange","positiveRange"],"mappings":"mGACA,8D,u0EAOO,QAASA,CAAAA,gBAAT,CAA0BC,OAA1B,CAKY,CACjB,mBAKIA,OALJ,CACEC,KADF,CACEA,KADF,yBACU,CADV,gBAEEC,QAFF,CAKIF,OALJ,CAEEE,QAFF,CAGEC,WAHF,CAKIH,OALJ,CAGEG,WAHF,qBAKIH,OALJ,CAIEI,UAJF,CAIcC,WAJd,8BAI4B,CAJ5B,qBAOA,GAAMD,CAAAA,UAAU,CAAGH,KAAK,EAAII,WAAT,CAAuBJ,KAAvB,CAA+BI,WAAlD,CAEA,GAAMC,CAAAA,MAAM,CAAG,6GAAsB,CACnC,GAAMC,CAAAA,aAAa,CAAGC,IAAI,CAACC,KAAL,CAAWL,UAAU,CAAG,CAAxB,CAAtB,CACA,GAAMM,CAAAA,aAAa,CAAGN,UAAU,CAAGG,aAAnC,CACA,GAAII,CAAAA,QAAQ,CAAGH,IAAI,CAACC,KAAL,CAAW,CAACN,WAAW,CAACS,KAAb,CAAqBV,QAAhC,CAAf,CACAS,QAAQ,CAAGA,QAAQ,CAAG,CAAX,CAAgBA,QAAQ,CAAGV,KAAZ,CAAqBA,KAApC,CAA4CU,QAAvD,CACA,GAAME,CAAAA,aAAa,CAAG,CACpB,CAACF,QAAQ,CAAGD,aAAX,CAA2BT,KAA5B,EAAqCA,KADjB,CAEpB,CAACU,QAAQ,CAAG,CAAX,CAAeV,KAAhB,EAAyBA,KAFL,CAAtB,CAIA,GAAMa,CAAAA,aAAa,CAAG,CACpB,CAACH,QAAQ,CAAGV,KAAZ,EAAqBA,KADD,CAEpB,CAACU,QAAQ,CAAGJ,aAAX,CAA2BN,KAA5B,EAAqCA,KAFjB,CAAtB,CAIA,GAAIY,aAAa,CAAC,CAAD,CAAb,CAAmBZ,KAAnB,EAA4BY,aAAa,CAAC,CAAD,CAAb,CAAmBA,aAAa,CAAC,CAAD,CAAhE,CAAqE,CACnEA,aAAa,CAAC,CAAD,CAAb,CAAmBZ,KAAK,CAAG,CAA3B,CACAa,aAAa,CAAC,CAAD,CAAb,CAAmB,CAAnB,CACD,CACD,GAAIA,aAAa,CAAC,CAAD,CAAb,CAAmBA,aAAa,CAAC,CAAD,CAApC,CAAyC,CACvCD,aAAa,CAAC,CAAD,CAAb,CAAmBZ,KAAK,CAAG,CAA3B,CACAa,aAAa,CAAC,CAAD,CAAb,CAAmB,CAAnB,CACD,CACD,MAAO,CAAED,aAAa,CAAbA,aAAF,CAAiBC,aAAa,CAAbA,aAAjB,CAAP,CACD,CAtBc,yBArBOV,UAqBP,aApBYD,WAoBZ,UApBgCD,QAoBhC,OAXMD,KAWN,wIAsBZ,CAACA,KAAD,CAAQG,UAAR,CAAoBD,WAApB,CAtBY,CAAf,CAwBA,MAAOG,CAAAA,MAAP,CACD","sourcesContent":["import type Animated from \"react-native-reanimated\";\nimport { useDerivedValue } from \"react-native-reanimated\";\n\nexport type IVisibleRanges = Animated.SharedValue<{\n  negativeRange: number[]\n  positiveRange: number[]\n}>;\n\nexport function useVisibleRanges(options: {\n  total: number\n  viewSize: number\n  windowSize?: number\n  translation: Animated.SharedValue<number>\n}): IVisibleRanges {\n  const {\n    total = 0,\n    viewSize,\n    translation,\n    windowSize: _windowSize = 0,\n  } = options;\n\n  const windowSize = total <= _windowSize ? total : _windowSize;\n\n  const ranges = useDerivedValue(() => {\n    const positiveCount = Math.round(windowSize / 2);\n    const negativeCount = windowSize - positiveCount;\n    let curIndex = Math.round(-translation.value / viewSize);\n    curIndex = curIndex < 0 ? (curIndex % total) + total : curIndex;\n    const negativeRange = [\n      (curIndex - negativeCount + total) % total,\n      (curIndex - 1 + total) % total,\n    ];\n    const positiveRange = [\n      (curIndex + total) % total,\n      (curIndex + positiveCount + total) % total,\n    ];\n    if (negativeRange[0] < total && negativeRange[0] > negativeRange[1]) {\n      negativeRange[1] = total - 1;\n      positiveRange[0] = 0;\n    }\n    if (positiveRange[0] > positiveRange[1]) {\n      negativeRange[1] = total - 1;\n      positiveRange[0] = 0;\n    }\n    return { negativeRange, positiveRange };\n  }, [total, windowSize, translation]);\n\n  return ranges;\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/layouts/BaseLayout.js b/lib/commonjs/layouts/BaseLayout.js
index d65bb39e1b88e6a4d9a8e1f4e79a392ca2437c4f..9e643e0b6f415279fe2c4442d651e7e153d49612 100644
--- a/lib/commonjs/layouts/BaseLayout.js
+++ b/lib/commonjs/layouts/BaseLayout.js
@@ -1,2 +1,2 @@
-var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.BaseLayout=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireDefault(require("react"));var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _useCheckMounted=require("../hooks/useCheckMounted");var _useOffsetX=require("../hooks/useOffsetX");var _LazyView=require("../LazyView");var _store=require("../store");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_3217166169285_init_data={code:"function anonymous() {\n  const {\n    x,\n    size\n  } = this._closure;\n  return x.value / size;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"x\",\"size\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\"],\"mappings\":\"AAyEyC,SAAAA,UAAA;EAAA;IAAAC,CAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAOF,CAAC,CAAAG,KAAK,GAAGF,IAAA;AAAA\"}"};var _worklet_11301275444738_init_data={code:"function anonymous() {\n  const {\n    animationStyle,\n    x,\n    size\n  } = this._closure;\n  return animationStyle(x.value / size);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"animationStyle\",\"x\",\"size\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\"],\"mappings\":\"AA2EI,SAAAA,UAAA;EAAA;IAAAC,cAAA;IAAAC,CAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMH,cAAe,CAACC,CAAC,CAAAG,KAAK,GAAGF,IAAI;AAAA\"}"};var _worklet_11113070436332_init_data={code:"function anonymous() {\n  const {\n    visibleRanges\n  } = this._closure;\n  return visibleRanges.value;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"visibleRanges\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\"],\"mappings\":\"AA2FI,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,aAAc,CAAAE,KAAA;AAAA\"}"};var _worklet_15128277149381_init_data={code:"function anonymous() {\n  const {\n    runOnJS,\n    updateView,\n    visibleRanges\n  } = this._closure;\n  runOnJS(updateView)(visibleRanges.value.negativeRange, visibleRanges.value.positiveRange);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"runOnJS\",\"updateView\",\"visibleRanges\",\"_closure\",\"value\",\"negativeRange\",\"positiveRange\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\"],\"mappings\":\"AA4FI,SAAAA,SAAMA,CAAA;EAAA;IAAAC,OAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EACJH,OAAO,CAACC,UAAU,CAAC,CACjBC,aAAa,CAACE,KAAK,CAACC,aAAa,EACjCH,aAAa,CAACE,KAAK,CAACE,aACtB,CAAC;AACH\"}"};var BaseLayout=function BaseLayout(props){var mounted=(0,_useCheckMounted.useCheckMounted)();var handlerOffset=props.handlerOffset,index=props.index,children=props.children,visibleRanges=props.visibleRanges,animationStyle=props.animationStyle;var context=_react.default.useContext(_store.CTX);var _context$props=context.props,loop=_context$props.loop,dataLength=_context$props.dataLength,width=_context$props.width,height=_context$props.height,vertical=_context$props.vertical,customConfig=_context$props.customConfig,mode=_context$props.mode,modeConfig=_context$props.modeConfig;var size=vertical?height:width;var _React$useState=_react.default.useState(false),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),shouldUpdate=_React$useState2[0],setShouldUpdate=_React$useState2[1];var offsetXConfig=Object.assign({handlerOffset:handlerOffset,index:index,size:size,dataLength:dataLength,loop:loop},typeof customConfig==="function"?customConfig():{});if(mode==="horizontal-stack"){var _ref=modeConfig,snapDirection=_ref.snapDirection,showLength=_ref.showLength;offsetXConfig={handlerOffset:handlerOffset,index:index,size:size,dataLength:dataLength,loop:loop,type:snapDirection==="right"?"negative":"positive",viewCount:showLength};}var x=(0,_useOffsetX.useOffsetX)(offsetXConfig,visibleRanges);var animationValue=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-3,-27];var _f=function _f(){return x.value/size;};_f._closure={x:x,size:size};_f.__initData=_worklet_3217166169285_init_data;_f.__workletHash=3217166169285;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[x,size]);var animatedStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _e=[new global.Error(),-4,-27];var _f=function _f(){return animationStyle(x.value/size);};_f._closure={animationStyle:animationStyle,x:x,size:size};_f.__initData=_worklet_11301275444738_init_data;_f.__workletHash=11301275444738;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[animationStyle]);var updateView=_react.default.useCallback(function(negativeRange,positiveRange){mounted.current&&setShouldUpdate(index>=negativeRange[0]&&index<=negativeRange[1]||index>=positiveRange[0]&&index<=positiveRange[1]);},[index,mounted]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return visibleRanges.value;};_f._closure={visibleRanges:visibleRanges};_f.__initData=_worklet_11113070436332_init_data;_f.__workletHash=11113070436332;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-4,-27];var _f=function _f(){(0,_reactNativeReanimated.runOnJS)(updateView)(visibleRanges.value.negativeRange,visibleRanges.value.positiveRange);};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,updateView:updateView,visibleRanges:visibleRanges};_f.__initData=_worklet_15128277149381_init_data;_f.__workletHash=15128277149381;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[visibleRanges.value]);return(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[{width:width||"100%",height:height||"100%",position:"absolute"},animatedStyle],testID:`__CAROUSEL_ITEM_${index}_${shouldUpdate?"READY":"NOT_READY"}__`,children:(0,_jsxRuntime.jsx)(_LazyView.LazyView,{shouldUpdate:shouldUpdate,children:children({animationValue:animationValue})})});};exports.BaseLayout=BaseLayout;
+var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.BaseLayout=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireDefault(require("react"));var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _useCheckMounted=require("../hooks/useCheckMounted");var _useOffsetX=require("../hooks/useOffsetX");var _LazyView=require("../LazyView");var _store=require("../store");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_3217166169285_init_data={code:"function anonymous() {\n  const {\n    x,\n    size\n  } = this._closure;\n  return x.value / size;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"x\",\"size\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\"],\"mappings\":\"AAyEyC,SAAAA,UAAA;EAAA;IAAAC,CAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAOF,CAAC,CAAAG,KAAK,GAAGF,IAAA;AAAA\"}"};var _worklet_11301275444738_init_data={code:"function anonymous() {\n  const {\n    animationStyle,\n    x,\n    size\n  } = this._closure;\n  return animationStyle(x.value / size);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"animationStyle\",\"x\",\"size\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\"],\"mappings\":\"AA2EI,SAAAA,UAAA;EAAA;IAAAC,cAAA;IAAAC,CAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMH,cAAe,CAACC,CAAC,CAAAG,KAAK,GAAGF,IAAI;AAAA\"}"};var _worklet_11113070436332_init_data={code:"function anonymous() {\n  const {\n    visibleRanges\n  } = this._closure;\n  return visibleRanges.value;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"visibleRanges\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\"],\"mappings\":\"AA2FI,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,aAAc,CAAAE,KAAA;AAAA\"}"};var _worklet_15128277149381_init_data={code:"function anonymous() {\n  const {\n    runOnJS,\n    updateView,\n    visibleRanges\n  } = this._closure;\n  runOnJS(updateView)(visibleRanges.value.negativeRange, visibleRanges.value.positiveRange);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"runOnJS\",\"updateView\",\"visibleRanges\",\"_closure\",\"value\",\"negativeRange\",\"positiveRange\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/BaseLayout.tsx\"],\"mappings\":\"AA4FI,SAAAA,SAAMA,CAAA;EAAA;IAAAC,OAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EACJH,OAAO,CAACC,UAAU,CAAC,CACjBC,aAAa,CAACE,KAAK,CAACC,aAAa,EACjCH,aAAa,CAACE,KAAK,CAACE,aACtB,CAAC;AACH\"}"};var BaseLayout=function BaseLayout(props){var mounted=(0,_useCheckMounted.useCheckMounted)();var handlerOffset=props.handlerOffset,index=props.index,children=props.children,visibleRanges=props.visibleRanges,animationStyle=props.animationStyle;var context=_react.default.useContext(_store.CTX);var _context$props=context.props,loop=_context$props.loop,dataLength=_context$props.dataLength,width=_context$props.width,height=_context$props.height,vertical=_context$props.vertical,customConfig=_context$props.customConfig,mode=_context$props.mode,modeConfig=_context$props.modeConfig;var size=vertical?height:width;var _React$useState=_react.default.useState(false),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),shouldUpdate=_React$useState2[0],setShouldUpdate=_React$useState2[1];var offsetXConfig=Object.assign({handlerOffset:handlerOffset,index:index,size:size,dataLength:dataLength,loop:loop},typeof customConfig==="function"?customConfig():{});if(mode==="horizontal-stack"){var _ref=modeConfig,snapDirection=_ref.snapDirection,showLength=_ref.showLength;offsetXConfig={handlerOffset:handlerOffset,index:index,size:size,dataLength:dataLength,loop:loop,type:snapDirection==="right"?"negative":"positive",viewCount:showLength};}var x=(0,_useOffsetX.useOffsetX)(offsetXConfig,visibleRanges);var animationValue=(0,_reactNativeReanimated.useDerivedValue)(function(){var _e=[new global.Error(),-3,-27];var _f=function _f(){return x.value/size;};_f._closure={x:x,size:size};_f.__initData=_worklet_3217166169285_init_data;_f.__workletHash=3217166169285;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[x,size]);var animatedStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _e=[new global.Error(),-4,-27];var _f=function _f(){return animationStyle(x.value/size);};_f._closure={animationStyle:animationStyle,x:x,size:size};_f.__initData=_worklet_11301275444738_init_data;_f.__workletHash=11301275444738;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[animationStyle]);var updateView=_react.default.useCallback(function(negativeRange,positiveRange){mounted.current&&setShouldUpdate(index>=negativeRange[0]&&index<=negativeRange[1]||index>=positiveRange[0]&&index<=positiveRange[1]);},[index,mounted]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return visibleRanges.value;};_f._closure={visibleRanges:visibleRanges};_f.__initData=_worklet_11113070436332_init_data;_f.__workletHash=11113070436332;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-4,-27];var _f=function _f(){(0,_reactNativeReanimated.runOnJS)(updateView)(visibleRanges.value.negativeRange,visibleRanges.value.positiveRange);};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,updateView:updateView,visibleRanges:visibleRanges};_f.__initData=_worklet_15128277149381_init_data;_f.__workletHash=15128277149381;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[visibleRanges.value]);return(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[{width:width||"100%",height:height||"100%",position:"absolute"},animatedStyle],testID:`__CAROUSEL_ITEM_${index}_${shouldUpdate?"READY":"NOT_READY"}__`,children:(0,_jsxRuntime.jsx)(_LazyView.LazyView,{shouldUpdate:shouldUpdate,children:children({animationValue:animationValue})})});};exports.BaseLayout=BaseLayout;
 //# sourceMappingURL=BaseLayout.js.map
\ No newline at end of file
diff --git a/lib/commonjs/layouts/BaseLayout.js.map b/lib/commonjs/layouts/BaseLayout.js.map
index ac24bfaf000544d3986e592f3072241fd7066e45..9d40b28f58726180f0a64c03a9668980558cd16e 100644
--- a/lib/commonjs/layouts/BaseLayout.js.map
+++ b/lib/commonjs/layouts/BaseLayout.js.map
@@ -1 +1 @@
-{"version":3,"sources":["BaseLayout.tsx"],"names":["BaseLayout","props","mounted","handlerOffset","index","children","visibleRanges","animationStyle","context","React","useContext","CTX","loop","dataLength","width","height","vertical","customConfig","mode","modeConfig","size","useState","shouldUpdate","setShouldUpdate","offsetXConfig","snapDirection","showLength","type","viewCount","x","animationValue","value","animatedStyle","updateView","useCallback","negativeRange","positiveRange","current","runOnJS","position"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport type { ViewStyle } from \"react-native\";\nimport type { AnimatedStyleProp } from \"react-native-reanimated\";\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  useDerivedValue,\n} from \"react-native-reanimated\";\n\nimport type { ILayoutConfig } from \"./stack\";\n\nimport { useCheckMounted } from \"../hooks/useCheckMounted\";\nimport type { IOpts } from \"../hooks/useOffsetX\";\nimport { useOffsetX } from \"../hooks/useOffsetX\";\nimport type { IVisibleRanges } from \"../hooks/useVisibleRanges\";\nimport { LazyView } from \"../LazyView\";\nimport { CTX } from \"../store\";\n\nexport type TAnimationStyle = (value: number) => AnimatedStyleProp<ViewStyle>;\n\nexport const BaseLayout: React.FC<{\n  index: number\n  handlerOffset: Animated.SharedValue<number>\n  visibleRanges: IVisibleRanges\n  animationStyle: TAnimationStyle\n  children: (ctx: {\n    animationValue: Animated.SharedValue<number>\n  }) => React.ReactElement\n}> = (props) => {\n  const mounted = useCheckMounted();\n  const { handlerOffset, index, children, visibleRanges, animationStyle }\n  = props;\n\n  const context = React.useContext(CTX);\n  const {\n    props: {\n      loop,\n      dataLength,\n      width,\n      height,\n      vertical,\n      customConfig,\n      mode,\n      modeConfig,\n    },\n  } = context;\n  const size = vertical ? height : width;\n  const [shouldUpdate, setShouldUpdate] = React.useState(false);\n  let offsetXConfig: IOpts = {\n    handlerOffset,\n    index,\n    size,\n    dataLength,\n    loop,\n    ...(typeof customConfig === \"function\" ? customConfig() : {}),\n  };\n\n  if (mode === \"horizontal-stack\") {\n    const { snapDirection, showLength } = modeConfig as ILayoutConfig;\n\n    offsetXConfig = {\n      handlerOffset,\n      index,\n      size,\n      dataLength,\n      loop,\n      type: snapDirection === \"right\" ? \"negative\" : \"positive\",\n      viewCount: showLength,\n    };\n  }\n\n  const x = useOffsetX(offsetXConfig, visibleRanges);\n  const animationValue = useDerivedValue(() => x.value / size, [x, size]);\n  const animatedStyle = useAnimatedStyle(\n    () => animationStyle(x.value / size),\n    [animationStyle],\n  );\n\n  const updateView = React.useCallback(\n    (negativeRange: number[], positiveRange: number[]) => {\n      mounted.current\n                && setShouldUpdate(\n                  (index >= negativeRange[0] && index <= negativeRange[1])\n                        || (index >= positiveRange[0] && index <= positiveRange[1]),\n                );\n    },\n    [index, mounted],\n  );\n\n  useAnimatedReaction(\n    () => visibleRanges.value,\n    () => {\n      runOnJS(updateView)(\n        visibleRanges.value.negativeRange,\n        visibleRanges.value.positiveRange,\n      );\n    },\n    [visibleRanges.value],\n  );\n\n  return (\n    <Animated.View\n      style={[\n        {\n          width: width || \"100%\",\n          height: height || \"100%\",\n          position: \"absolute\",\n        },\n        animatedStyle,\n      ]}\n      /**\n       * We use this testID to know when the carousel item is ready to be tested in test.\n       * e.g.\n       *  The testID of first item will be changed to __CAROUSEL_ITEM_0_READY__ from __CAROUSEL_ITEM_0_NOT_READY__ when the item is ready.\n       * */\n      testID={`__CAROUSEL_ITEM_${index}_${shouldUpdate ? \"READY\" : \"NOT_READY\"}__`}\n    >\n      <LazyView shouldUpdate={shouldUpdate}>\n        {children({ animationValue })}\n      </LazyView>\n    </Animated.View>\n  );\n};\n"]}
\ No newline at end of file
+{"version":3,"sources":["BaseLayout.tsx"],"names":["BaseLayout","props","mounted","handlerOffset","index","children","visibleRanges","animationStyle","context","React","useContext","CTX","loop","dataLength","width","height","vertical","customConfig","mode","modeConfig","size","useState","shouldUpdate","setShouldUpdate","offsetXConfig","snapDirection","showLength","type","viewCount","x","animationValue","value","animatedStyle","updateView","useCallback","negativeRange","positiveRange","current","runOnJS","position"],"mappings":"kQAAA,oDAGA,uFASA,yDAEA,+CAEA,qCACA,+B,qhHAIO,GAAMA,CAAAA,UAQX,CAAG,QARQA,CAAAA,UAQR,CAACC,KAAD,CAAW,CACd,GAAMC,CAAAA,OAAO,CAAG,sCAAhB,CACA,GAAQC,CAAAA,aAAR,CACEF,KADF,CAAQE,aAAR,CAAuBC,KAAvB,CACEH,KADF,CAAuBG,KAAvB,CAA8BC,QAA9B,CACEJ,KADF,CAA8BI,QAA9B,CAAwCC,aAAxC,CACEL,KADF,CAAwCK,aAAxC,CAAuDC,cAAvD,CACEN,KADF,CAAuDM,cAAvD,CAGA,GAAMC,CAAAA,OAAO,CAAGC,eAAMC,UAAN,CAAiBC,UAAjB,CAAhB,CACA,mBAWIH,OAXJ,CACEP,KADF,CAEIW,IAFJ,gBAEIA,IAFJ,CAGIC,UAHJ,gBAGIA,UAHJ,CAIIC,KAJJ,gBAIIA,KAJJ,CAKIC,MALJ,gBAKIA,MALJ,CAMIC,QANJ,gBAMIA,QANJ,CAOIC,YAPJ,gBAOIA,YAPJ,CAQIC,IARJ,gBAQIA,IARJ,CASIC,UATJ,gBASIA,UATJ,CAYA,GAAMC,CAAAA,IAAI,CAAGJ,QAAQ,CAAGD,MAAH,CAAYD,KAAjC,CACA,oBAAwCL,eAAMY,QAAN,CAAe,KAAf,CAAxC,iEAAOC,YAAP,qBAAqBC,eAArB,qBACA,GAAIC,CAAAA,aAAoB,gBACtBrB,aAAa,CAAbA,aADsB,CAEtBC,KAAK,CAALA,KAFsB,CAGtBgB,IAAI,CAAJA,IAHsB,CAItBP,UAAU,CAAVA,UAJsB,CAKtBD,IAAI,CAAJA,IALsB,EAMlB,MAAOK,CAAAA,YAAP,GAAwB,UAAxB,CAAqCA,YAAY,EAAjD,CAAsD,EANpC,CAAxB,CASA,GAAIC,IAAI,GAAK,kBAAb,CAAiC,CAC/B,SAAsCC,UAAtC,CAAQM,aAAR,MAAQA,aAAR,CAAuBC,UAAvB,MAAuBA,UAAvB,CAEAF,aAAa,CAAG,CACdrB,aAAa,CAAbA,aADc,CAEdC,KAAK,CAALA,KAFc,CAGdgB,IAAI,CAAJA,IAHc,CAIdP,UAAU,CAAVA,UAJc,CAKdD,IAAI,CAAJA,IALc,CAMde,IAAI,CAAEF,aAAa,GAAK,OAAlB,CAA4B,UAA5B,CAAyC,UANjC,CAOdG,SAAS,CAAEF,UAPG,CAAhB,CASD,CAED,GAAMG,CAAAA,CAAC,CAAG,2BAAWL,aAAX,CAA0BlB,aAA1B,CAAV,CACA,GAAMwB,CAAAA,cAAc,CAAG,gGAAgB,oBAAMD,CAAAA,CAAC,CAACE,KAAF,CAAUX,IAAhB,EAAhB,gBAzElBS,CAyEkB,MAzERT,IAyEQ,wIAAsC,CAACS,CAAD,CAAIT,IAAJ,CAAtC,CAAvB,CACA,GAAMY,CAAAA,aAAa,CAAG,iGACpB,oBAAMzB,CAAAA,cAAc,CAACsB,CAAC,CAACE,KAAF,CAAUX,IAAX,CAApB,EADoB,6BA1EjBb,cA0EiB,GA1EFsB,CA0EE,MA1EQT,IA0ER,0IAEpB,CAACb,cAAD,CAFoB,CAAtB,CAKA,GAAM0B,CAAAA,UAAU,CAAGxB,eAAMyB,WAAN,CACjB,SAACC,aAAD,CAA0BC,aAA1B,CAAsD,CACpDlC,OAAO,CAACmC,OAAR,EACad,eAAe,CACfnB,KAAK,EAAI+B,aAAa,CAAC,CAAD,CAAtB,EAA6B/B,KAAK,EAAI+B,aAAa,CAAC,CAAD,CAApD,EACU/B,KAAK,EAAIgC,aAAa,CAAC,CAAD,CAAtB,EAA6BhC,KAAK,EAAIgC,aAAa,CAAC,CAAD,CAF7C,CAD5B,CAKD,CAPgB,CAQjB,CAAChC,KAAD,CAAQF,OAAR,CARiB,CAAnB,CAWA,oGACE,oBAAMI,CAAAA,aAAa,CAACyB,KAApB,EADF,4BA1FKzB,aA0FL,4MAEQ,CACJ,mCAAQ2B,UAAR,EACE3B,aAAa,CAACyB,KAAd,CAAoBI,aADtB,CAEE7B,aAAa,CAACyB,KAAd,CAAoBK,aAFtB,EAID,CAPH,sBAzFAE,8BAyFA,YAzFQL,UAyFR,eAzFuD3B,aAyFvD,0IAQE,CAACA,aAAa,CAACyB,KAAf,CARF,EAWA,MACE,oBAAC,8BAAD,CAAU,IAAV,EACE,KAAK,CAAE,CACL,CACEjB,KAAK,CAAEA,KAAK,EAAI,MADlB,CAEEC,MAAM,CAAEA,MAAM,EAAI,MAFpB,CAGEwB,QAAQ,CAAE,UAHZ,CADK,CAMLP,aANK,CADT,CAcE,MAAM,CAAG,mBAAkB5B,KAAM,IAAGkB,YAAY,CAAG,OAAH,CAAa,WAAY,IAd3E,UAgBE,oBAAC,kBAAD,EAAU,YAAY,CAAEA,YAAxB,UACGjB,QAAQ,CAAC,CAAEyB,cAAc,CAAdA,cAAF,CAAD,CADX,EAhBF,EADF,CAsBD,CAtGM,C","sourcesContent":["import React from \"react\";\nimport type { ViewStyle } from \"react-native\";\nimport type { AnimatedStyleProp } from \"react-native-reanimated\";\nimport Animated, {\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n  useDerivedValue,\n} from \"react-native-reanimated\";\n\nimport type { ILayoutConfig } from \"./stack\";\n\nimport { useCheckMounted } from \"../hooks/useCheckMounted\";\nimport type { IOpts } from \"../hooks/useOffsetX\";\nimport { useOffsetX } from \"../hooks/useOffsetX\";\nimport type { IVisibleRanges } from \"../hooks/useVisibleRanges\";\nimport { LazyView } from \"../LazyView\";\nimport { CTX } from \"../store\";\n\nexport type TAnimationStyle = (value: number) => AnimatedStyleProp<ViewStyle>;\n\nexport const BaseLayout: React.FC<{\n  index: number\n  handlerOffset: Animated.SharedValue<number>\n  visibleRanges: IVisibleRanges\n  animationStyle: TAnimationStyle\n  children: (ctx: {\n    animationValue: Animated.SharedValue<number>\n  }) => React.ReactElement\n}> = (props) => {\n  const mounted = useCheckMounted();\n  const { handlerOffset, index, children, visibleRanges, animationStyle }\n  = props;\n\n  const context = React.useContext(CTX);\n  const {\n    props: {\n      loop,\n      dataLength,\n      width,\n      height,\n      vertical,\n      customConfig,\n      mode,\n      modeConfig,\n    },\n  } = context;\n  const size = vertical ? height : width;\n  const [shouldUpdate, setShouldUpdate] = React.useState(false);\n  let offsetXConfig: IOpts = {\n    handlerOffset,\n    index,\n    size,\n    dataLength,\n    loop,\n    ...(typeof customConfig === \"function\" ? customConfig() : {}),\n  };\n\n  if (mode === \"horizontal-stack\") {\n    const { snapDirection, showLength } = modeConfig as ILayoutConfig;\n\n    offsetXConfig = {\n      handlerOffset,\n      index,\n      size,\n      dataLength,\n      loop,\n      type: snapDirection === \"right\" ? \"negative\" : \"positive\",\n      viewCount: showLength,\n    };\n  }\n\n  const x = useOffsetX(offsetXConfig, visibleRanges);\n  const animationValue = useDerivedValue(() => x.value / size, [x, size]);\n  const animatedStyle = useAnimatedStyle(\n    () => animationStyle(x.value / size),\n    [animationStyle],\n  );\n\n  const updateView = React.useCallback(\n    (negativeRange: number[], positiveRange: number[]) => {\n      mounted.current\n                && setShouldUpdate(\n                  (index >= negativeRange[0] && index <= negativeRange[1])\n                        || (index >= positiveRange[0] && index <= positiveRange[1]),\n                );\n    },\n    [index, mounted],\n  );\n\n  useAnimatedReaction(\n    () => visibleRanges.value,\n    () => {\n      runOnJS(updateView)(\n        visibleRanges.value.negativeRange,\n        visibleRanges.value.positiveRange,\n      );\n    },\n    [visibleRanges.value],\n  );\n\n  return (\n    <Animated.View\n      style={[\n        {\n          width: width || \"100%\",\n          height: height || \"100%\",\n          position: \"absolute\",\n        },\n        animatedStyle,\n      ]}\n      /**\n       * We use this testID to know when the carousel item is ready to be tested in test.\n       * e.g.\n       *  The testID of first item will be changed to __CAROUSEL_ITEM_0_READY__ from __CAROUSEL_ITEM_0_NOT_READY__ when the item is ready.\n       * */\n      testID={`__CAROUSEL_ITEM_${index}_${shouldUpdate ? \"READY\" : \"NOT_READY\"}__`}\n    >\n      <LazyView shouldUpdate={shouldUpdate}>\n        {children({ animationValue })}\n      </LazyView>\n    </Animated.View>\n  );\n};\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/layouts/ParallaxLayout.js b/lib/commonjs/layouts/ParallaxLayout.js
index ae916c1271c9c59e2683ec18142ae5d52509f348..0bdba11b3bd732d4585db05aea59bf365253d471 100644
--- a/lib/commonjs/layouts/ParallaxLayout.js
+++ b/lib/commonjs/layouts/ParallaxLayout.js
@@ -1,2 +1,2 @@
-var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ParallaxLayout=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireDefault(require("react"));var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _useOffsetX=require("../hooks/useOffsetX");var _LazyView=require("../LazyView");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_2396750619736_init_data={code:"function anonymous() {\n  const {\n    x,\n    size,\n    interpolate,\n    parallaxScrollingOffset,\n    Extrapolate,\n    parallaxAdjacentItemScale,\n    parallaxScrollingScale,\n    vertical\n  } = this._closure;\n  const value = x.value / size;\n  const translate = interpolate(value, [-1, 0, 1], [-size + parallaxScrollingOffset, 0, size - parallaxScrollingOffset], Extrapolate.EXTEND);\n  const zIndex = interpolate(value, [-1, 0, 1], [0, size, 0], Extrapolate.CLAMP);\n  const scale = interpolate(value, [-1, 0, 1], [parallaxAdjacentItemScale, parallaxScrollingScale, parallaxAdjacentItemScale], Extrapolate.CLAMP);\n  return {\n    transform: [vertical ? {\n      translateY: translate\n    } : {\n      translateX: translate\n    }, {\n      scale: scale\n    }],\n    zIndex: zIndex\n  };\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"x\",\"size\",\"interpolate\",\"parallaxScrollingOffset\",\"Extrapolate\",\"parallaxAdjacentItemScale\",\"parallaxScrollingScale\",\"vertical\",\"_closure\",\"value\",\"translate\",\"EXTEND\",\"zIndex\",\"CLAMP\",\"scale\",\"transform\",\"translateY\",\"translateX\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx\"],\"mappings\":\"AAwDwC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,CAAA;IAAAC,IAAA;IAAAC,WAAA;IAAAC,uBAAA;IAAAC,WAAA;IAAAC,yBAAA;IAAAC,sBAAA;IAAAC;EAAA,SAAAC,QAAA;EAC1C,MAAMC,KAAK,GAAGT,CAAC,CAACS,KAAK,GAAGR,IAAI;EAE5B,MAAMS,SAAS,GAAGR,WAAW,CAC3BO,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CACE,CAACR,IAAI,GAAGE,uBAAuB,EAC/B,CAAC,EACDF,IAAI,GAAGE,uBAAuB,CAC/B,EACDC,WAAW,CAACO,MACd,CAAC;EAED,MAAMC,MAAM,GAAGV,WAAW,CACxBO,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CAAC,CAAC,EAAER,IAAI,EAAE,CAAC,CAAC,EACZG,WAAW,CAACS,KACd,CAAC;EAED,MAAMC,KAAK,GAAGZ,WAAW,CACvBO,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CACEJ,yBAAyB,EACzBC,sBAAsB,EACtBD,yBAAyB,CAC1B,EACDD,WAAW,CAACS,KACd,CAAC;EAED,OAAO;IACLE,SAAS,EAAE,CACTR,QAAQ,GACJ;MACAS,UAAU,EAAEN;IACd,CAAC,GACC;MACAO,UAAU,EAAEP;IACd,CAAC,EACH;MACEI,KAAA,EAAAA;IACF,CAAC,CACF;IACDF,MAAA,EAAAA;EACF,CAAC;AACH\"}"};var _worklet_11113070436332_init_data={code:"function anonymous() {\n  const {\n    visibleRanges\n  } = this._closure;\n  return visibleRanges.value;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"visibleRanges\",\"_closure\",\"value\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx\"],\"mappings\":\"AAoHI,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,aAAc,CAAAE,KAAA;AAAA\"}"};var _worklet_15128277149381_init_data={code:"function anonymous() {\n  const {\n    runOnJS,\n    updateView,\n    visibleRanges\n  } = this._closure;\n  runOnJS(updateView)(visibleRanges.value.negativeRange, visibleRanges.value.positiveRange);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"runOnJS\",\"updateView\",\"visibleRanges\",\"_closure\",\"value\",\"negativeRange\",\"positiveRange\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx\"],\"mappings\":\"AAqHI,SAAAA,SAAMA,CAAA;EAAA;IAAAC,OAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EACJH,OAAO,CAACC,UAAU,CAAC,CACjBC,aAAa,CAACE,KAAK,CAACC,aAAa,EACjCH,aAAa,CAACE,KAAK,CAACE,aACtB,CAAC;AACH\"}"};var ParallaxLayout=function ParallaxLayout(props){var handlerOffset=props.handlerOffset,_props$parallaxScroll=props.parallaxScrollingOffset,parallaxScrollingOffset=_props$parallaxScroll===void 0?100:_props$parallaxScroll,_props$parallaxScroll2=props.parallaxScrollingScale,parallaxScrollingScale=_props$parallaxScroll2===void 0?0.8:_props$parallaxScroll2,_props$parallaxAdjace=props.parallaxAdjacentItemScale,parallaxAdjacentItemScale=_props$parallaxAdjace===void 0?parallaxScrollingScale**2:_props$parallaxAdjace,index=props.index,width=props.width,height=props.height,loop=props.loop,dataLength=props.dataLength,children=props.children,visibleRanges=props.visibleRanges,vertical=props.vertical;var _React$useState=_react.default.useState(false),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),shouldUpdate=_React$useState2[0],setShouldUpdate=_React$useState2[1];var size=props.vertical?props.height:props.width;var x=(0,_useOffsetX.useOffsetX)({handlerOffset:handlerOffset,index:index,size:size,dataLength:dataLength,loop:loop},visibleRanges);var offsetXStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _e=[new global.Error(),-9,-27];var _f=function _f(){var value=x.value/size;var translate=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[-size+parallaxScrollingOffset,0,size-parallaxScrollingOffset],_reactNativeReanimated.Extrapolate.EXTEND);var zIndex=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[0,size,0],_reactNativeReanimated.Extrapolate.CLAMP);var scale=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[parallaxAdjacentItemScale,parallaxScrollingScale,parallaxAdjacentItemScale],_reactNativeReanimated.Extrapolate.CLAMP);return{transform:[vertical?{translateY:translate}:{translateX:translate},{scale:scale}],zIndex:zIndex};};_f._closure={x:x,size:size,interpolate:_reactNativeReanimated.interpolate,parallaxScrollingOffset:parallaxScrollingOffset,Extrapolate:_reactNativeReanimated.Extrapolate,parallaxAdjacentItemScale:parallaxAdjacentItemScale,parallaxScrollingScale:parallaxScrollingScale,vertical:vertical};_f.__initData=_worklet_2396750619736_init_data;_f.__workletHash=2396750619736;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[loop,vertical,parallaxScrollingOffset]);var updateView=_react.default.useCallback(function(negativeRange,positiveRange){setShouldUpdate(index>=negativeRange[0]&&index<=negativeRange[1]||index>=positiveRange[0]&&index<=positiveRange[1]);},[index]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return visibleRanges.value;};_f._closure={visibleRanges:visibleRanges};_f.__initData=_worklet_11113070436332_init_data;_f.__workletHash=11113070436332;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-4,-27];var _f=function _f(){(0,_reactNativeReanimated.runOnJS)(updateView)(visibleRanges.value.negativeRange,visibleRanges.value.positiveRange);};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,updateView:updateView,visibleRanges:visibleRanges};_f.__initData=_worklet_15128277149381_init_data;_f.__workletHash=15128277149381;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[visibleRanges.value]);return(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[{width:width||"100%",height:height||"100%",position:"absolute"},offsetXStyle],children:(0,_jsxRuntime.jsx)(_LazyView.LazyView,{shouldUpdate:shouldUpdate,children:children})});};exports.ParallaxLayout=ParallaxLayout;
+var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.ParallaxLayout=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireDefault(require("react"));var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _useOffsetX=require("../hooks/useOffsetX");var _LazyView=require("../LazyView");var _jsxRuntime=require("react/jsx-runtime");var _this=this,_jsxFileName="/home/vumanh/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var _worklet_2396750619736_init_data={code:"function anonymous() {\n  const {\n    x,\n    size,\n    interpolate,\n    parallaxScrollingOffset,\n    Extrapolate,\n    parallaxAdjacentItemScale,\n    parallaxScrollingScale,\n    vertical\n  } = this._closure;\n  const value = x.value / size;\n  const translate = interpolate(value, [-1, 0, 1], [-size + parallaxScrollingOffset, 0, size - parallaxScrollingOffset], Extrapolate.EXTEND);\n  const zIndex = interpolate(value, [-1, 0, 1], [0, size, 0], Extrapolate.CLAMP);\n  const scale = interpolate(value, [-1, 0, 1], [parallaxAdjacentItemScale, parallaxScrollingScale, parallaxAdjacentItemScale], Extrapolate.CLAMP);\n  return {\n    transform: [vertical ? {\n      translateY: translate\n    } : {\n      translateX: translate\n    }, {\n      scale: scale\n    }],\n    zIndex: zIndex\n  };\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"x\",\"size\",\"interpolate\",\"parallaxScrollingOffset\",\"Extrapolate\",\"parallaxAdjacentItemScale\",\"parallaxScrollingScale\",\"vertical\",\"_closure\",\"value\",\"translate\",\"EXTEND\",\"zIndex\",\"CLAMP\",\"scale\",\"transform\",\"translateY\",\"translateX\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx\"],\"mappings\":\"AAwDwC,SAAAA,SAAMA,CAAA;EAAA;IAAAC,CAAA;IAAAC,IAAA;IAAAC,WAAA;IAAAC,uBAAA;IAAAC,WAAA;IAAAC,yBAAA;IAAAC,sBAAA;IAAAC;EAAA,SAAAC,QAAA;EAC1C,MAAMC,KAAK,GAAGT,CAAC,CAACS,KAAK,GAAGR,IAAI;EAE5B,MAAMS,SAAS,GAAGR,WAAW,CAC3BO,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CACE,CAACR,IAAI,GAAGE,uBAAuB,EAC/B,CAAC,EACDF,IAAI,GAAGE,uBAAuB,CAC/B,EACDC,WAAW,CAACO,MACd,CAAC;EAED,MAAMC,MAAM,GAAGV,WAAW,CACxBO,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CAAC,CAAC,EAAER,IAAI,EAAE,CAAC,CAAC,EACZG,WAAW,CAACS,KACd,CAAC;EAED,MAAMC,KAAK,GAAGZ,WAAW,CACvBO,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CACEJ,yBAAyB,EACzBC,sBAAsB,EACtBD,yBAAyB,CAC1B,EACDD,WAAW,CAACS,KACd,CAAC;EAED,OAAO;IACLE,SAAS,EAAE,CACTR,QAAQ,GACJ;MACAS,UAAU,EAAEN;IACd,CAAC,GACC;MACAO,UAAU,EAAEP;IACd,CAAC,EACH;MACEI,KAAA,EAAAA;IACF,CAAC,CACF;IACDF,MAAA,EAAAA;EACF,CAAC;AACH\"}"};var _worklet_11113070436332_init_data={code:"function anonymous() {\n  const {\n    visibleRanges\n  } = this._closure;\n  return visibleRanges.value;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"visibleRanges\",\"_closure\",\"value\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx\"],\"mappings\":\"AAoHI,SAAAA,UAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OAAMD,aAAc,CAAAE,KAAA;AAAA\"}"};var _worklet_15128277149381_init_data={code:"function anonymous() {\n  const {\n    runOnJS,\n    updateView,\n    visibleRanges\n  } = this._closure;\n  runOnJS(updateView)(visibleRanges.value.negativeRange, visibleRanges.value.positiveRange);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"runOnJS\",\"updateView\",\"visibleRanges\",\"_closure\",\"value\",\"negativeRange\",\"positiveRange\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/ParallaxLayout.tsx\"],\"mappings\":\"AAqHI,SAAAA,SAAMA,CAAA;EAAA;IAAAC,OAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EACJH,OAAO,CAACC,UAAU,CAAC,CACjBC,aAAa,CAACE,KAAK,CAACC,aAAa,EACjCH,aAAa,CAACE,KAAK,CAACE,aACtB,CAAC;AACH\"}"};var ParallaxLayout=function ParallaxLayout(props){var handlerOffset=props.handlerOffset,_props$parallaxScroll=props.parallaxScrollingOffset,parallaxScrollingOffset=_props$parallaxScroll===void 0?100:_props$parallaxScroll,_props$parallaxScroll2=props.parallaxScrollingScale,parallaxScrollingScale=_props$parallaxScroll2===void 0?0.8:_props$parallaxScroll2,_props$parallaxAdjace=props.parallaxAdjacentItemScale,parallaxAdjacentItemScale=_props$parallaxAdjace===void 0?parallaxScrollingScale**2:_props$parallaxAdjace,index=props.index,width=props.width,height=props.height,loop=props.loop,dataLength=props.dataLength,children=props.children,visibleRanges=props.visibleRanges,vertical=props.vertical;var _React$useState=_react.default.useState(false),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),shouldUpdate=_React$useState2[0],setShouldUpdate=_React$useState2[1];var size=props.vertical?props.height:props.width;var x=(0,_useOffsetX.useOffsetX)({handlerOffset:handlerOffset,index:index,size:size,dataLength:dataLength,loop:loop},visibleRanges);var offsetXStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _e=[new global.Error(),-9,-27];var _f=function _f(){var value=x.value/size;var translate=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[-size+parallaxScrollingOffset,0,size-parallaxScrollingOffset],_reactNativeReanimated.Extrapolate.EXTEND);var zIndex=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[0,size,0],_reactNativeReanimated.Extrapolate.CLAMP);var scale=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[parallaxAdjacentItemScale,parallaxScrollingScale,parallaxAdjacentItemScale],_reactNativeReanimated.Extrapolate.CLAMP);return{transform:[vertical?{translateY:translate}:{translateX:translate},{scale:scale}],zIndex:zIndex};};_f._closure={x:x,size:size,interpolate:_reactNativeReanimated.interpolate,parallaxScrollingOffset:parallaxScrollingOffset,Extrapolate:_reactNativeReanimated.Extrapolate,parallaxAdjacentItemScale:parallaxAdjacentItemScale,parallaxScrollingScale:parallaxScrollingScale,vertical:vertical};_f.__initData=_worklet_2396750619736_init_data;_f.__workletHash=2396750619736;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[loop,vertical,parallaxScrollingOffset]);var updateView=_react.default.useCallback(function(negativeRange,positiveRange){setShouldUpdate(index>=negativeRange[0]&&index<=negativeRange[1]||index>=positiveRange[0]&&index<=positiveRange[1]);},[index]);(0,_reactNativeReanimated.useAnimatedReaction)(function(){var _e=[new global.Error(),-2,-27];var _f=function _f(){return visibleRanges.value;};_f._closure={visibleRanges:visibleRanges};_f.__initData=_worklet_11113070436332_init_data;_f.__workletHash=11113070436332;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),function(){var _e=[new global.Error(),-4,-27];var _f=function _f(){(0,_reactNativeReanimated.runOnJS)(updateView)(visibleRanges.value.negativeRange,visibleRanges.value.positiveRange);};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,updateView:updateView,visibleRanges:visibleRanges};_f.__initData=_worklet_15128277149381_init_data;_f.__workletHash=15128277149381;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}(),[visibleRanges.value]);return(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[{width:width||"100%",height:height||"100%",position:"absolute"},offsetXStyle],children:(0,_jsxRuntime.jsx)(_LazyView.LazyView,{shouldUpdate:shouldUpdate,children:children})});};exports.ParallaxLayout=ParallaxLayout;
 //# sourceMappingURL=ParallaxLayout.js.map
\ No newline at end of file
diff --git a/lib/commonjs/layouts/ParallaxLayout.js.map b/lib/commonjs/layouts/ParallaxLayout.js.map
index 81e3cfa874f2a9255ec180fa4dc484b3d111f439..b53972543ca58fc6ca550385281b305a5c895962 100644
--- a/lib/commonjs/layouts/ParallaxLayout.js.map
+++ b/lib/commonjs/layouts/ParallaxLayout.js.map
@@ -1 +1 @@
-{"version":3,"sources":["ParallaxLayout.tsx"],"names":["ParallaxLayout","props","handlerOffset","parallaxScrollingOffset","parallaxScrollingScale","parallaxAdjacentItemScale","index","width","height","loop","dataLength","children","visibleRanges","vertical","React","useState","shouldUpdate","setShouldUpdate","size","x","offsetXStyle","value","translate","Extrapolate","EXTEND","zIndex","CLAMP","scale","transform","translateY","translateX","interpolate","updateView","useCallback","negativeRange","positiveRange","runOnJS","position"],"mappings":"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","sourcesContent":["import type { PropsWithChildren } from \"react\";\nimport React from \"react\";\nimport Animated, {\n  Extrapolate,\n  interpolate,\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\n\nimport type { ILayoutConfig } from \"./parallax\";\n\nimport { useOffsetX } from \"../hooks/useOffsetX\";\nimport type { IVisibleRanges } from \"../hooks/useVisibleRanges\";\nimport { LazyView } from \"../LazyView\";\nimport type { IComputedDirectionTypes } from \"../types\";\n\nexport const ParallaxLayout: React.FC<PropsWithChildren<IComputedDirectionTypes<\n{\n  loop?: boolean\n  handlerOffset: Animated.SharedValue<number>\n  index: number\n  dataLength: number\n  visibleRanges: IVisibleRanges\n} & ILayoutConfig\n>>> = (props) => {\n  const {\n    handlerOffset,\n    parallaxScrollingOffset = 100,\n    parallaxScrollingScale = 0.8,\n    parallaxAdjacentItemScale = parallaxScrollingScale ** 2,\n    index,\n    width,\n    height,\n    loop,\n    dataLength,\n    children,\n    visibleRanges,\n    vertical,\n  } = props;\n\n  const [shouldUpdate, setShouldUpdate] = React.useState(false);\n\n  const size = props.vertical ? props.height : props.width;\n\n  const x = useOffsetX(\n    {\n      handlerOffset,\n      index,\n      size,\n      dataLength,\n      loop,\n    },\n    visibleRanges,\n  );\n\n  const offsetXStyle = useAnimatedStyle(() => {\n    const value = x.value / size;\n\n    const translate = interpolate(\n      value,\n      [-1, 0, 1],\n      [\n        -size + parallaxScrollingOffset,\n        0,\n        size - parallaxScrollingOffset,\n      ],\n      Extrapolate.EXTEND,\n    );\n\n    const zIndex = interpolate(\n      value,\n      [-1, 0, 1],\n      [0, size, 0],\n      Extrapolate.CLAMP,\n    );\n\n    const scale = interpolate(\n      value,\n      [-1, 0, 1],\n      [\n        parallaxAdjacentItemScale,\n        parallaxScrollingScale,\n        parallaxAdjacentItemScale,\n      ],\n      Extrapolate.CLAMP,\n    );\n\n    return {\n      transform: [\n        vertical\n          ? {\n            translateY: translate,\n          }\n          : {\n            translateX: translate,\n          },\n        {\n          scale,\n        },\n      ],\n      zIndex,\n    };\n  }, [loop, vertical, parallaxScrollingOffset]);\n\n  const updateView = React.useCallback(\n    (negativeRange: number[], positiveRange: number[]) => {\n      setShouldUpdate(\n        (index >= negativeRange[0] && index <= negativeRange[1])\n                    || (index >= positiveRange[0] && index <= positiveRange[1]),\n      );\n    },\n    [index],\n  );\n\n  useAnimatedReaction(\n    () => visibleRanges.value,\n    () => {\n      runOnJS(updateView)(\n        visibleRanges.value.negativeRange,\n        visibleRanges.value.positiveRange,\n      );\n    },\n    [visibleRanges.value],\n  );\n\n  return (\n    <Animated.View\n      style={[\n        {\n          width: width || \"100%\",\n          height: height || \"100%\",\n          position: \"absolute\",\n        },\n        offsetXStyle,\n      ]}\n    >\n      <LazyView shouldUpdate={shouldUpdate}>{children}</LazyView>\n    </Animated.View>\n  );\n};\n"]}
\ No newline at end of file
+{"version":3,"sources":["ParallaxLayout.tsx"],"names":["ParallaxLayout","props","handlerOffset","parallaxScrollingOffset","parallaxScrollingScale","parallaxAdjacentItemScale","index","width","height","loop","dataLength","children","visibleRanges","vertical","React","useState","shouldUpdate","setShouldUpdate","size","x","offsetXStyle","value","translate","Extrapolate","EXTEND","zIndex","CLAMP","scale","transform","translateY","translateX","interpolate","updateView","useCallback","negativeRange","positiveRange","runOnJS","position"],"mappings":"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","sourcesContent":["import type { PropsWithChildren } from \"react\";\nimport React from \"react\";\nimport Animated, {\n  Extrapolate,\n  interpolate,\n  runOnJS,\n  useAnimatedReaction,\n  useAnimatedStyle,\n} from \"react-native-reanimated\";\n\nimport type { ILayoutConfig } from \"./parallax\";\n\nimport { useOffsetX } from \"../hooks/useOffsetX\";\nimport type { IVisibleRanges } from \"../hooks/useVisibleRanges\";\nimport { LazyView } from \"../LazyView\";\nimport type { IComputedDirectionTypes } from \"../types\";\n\nexport const ParallaxLayout: React.FC<PropsWithChildren<IComputedDirectionTypes<\n{\n  loop?: boolean\n  handlerOffset: Animated.SharedValue<number>\n  index: number\n  dataLength: number\n  visibleRanges: IVisibleRanges\n} & ILayoutConfig\n>>> = (props) => {\n  const {\n    handlerOffset,\n    parallaxScrollingOffset = 100,\n    parallaxScrollingScale = 0.8,\n    parallaxAdjacentItemScale = parallaxScrollingScale ** 2,\n    index,\n    width,\n    height,\n    loop,\n    dataLength,\n    children,\n    visibleRanges,\n    vertical,\n  } = props;\n\n  const [shouldUpdate, setShouldUpdate] = React.useState(false);\n\n  const size = props.vertical ? props.height : props.width;\n\n  const x = useOffsetX(\n    {\n      handlerOffset,\n      index,\n      size,\n      dataLength,\n      loop,\n    },\n    visibleRanges,\n  );\n\n  const offsetXStyle = useAnimatedStyle(() => {\n    const value = x.value / size;\n\n    const translate = interpolate(\n      value,\n      [-1, 0, 1],\n      [\n        -size + parallaxScrollingOffset,\n        0,\n        size - parallaxScrollingOffset,\n      ],\n      Extrapolate.EXTEND,\n    );\n\n    const zIndex = interpolate(\n      value,\n      [-1, 0, 1],\n      [0, size, 0],\n      Extrapolate.CLAMP,\n    );\n\n    const scale = interpolate(\n      value,\n      [-1, 0, 1],\n      [\n        parallaxAdjacentItemScale,\n        parallaxScrollingScale,\n        parallaxAdjacentItemScale,\n      ],\n      Extrapolate.CLAMP,\n    );\n\n    return {\n      transform: [\n        vertical\n          ? {\n            translateY: translate,\n          }\n          : {\n            translateX: translate,\n          },\n        {\n          scale,\n        },\n      ],\n      zIndex,\n    };\n  }, [loop, vertical, parallaxScrollingOffset]);\n\n  const updateView = React.useCallback(\n    (negativeRange: number[], positiveRange: number[]) => {\n      setShouldUpdate(\n        (index >= negativeRange[0] && index <= negativeRange[1])\n                    || (index >= positiveRange[0] && index <= positiveRange[1]),\n      );\n    },\n    [index],\n  );\n\n  useAnimatedReaction(\n    () => visibleRanges.value,\n    () => {\n      runOnJS(updateView)(\n        visibleRanges.value.negativeRange,\n        visibleRanges.value.positiveRange,\n      );\n    },\n    [visibleRanges.value],\n  );\n\n  return (\n    <Animated.View\n      style={[\n        {\n          width: width || \"100%\",\n          height: height || \"100%\",\n          position: \"absolute\",\n        },\n        offsetXStyle,\n      ]}\n    >\n      <LazyView shouldUpdate={shouldUpdate}>{children}</LazyView>\n    </Animated.View>\n  );\n};\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/layouts/normal.js b/lib/commonjs/layouts/normal.js
index bcc7999b14d804cc5b74175b5a92aaafdd624c7a..ffe57d7ba867f2bb54fd07079e6324b177dbc167 100644
--- a/lib/commonjs/layouts/normal.js
+++ b/lib/commonjs/layouts/normal.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.normalLayout=normalLayout;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_6911475201616_init_data={code:"function anonymous(value) {\n  const {\n    interpolate,\n    size,\n    vertical\n  } = this._closure;\n  const translate = interpolate(value, [-1, 0, 1], [-size, 0, size]);\n  return {\n    transform: [vertical ? {\n      translateY: translate\n    } : {\n      translateX: translate\n    }]\n  };\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/normal.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"value\",\"interpolate\",\"size\",\"vertical\",\"_closure\",\"translate\",\"transform\",\"translateY\",\"translateX\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/normal.ts\"],\"mappings\":\"AAKS,SAACA,SAAkBA,CAAAC,KAAA;EAAA;IAAAC,WAAA;IAAAC,IAAA;IAAAC;EAAA,SAAAC,QAAA;EAExB,MAAMC,SAAS,GAAGJ,WAAW,CAACD,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAACE,IAAI,EAAE,CAAC,EAAEA,IAAI,CAAC,CAAC;EAElE,OAAO;IACLI,SAAS,EAAE,CACTH,QAAQ,GACJ;MACAI,UAAU,EAAEF;IACd,CAAC,GACC;MACAG,UAAU,EAAEH;IACd,CAAC;EAEP,CAAC;AACH\"}"};function normalLayout(opts){var size=opts.size,vertical=opts.vertical;return function(){var _e=[new global.Error(),-4,-27];var _f=function _f(value){var translate=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[-size,0,size]);return{transform:[vertical?{translateY:translate}:{translateX:translate}]};};_f._closure={interpolate:_reactNativeReanimated.interpolate,size:size,vertical:vertical};_f.__initData=_worklet_6911475201616_init_data;_f.__workletHash=6911475201616;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();}
+Object.defineProperty(exports,"__esModule",{value:true});exports.normalLayout=normalLayout;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_6911475201616_init_data={code:"function anonymous(value) {\n  const {\n    interpolate,\n    size,\n    vertical\n  } = this._closure;\n  const translate = interpolate(value, [-1, 0, 1], [-size, 0, size]);\n  return {\n    transform: [vertical ? {\n      translateY: translate\n    } : {\n      translateX: translate\n    }]\n  };\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/normal.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"value\",\"interpolate\",\"size\",\"vertical\",\"_closure\",\"translate\",\"transform\",\"translateY\",\"translateX\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/normal.ts\"],\"mappings\":\"AAKS,SAACA,SAAkBA,CAAAC,KAAA;EAAA;IAAAC,WAAA;IAAAC,IAAA;IAAAC;EAAA,SAAAC,QAAA;EAExB,MAAMC,SAAS,GAAGJ,WAAW,CAACD,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAACE,IAAI,EAAE,CAAC,EAAEA,IAAI,CAAC,CAAC;EAElE,OAAO;IACLI,SAAS,EAAE,CACTH,QAAQ,GACJ;MACAI,UAAU,EAAEF;IACd,CAAC,GACC;MACAG,UAAU,EAAEH;IACd,CAAC;EAEP,CAAC;AACH\"}"};function normalLayout(opts){var size=opts.size,vertical=opts.vertical;return function(){var _e=[new global.Error(),-4,-27];var _f=function _f(value){var translate=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[-size,0,size]);return{transform:[vertical?{translateY:translate}:{translateX:translate}]};};_f._closure={interpolate:_reactNativeReanimated.interpolate,size:size,vertical:vertical};_f.__initData=_worklet_6911475201616_init_data;_f.__workletHash=6911475201616;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();}
 //# sourceMappingURL=normal.js.map
\ No newline at end of file
diff --git a/lib/commonjs/layouts/normal.js.map b/lib/commonjs/layouts/normal.js.map
index f82e079aa8ce36c414d5e26bb4ed5c1e81ba1c5a..499c67a08c51d79a115342830706ec8e635f0e32 100644
--- a/lib/commonjs/layouts/normal.js.map
+++ b/lib/commonjs/layouts/normal.js.map
@@ -1 +1 @@
-{"version":3,"sources":["normal.ts"],"names":["normalLayout","opts","size","vertical","value","translate","transform","translateY","translateX","interpolate"],"mappings":"2FAAA,8D,ulCAEO,QAASA,CAAAA,YAAT,CAAsBC,IAAtB,CAAiE,CACtE,GAAQC,CAAAA,IAAR,CAA2BD,IAA3B,CAAQC,IAAR,CAAcC,QAAd,CAA2BF,IAA3B,CAAcE,QAAd,CAEA,wEAAQC,KAAR,CAA0B,CAExB,GAAMC,CAAAA,SAAS,CAAG,uCAAYD,KAAZ,CAAmB,CAAC,CAAC,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAnB,CAA+B,CAAC,CAACF,IAAF,CAAQ,CAAR,CAAWA,IAAX,CAA/B,CAAlB,CAEA,MAAO,CACLI,SAAS,CAAE,CACTH,QAAQ,CACJ,CACAI,UAAU,CAAEF,SADZ,CADI,CAIJ,CACAG,UAAU,CAAEH,SADZ,CALK,CADN,CAAP,CAWD,CAfD,0BAJkBI,kCAIlB,MAJ4DP,IAI5D,UAFcC,QAEd,wIAgBD","sourcesContent":["import { interpolate } from \"react-native-reanimated\";\n\nexport function normalLayout(opts: { size: number; vertical: boolean }) {\n  const { size, vertical } = opts;\n\n  return (value: number) => {\n    \"worklet\";\n    const translate = interpolate(value, [-1, 0, 1], [-size, 0, size]);\n\n    return {\n      transform: [\n        vertical\n          ? {\n            translateY: translate,\n          }\n          : {\n            translateX: translate,\n          },\n      ],\n    };\n  };\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["normal.ts"],"names":["normalLayout","opts","size","vertical","value","translate","transform","translateY","translateX","interpolate"],"mappings":"2FAAA,8D,2gCAEO,QAASA,CAAAA,YAAT,CAAsBC,IAAtB,CAAiE,CACtE,GAAQC,CAAAA,IAAR,CAA2BD,IAA3B,CAAQC,IAAR,CAAcC,QAAd,CAA2BF,IAA3B,CAAcE,QAAd,CAEA,wEAAQC,KAAR,CAA0B,CAExB,GAAMC,CAAAA,SAAS,CAAG,uCAAYD,KAAZ,CAAmB,CAAC,CAAC,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAnB,CAA+B,CAAC,CAACF,IAAF,CAAQ,CAAR,CAAWA,IAAX,CAA/B,CAAlB,CAEA,MAAO,CACLI,SAAS,CAAE,CACTH,QAAQ,CACJ,CACAI,UAAU,CAAEF,SADZ,CADI,CAIJ,CACAG,UAAU,CAAEH,SADZ,CALK,CADN,CAAP,CAWD,CAfD,0BAJkBI,kCAIlB,MAJ4DP,IAI5D,UAFcC,QAEd,wIAgBD","sourcesContent":["import { interpolate } from \"react-native-reanimated\";\n\nexport function normalLayout(opts: { size: number; vertical: boolean }) {\n  const { size, vertical } = opts;\n\n  return (value: number) => {\n    \"worklet\";\n    const translate = interpolate(value, [-1, 0, 1], [-size, 0, size]);\n\n    return {\n      transform: [\n        vertical\n          ? {\n            translateY: translate,\n          }\n          : {\n            translateX: translate,\n          },\n      ],\n    };\n  };\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/layouts/parallax.js b/lib/commonjs/layouts/parallax.js
index 157ca8e50d7c15c5cbd0b12d64e21ac3aa1fb555..c5e9cb7cfccf2d8e8cad8a2c862d7407f30c3598 100644
--- a/lib/commonjs/layouts/parallax.js
+++ b/lib/commonjs/layouts/parallax.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.parallaxLayout=parallaxLayout;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_6622793889829_init_data={code:"function anonymous(value) {\n  const {\n    interpolate,\n    size,\n    parallaxScrollingOffset,\n    Extrapolate,\n    parallaxAdjacentItemScale,\n    parallaxScrollingScale,\n    vertical\n  } = this._closure;\n  const translate = interpolate(value, [-1, 0, 1], [-size + parallaxScrollingOffset, 0, size - parallaxScrollingOffset]);\n  const zIndex = interpolate(value, [-1, 0, 1], [0, size, 0], Extrapolate.CLAMP);\n  const scale = interpolate(value, [-1, 0, 1], [parallaxAdjacentItemScale, parallaxScrollingScale, parallaxAdjacentItemScale], Extrapolate.CLAMP);\n  return {\n    transform: [vertical ? {\n      translateY: translate\n    } : {\n      translateX: translate\n    }, {\n      scale: scale\n    }],\n    zIndex: zIndex\n  };\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/parallax.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"value\",\"interpolate\",\"size\",\"parallaxScrollingOffset\",\"Extrapolate\",\"parallaxAdjacentItemScale\",\"parallaxScrollingScale\",\"vertical\",\"_closure\",\"translate\",\"zIndex\",\"CLAMP\",\"scale\",\"transform\",\"translateY\",\"translateX\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/parallax.ts\"],\"mappings\":\"AA8CS,SAACA,SAAkBA,CAAAC,KAAA;EAAA;IAAAC,WAAA;IAAAC,IAAA;IAAAC,uBAAA;IAAAC,WAAA;IAAAC,yBAAA;IAAAC,sBAAA;IAAAC;EAAA,SAAAC,QAAA;EAExB,MAAMC,SAAS,GAAGR,WAAW,CAC3BD,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CAAC,CAACE,IAAI,GAAGC,uBAAuB,EAAE,CAAC,EAAED,IAAI,GAAGC,uBAAuB,CACrE,CAAC;EAED,MAAMO,MAAM,GAAGT,WAAW,CACxBD,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CAAC,CAAC,EAAEE,IAAI,EAAE,CAAC,CAAC,EACZE,WAAW,CAACO,KACd,CAAC;EAED,MAAMC,KAAK,GAAGX,WAAW,CACvBD,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CACEK,yBAAyB,EACzBC,sBAAsB,EACtBD,yBAAyB,CAC1B,EACDD,WAAW,CAACO,KACd,CAAC;EAED,OAAO;IACLE,SAAS,EAAE,CACTN,QAAQ,GACJ;MACAO,UAAU,EAAEL;IACd,CAAC,GACC;MACAM,UAAU,EAAEN;IACd,CAAC,EACH;MACEG,KAAA,EAAAA;IACF,CAAC,CACF;IACDF,MAAA,EAAAA;EACF,CAAC;AACH\"}"};function parallaxLayout(baseConfig){var modeConfig=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var size=baseConfig.size,vertical=baseConfig.vertical;var _modeConfig$parallaxS=modeConfig.parallaxScrollingOffset,parallaxScrollingOffset=_modeConfig$parallaxS===void 0?100:_modeConfig$parallaxS,_modeConfig$parallaxS2=modeConfig.parallaxScrollingScale,parallaxScrollingScale=_modeConfig$parallaxS2===void 0?0.8:_modeConfig$parallaxS2,_modeConfig$parallaxA=modeConfig.parallaxAdjacentItemScale,parallaxAdjacentItemScale=_modeConfig$parallaxA===void 0?parallaxScrollingScale**2:_modeConfig$parallaxA;return function(){var _e=[new global.Error(),-8,-27];var _f=function _f(value){var translate=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[-size+parallaxScrollingOffset,0,size-parallaxScrollingOffset]);var zIndex=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[0,size,0],_reactNativeReanimated.Extrapolate.CLAMP);var scale=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[parallaxAdjacentItemScale,parallaxScrollingScale,parallaxAdjacentItemScale],_reactNativeReanimated.Extrapolate.CLAMP);return{transform:[vertical?{translateY:translate}:{translateX:translate},{scale:scale}],zIndex:zIndex};};_f._closure={interpolate:_reactNativeReanimated.interpolate,size:size,parallaxScrollingOffset:parallaxScrollingOffset,Extrapolate:_reactNativeReanimated.Extrapolate,parallaxAdjacentItemScale:parallaxAdjacentItemScale,parallaxScrollingScale:parallaxScrollingScale,vertical:vertical};_f.__initData=_worklet_6622793889829_init_data;_f.__workletHash=6622793889829;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();}
+Object.defineProperty(exports,"__esModule",{value:true});exports.parallaxLayout=parallaxLayout;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_6622793889829_init_data={code:"function anonymous(value) {\n  const {\n    interpolate,\n    size,\n    parallaxScrollingOffset,\n    Extrapolate,\n    parallaxAdjacentItemScale,\n    parallaxScrollingScale,\n    vertical\n  } = this._closure;\n  const translate = interpolate(value, [-1, 0, 1], [-size + parallaxScrollingOffset, 0, size - parallaxScrollingOffset]);\n  const zIndex = interpolate(value, [-1, 0, 1], [0, size, 0], Extrapolate.CLAMP);\n  const scale = interpolate(value, [-1, 0, 1], [parallaxAdjacentItemScale, parallaxScrollingScale, parallaxAdjacentItemScale], Extrapolate.CLAMP);\n  return {\n    transform: [vertical ? {\n      translateY: translate\n    } : {\n      translateX: translate\n    }, {\n      scale: scale\n    }],\n    zIndex: zIndex\n  };\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/parallax.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"value\",\"interpolate\",\"size\",\"parallaxScrollingOffset\",\"Extrapolate\",\"parallaxAdjacentItemScale\",\"parallaxScrollingScale\",\"vertical\",\"_closure\",\"translate\",\"zIndex\",\"CLAMP\",\"scale\",\"transform\",\"translateY\",\"translateX\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/parallax.ts\"],\"mappings\":\"AA8CS,SAACA,SAAkBA,CAAAC,KAAA;EAAA;IAAAC,WAAA;IAAAC,IAAA;IAAAC,uBAAA;IAAAC,WAAA;IAAAC,yBAAA;IAAAC,sBAAA;IAAAC;EAAA,SAAAC,QAAA;EAExB,MAAMC,SAAS,GAAGR,WAAW,CAC3BD,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CAAC,CAACE,IAAI,GAAGC,uBAAuB,EAAE,CAAC,EAAED,IAAI,GAAGC,uBAAuB,CACrE,CAAC;EAED,MAAMO,MAAM,GAAGT,WAAW,CACxBD,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CAAC,CAAC,EAAEE,IAAI,EAAE,CAAC,CAAC,EACZE,WAAW,CAACO,KACd,CAAC;EAED,MAAMC,KAAK,GAAGX,WAAW,CACvBD,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EACV,CACEK,yBAAyB,EACzBC,sBAAsB,EACtBD,yBAAyB,CAC1B,EACDD,WAAW,CAACO,KACd,CAAC;EAED,OAAO;IACLE,SAAS,EAAE,CACTN,QAAQ,GACJ;MACAO,UAAU,EAAEL;IACd,CAAC,GACC;MACAM,UAAU,EAAEN;IACd,CAAC,EACH;MACEG,KAAA,EAAAA;IACF,CAAC,CACF;IACDF,MAAA,EAAAA;EACF,CAAC;AACH\"}"};function parallaxLayout(baseConfig){var modeConfig=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var size=baseConfig.size,vertical=baseConfig.vertical;var _modeConfig$parallaxS=modeConfig.parallaxScrollingOffset,parallaxScrollingOffset=_modeConfig$parallaxS===void 0?100:_modeConfig$parallaxS,_modeConfig$parallaxS2=modeConfig.parallaxScrollingScale,parallaxScrollingScale=_modeConfig$parallaxS2===void 0?0.8:_modeConfig$parallaxS2,_modeConfig$parallaxA=modeConfig.parallaxAdjacentItemScale,parallaxAdjacentItemScale=_modeConfig$parallaxA===void 0?parallaxScrollingScale**2:_modeConfig$parallaxA;return function(){var _e=[new global.Error(),-8,-27];var _f=function _f(value){var translate=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[-size+parallaxScrollingOffset,0,size-parallaxScrollingOffset]);var zIndex=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[0,size,0],_reactNativeReanimated.Extrapolate.CLAMP);var scale=(0,_reactNativeReanimated.interpolate)(value,[-1,0,1],[parallaxAdjacentItemScale,parallaxScrollingScale,parallaxAdjacentItemScale],_reactNativeReanimated.Extrapolate.CLAMP);return{transform:[vertical?{translateY:translate}:{translateX:translate},{scale:scale}],zIndex:zIndex};};_f._closure={interpolate:_reactNativeReanimated.interpolate,size:size,parallaxScrollingOffset:parallaxScrollingOffset,Extrapolate:_reactNativeReanimated.Extrapolate,parallaxAdjacentItemScale:parallaxAdjacentItemScale,parallaxScrollingScale:parallaxScrollingScale,vertical:vertical};_f.__initData=_worklet_6622793889829_init_data;_f.__workletHash=6622793889829;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();}
 //# sourceMappingURL=parallax.js.map
\ No newline at end of file
diff --git a/lib/commonjs/layouts/parallax.js.map b/lib/commonjs/layouts/parallax.js.map
index 9ede17a8fe8bcbfc5d154a95be5ff3293a16e137..7736096b6235e07b60331880f33db7c98ad0d889 100644
--- a/lib/commonjs/layouts/parallax.js.map
+++ b/lib/commonjs/layouts/parallax.js.map
@@ -1 +1 @@
-{"version":3,"sources":["parallax.ts"],"names":["parallaxLayout","baseConfig","modeConfig","size","vertical","parallaxScrollingOffset","parallaxScrollingScale","parallaxAdjacentItemScale","value","translate","zIndex","Extrapolate","CLAMP","scale","transform","translateY","translateX","interpolate"],"mappings":"+FAAA,8D,slEAmCO,QAASA,CAAAA,cAAT,CACLC,UADK,CAGL,IADAC,CAAAA,UACA,2DAD4B,EAC5B,CACA,GAAQC,CAAAA,IAAR,CAA2BF,UAA3B,CAAQE,IAAR,CAAcC,QAAd,CAA2BH,UAA3B,CAAcG,QAAd,CACA,0BAIIF,UAJJ,CACEG,uBADF,CACEA,uBADF,gCAC4B,GAD5B,8CAIIH,UAJJ,CAEEI,sBAFF,CAEEA,sBAFF,iCAE2B,GAF3B,8CAIIJ,UAJJ,CAGEK,yBAHF,CAGEA,yBAHF,gCAG8BD,sBAAsB,EAAI,CAHxD,uBAMA,wEAAQE,KAAR,CAA0B,CAExB,GAAMC,CAAAA,SAAS,CAAG,uCAChBD,KADgB,CAEhB,CAAC,CAAC,CAAF,CAAK,CAAL,CAAQ,CAAR,CAFgB,CAGhB,CAAC,CAACL,IAAD,CAAQE,uBAAT,CAAkC,CAAlC,CAAqCF,IAAI,CAAGE,uBAA5C,CAHgB,CAAlB,CAMA,GAAMK,CAAAA,MAAM,CAAG,uCACbF,KADa,CAEb,CAAC,CAAC,CAAF,CAAK,CAAL,CAAQ,CAAR,CAFa,CAGb,CAAC,CAAD,CAAIL,IAAJ,CAAU,CAAV,CAHa,CAIbQ,mCAAYC,KAJC,CAAf,CAOA,GAAMC,CAAAA,KAAK,CAAG,uCACZL,KADY,CAEZ,CAAC,CAAC,CAAF,CAAK,CAAL,CAAQ,CAAR,CAFY,CAGZ,CACED,yBADF,CAEED,sBAFF,CAGEC,yBAHF,CAHY,CAQZI,mCAAYC,KARA,CAAd,CAWA,MAAO,CACLE,SAAS,CAAE,CACTV,QAAQ,CACJ,CACAW,UAAU,CAAEN,SADZ,CADI,CAIJ,CACAO,UAAU,CAAEP,SADZ,CALK,CAQT,CACEI,KAAK,CAALA,KADF,CARS,CADN,CAaLH,MAAM,CAANA,MAbK,CAAP,CAeD,CAzCD,0BA3CcO,kCA2Cd,MA5CkDd,IA4ClD,yBA7C6FE,uBA6C7F,aA3C6HM,kCA2C7H,2BA3CiGJ,yBA2CjG,wBA3CyED,sBA2CzE,UAzCcF,QAyCd,wIA0CD","sourcesContent":["import { Extrapolate, interpolate } from \"react-native-reanimated\";\n\nimport type { IComputedDirectionTypes } from \"../types\";\n\ninterface TBaseConfig {\n  size: number\n  vertical: boolean\n}\n\nexport interface ILayoutConfig {\n  /**\n     * control prev/next item offset.\n     * @default 100\n     */\n  parallaxScrollingOffset?: number\n  /**\n     * control prev/current/next item offset.\n     * @default 0.8\n     */\n  parallaxScrollingScale?: number\n  /**\n     * control prev/next item offset.\n     * @default Math.pow(parallaxScrollingScale, 2)\n     */\n  parallaxAdjacentItemScale?: number\n}\n\nexport type TParallaxModeProps = IComputedDirectionTypes<{\n  /**\n     * Carousel Animated transitions.\n     */\n  mode?: \"parallax\"\n  modeConfig?: ILayoutConfig\n}>;\n\nexport function parallaxLayout(\n  baseConfig: TBaseConfig,\n  modeConfig: ILayoutConfig = {},\n) {\n  const { size, vertical } = baseConfig;\n  const {\n    parallaxScrollingOffset = 100,\n    parallaxScrollingScale = 0.8,\n    parallaxAdjacentItemScale = parallaxScrollingScale ** 2,\n  } = modeConfig;\n\n  return (value: number) => {\n    \"worklet\";\n    const translate = interpolate(\n      value,\n      [-1, 0, 1],\n      [-size + parallaxScrollingOffset, 0, size - parallaxScrollingOffset],\n    );\n\n    const zIndex = interpolate(\n      value,\n      [-1, 0, 1],\n      [0, size, 0],\n      Extrapolate.CLAMP,\n    );\n\n    const scale = interpolate(\n      value,\n      [-1, 0, 1],\n      [\n        parallaxAdjacentItemScale,\n        parallaxScrollingScale,\n        parallaxAdjacentItemScale,\n      ],\n      Extrapolate.CLAMP,\n    );\n\n    return {\n      transform: [\n        vertical\n          ? {\n            translateY: translate,\n          }\n          : {\n            translateX: translate,\n          },\n        {\n          scale,\n        },\n      ],\n      zIndex,\n    };\n  };\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["parallax.ts"],"names":["parallaxLayout","baseConfig","modeConfig","size","vertical","parallaxScrollingOffset","parallaxScrollingScale","parallaxAdjacentItemScale","value","translate","zIndex","Extrapolate","CLAMP","scale","transform","translateY","translateX","interpolate"],"mappings":"+FAAA,8D,0gEAmCO,QAASA,CAAAA,cAAT,CACLC,UADK,CAGL,IADAC,CAAAA,UACA,2DAD4B,EAC5B,CACA,GAAQC,CAAAA,IAAR,CAA2BF,UAA3B,CAAQE,IAAR,CAAcC,QAAd,CAA2BH,UAA3B,CAAcG,QAAd,CACA,0BAIIF,UAJJ,CACEG,uBADF,CACEA,uBADF,gCAC4B,GAD5B,8CAIIH,UAJJ,CAEEI,sBAFF,CAEEA,sBAFF,iCAE2B,GAF3B,8CAIIJ,UAJJ,CAGEK,yBAHF,CAGEA,yBAHF,gCAG8BD,sBAAsB,EAAI,CAHxD,uBAMA,wEAAQE,KAAR,CAA0B,CAExB,GAAMC,CAAAA,SAAS,CAAG,uCAChBD,KADgB,CAEhB,CAAC,CAAC,CAAF,CAAK,CAAL,CAAQ,CAAR,CAFgB,CAGhB,CAAC,CAACL,IAAD,CAAQE,uBAAT,CAAkC,CAAlC,CAAqCF,IAAI,CAAGE,uBAA5C,CAHgB,CAAlB,CAMA,GAAMK,CAAAA,MAAM,CAAG,uCACbF,KADa,CAEb,CAAC,CAAC,CAAF,CAAK,CAAL,CAAQ,CAAR,CAFa,CAGb,CAAC,CAAD,CAAIL,IAAJ,CAAU,CAAV,CAHa,CAIbQ,mCAAYC,KAJC,CAAf,CAOA,GAAMC,CAAAA,KAAK,CAAG,uCACZL,KADY,CAEZ,CAAC,CAAC,CAAF,CAAK,CAAL,CAAQ,CAAR,CAFY,CAGZ,CACED,yBADF,CAEED,sBAFF,CAGEC,yBAHF,CAHY,CAQZI,mCAAYC,KARA,CAAd,CAWA,MAAO,CACLE,SAAS,CAAE,CACTV,QAAQ,CACJ,CACAW,UAAU,CAAEN,SADZ,CADI,CAIJ,CACAO,UAAU,CAAEP,SADZ,CALK,CAQT,CACEI,KAAK,CAALA,KADF,CARS,CADN,CAaLH,MAAM,CAANA,MAbK,CAAP,CAeD,CAzCD,0BA3CcO,kCA2Cd,MA5CkDd,IA4ClD,yBA7C6FE,uBA6C7F,aA3C6HM,kCA2C7H,2BA3CiGJ,yBA2CjG,wBA3CyED,sBA2CzE,UAzCcF,QAyCd,wIA0CD","sourcesContent":["import { Extrapolate, interpolate } from \"react-native-reanimated\";\n\nimport type { IComputedDirectionTypes } from \"../types\";\n\ninterface TBaseConfig {\n  size: number\n  vertical: boolean\n}\n\nexport interface ILayoutConfig {\n  /**\n     * control prev/next item offset.\n     * @default 100\n     */\n  parallaxScrollingOffset?: number\n  /**\n     * control prev/current/next item offset.\n     * @default 0.8\n     */\n  parallaxScrollingScale?: number\n  /**\n     * control prev/next item offset.\n     * @default Math.pow(parallaxScrollingScale, 2)\n     */\n  parallaxAdjacentItemScale?: number\n}\n\nexport type TParallaxModeProps = IComputedDirectionTypes<{\n  /**\n     * Carousel Animated transitions.\n     */\n  mode?: \"parallax\"\n  modeConfig?: ILayoutConfig\n}>;\n\nexport function parallaxLayout(\n  baseConfig: TBaseConfig,\n  modeConfig: ILayoutConfig = {},\n) {\n  const { size, vertical } = baseConfig;\n  const {\n    parallaxScrollingOffset = 100,\n    parallaxScrollingScale = 0.8,\n    parallaxAdjacentItemScale = parallaxScrollingScale ** 2,\n  } = modeConfig;\n\n  return (value: number) => {\n    \"worklet\";\n    const translate = interpolate(\n      value,\n      [-1, 0, 1],\n      [-size + parallaxScrollingOffset, 0, size - parallaxScrollingOffset],\n    );\n\n    const zIndex = interpolate(\n      value,\n      [-1, 0, 1],\n      [0, size, 0],\n      Extrapolate.CLAMP,\n    );\n\n    const scale = interpolate(\n      value,\n      [-1, 0, 1],\n      [\n        parallaxAdjacentItemScale,\n        parallaxScrollingScale,\n        parallaxAdjacentItemScale,\n      ],\n      Extrapolate.CLAMP,\n    );\n\n    return {\n      transform: [\n        vertical\n          ? {\n            translateY: translate,\n          }\n          : {\n            translateX: translate,\n          },\n        {\n          scale,\n        },\n      ],\n      zIndex,\n    };\n  };\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/layouts/stack.js b/lib/commonjs/layouts/stack.js
index b40afd893b217c51e04f257821fa56d48fbeb77f..e9e0ba9f61d1aed7c99d0651bbb02c03a288ec35 100644
--- a/lib/commonjs/layouts/stack.js
+++ b/lib/commonjs/layouts/stack.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.horizontalStackLayout=horizontalStackLayout;exports.useHorizontalStackLayout=useHorizontalStackLayout;exports.verticalStackLayout=verticalStackLayout;var _react=require("react");var _reactNative=require("react-native");var _reactNativeReanimated=require("react-native-reanimated");var screen=_reactNative.Dimensions.get("window");var _worklet_5756272565831_init_data={code:"function anonymous(_value) {\n  const {\n    screen,\n    modeConfig,\n    getCommonVariables,\n    getCommonStyles,\n    interpolate,\n    Extrapolate\n  } = this._closure;\n  const {\n    showLength: showLength,\n    snapDirection = \"left\",\n    moveSize = screen.width,\n    stackInterval = 18,\n    scaleInterval = 0.04,\n    opacityInterval = 0.1,\n    rotateZDeg = 30\n  } = modeConfig;\n  const transform = [];\n  const {\n    validLength: validLength,\n    value: value,\n    inputRange: inputRange\n  } = getCommonVariables({\n    showLength: showLength,\n    value: _value,\n    snapDirection: snapDirection\n  });\n  const {\n    zIndex: zIndex,\n    opacity: opacity\n  } = getCommonStyles({\n    validLength: validLength,\n    value: value,\n    opacityInterval: opacityInterval,\n    snapDirection: snapDirection\n  });\n  const styles = {\n    transform: transform,\n    zIndex: zIndex,\n    opacity: opacity\n  };\n  let translateX;\n  let scale;\n  let rotateZ;\n  if (snapDirection === \"left\") {\n    translateX = interpolate(value, inputRange, [-moveSize, 0, validLength * stackInterval], Extrapolate.CLAMP);\n    scale = interpolate(value, inputRange, [1, 1, 1 - validLength * scaleInterval], Extrapolate.CLAMP);\n    rotateZ = interpolate(value, inputRange, [-rotateZDeg, 0, 0], Extrapolate.CLAMP) + \"deg\";\n  } else if (snapDirection === \"right\") {\n    translateX = interpolate(value, inputRange, [-validLength * stackInterval, 0, moveSize], Extrapolate.CLAMP);\n    scale = interpolate(value, inputRange, [1 - validLength * scaleInterval, 1, 1], Extrapolate.CLAMP);\n    rotateZ = interpolate(value, inputRange, [0, 0, rotateZDeg], Extrapolate.CLAMP) + \"deg\";\n  }\n  transform.push({\n    translateX: translateX\n  }, {\n    scale: scale\n  }, {\n    rotateZ: rotateZ\n  });\n  return styles;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/stack.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_value\",\"screen\",\"modeConfig\",\"getCommonVariables\",\"getCommonStyles\",\"interpolate\",\"Extrapolate\",\"_closure\",\"showLength\",\"snapDirection\",\"moveSize\",\"width\",\"stackInterval\",\"scaleInterval\",\"opacityInterval\",\"rotateZDeg\",\"transform\",\"validLength\",\"value\",\"inputRange\",\"zIndex\",\"opacity\",\"styles\",\"translateX\",\"scale\",\"rotateZ\",\"CLAMP\",\"push\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/stack.ts\"],\"mappings\":\"AAsCS,SAACA,SAAcA,CAAKC,MAAA;EAAA;IAAAC,MAAA;IAAAC,UAAA;IAAAC,kBAAA;IAAAC,eAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAGzB,MAAM;IACJC,UAAU,EAAVA,UAAU;IACVC,aAAa,GAAG,MAAM;IACtBC,QAAQ,GAAGT,MAAM,CAACU,KAAK;IACvBC,aAAa,GAAG,EAAE;IAClBC,aAAa,GAAG,IAAI;IACpBC,eAAe,GAAG,GAAG;IACrBC,UAAU,GAAG;EACf,CAAC,GAAGb,UAAU;EAEd,MAAMc,SAAuC,GAAG,EAAE;EAClD,MAAM;IAAEC,WAAW,EAAXA,WAAW;IAAEC,KAAK,EAALA,KAAK;IAAEC,UAAA,EAAAA;EAAW,CAAC,GAAGhB,kBAAkB,CAAC;IAC5DK,UAAU,EAAEA,UAAW;IACvBU,KAAK,EAAElB,MAAM;IACbS,aAAA,EAAAA;EACF,CAAC,CAAC;EACF,MAAM;IAAEW,MAAM,EAANA,MAAM;IAAEC,OAAA,EAAAA;EAAQ,CAAC,GAAGjB,eAAe,CAAC;IAC1Ca,WAAW,EAAXA,WAAW;IACXC,KAAK,EAALA,KAAK;IACLJ,eAAe,EAAfA,eAAe;IACfL,aAAA,EAAAA;EACF,CAAC,CAAC;EAEF,MAAMa,MAAiB,GAAG;IACxBN,SAAS,EAATA,SAAS;IACTI,MAAM,EAANA,MAAM;IACNC,OAAA,EAAAA;EACF,CAAC;EAED,IAAIE,UAAkB;EACtB,IAAIC,KAAa;EACjB,IAAIC,OAAe;EAEnB,IAAIhB,aAAa,KAAK,MAAM,EAAE;IAC5Bc,UAAU,GAAGlB,WAAW,CACtBa,KAAK,EACLC,UAAU,EACV,CAAC,CAACT,QAAQ,EAAE,CAAC,EAAEO,WAAW,GAAGL,aAAa,CAAC,EAC3CN,WAAW,CAACoB,KACd,CAAC;IACDF,KAAK,GAAGnB,WAAW,CACjBa,KAAK,EACLC,UAAU,EACV,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,GAAGF,WAAW,GAAGJ,aAAa,CAAC,EACvCP,WAAW,CAACoB,KACd,CAAC;IACDD,OAAO,GAAMpB,WAAW,CACtBa,KAAK,EACLC,UAAU,EACV,CAAC,CAACJ,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,EACnBT,WAAW,CAACoB,KACd,CAAE,QAAI;EACR,CAAC,MACI,IAAIjB,aAAa,KAAK,OAAO,EAAE;IAClCc,UAAU,GAAGlB,WAAW,CACtBa,KAAK,EACLC,UAAU,EACV,CAAC,CAACF,WAAW,GAAGL,aAAa,EAAE,CAAC,EAAEF,QAAQ,CAAC,EAC3CJ,WAAW,CAACoB,KACd,CAAC;IACDF,KAAK,GAAGnB,WAAW,CACjBa,KAAK,EACLC,UAAU,EACV,CAAC,CAAC,GAAGF,WAAW,GAAGJ,aAAa,EAAE,CAAC,EAAE,CAAC,CAAC,EACvCP,WAAW,CAACoB,KACd,CAAC;IACDD,OAAO,GAAMpB,WAAW,CACtBa,KAAK,EACLC,UAAU,EACV,CAAC,CAAC,EAAE,CAAC,EAAEJ,UAAU,CAAC,EAClBT,WAAW,CAACoB,KACd,CAAE,QAAI;EACR;EAEAV,SAAS,CAACW,IAAI,CACZ;IACEJ,UAAU,EAAEA;EACd,CAAC,EACD;IACEC,KAAK,EAAEA;EACT,CAAC,EACD;IACEC,OAAO,EAAEA;EACX,CACF,CAAC;EAED,OAAOH,MAAM;AACf\"}"};function horizontalStackLayout(){var modeConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(){var _e=[new global.Error(),-7,-27];var _f=function _f(_value){var showLength=modeConfig.showLength,_modeConfig$snapDirec=modeConfig.snapDirection,snapDirection=_modeConfig$snapDirec===void 0?"left":_modeConfig$snapDirec,_modeConfig$moveSize=modeConfig.moveSize,moveSize=_modeConfig$moveSize===void 0?screen.width:_modeConfig$moveSize,_modeConfig$stackInte=modeConfig.stackInterval,stackInterval=_modeConfig$stackInte===void 0?18:_modeConfig$stackInte,_modeConfig$scaleInte=modeConfig.scaleInterval,scaleInterval=_modeConfig$scaleInte===void 0?0.04:_modeConfig$scaleInte,_modeConfig$opacityIn=modeConfig.opacityInterval,opacityInterval=_modeConfig$opacityIn===void 0?0.1:_modeConfig$opacityIn,_modeConfig$rotateZDe=modeConfig.rotateZDeg,rotateZDeg=_modeConfig$rotateZDe===void 0?30:_modeConfig$rotateZDe;var transform=[];var _getCommonVariables=getCommonVariables({showLength:showLength,value:_value,snapDirection:snapDirection}),validLength=_getCommonVariables.validLength,value=_getCommonVariables.value,inputRange=_getCommonVariables.inputRange;var _getCommonStyles=getCommonStyles({validLength:validLength,value:value,opacityInterval:opacityInterval,snapDirection:snapDirection}),zIndex=_getCommonStyles.zIndex,opacity=_getCommonStyles.opacity;var styles={transform:transform,zIndex:zIndex,opacity:opacity};var translateX;var scale;var rotateZ;if(snapDirection==="left"){translateX=(0,_reactNativeReanimated.interpolate)(value,inputRange,[-moveSize,0,validLength*stackInterval],_reactNativeReanimated.Extrapolate.CLAMP);scale=(0,_reactNativeReanimated.interpolate)(value,inputRange,[1,1,1-validLength*scaleInterval],_reactNativeReanimated.Extrapolate.CLAMP);rotateZ=`${(0,_reactNativeReanimated.interpolate)(value,inputRange,[-rotateZDeg,0,0],_reactNativeReanimated.Extrapolate.CLAMP)}deg`;}else if(snapDirection==="right"){translateX=(0,_reactNativeReanimated.interpolate)(value,inputRange,[-validLength*stackInterval,0,moveSize],_reactNativeReanimated.Extrapolate.CLAMP);scale=(0,_reactNativeReanimated.interpolate)(value,inputRange,[1-validLength*scaleInterval,1,1],_reactNativeReanimated.Extrapolate.CLAMP);rotateZ=`${(0,_reactNativeReanimated.interpolate)(value,inputRange,[0,0,rotateZDeg],_reactNativeReanimated.Extrapolate.CLAMP)}deg`;}transform.push({translateX:translateX},{scale:scale},{rotateZ:rotateZ});return styles;};_f._closure={screen:screen,modeConfig:modeConfig,getCommonVariables:getCommonVariables,getCommonStyles:getCommonStyles,interpolate:_reactNativeReanimated.interpolate,Extrapolate:_reactNativeReanimated.Extrapolate};_f.__initData=_worklet_5756272565831_init_data;_f.__workletHash=5756272565831;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();}function useHorizontalStackLayout(){var customAnimationConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var customConfig=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var config=(0,_react.useMemo)(function(){return Object.assign({type:customAnimationConfig.snapDirection==="right"?"negative":"positive",viewCount:customAnimationConfig.showLength},customConfig);},[customAnimationConfig,customConfig]);return{layout:horizontalStackLayout(customAnimationConfig),config:config};}var _worklet_8233536719177_init_data={code:"function anonymous(_value) {\n  const {\n    screen,\n    modeConfig,\n    getCommonVariables,\n    getCommonStyles,\n    interpolate,\n    Extrapolate\n  } = this._closure;\n  const {\n    showLength: showLength,\n    snapDirection = \"left\",\n    moveSize = screen.width,\n    stackInterval = 18,\n    scaleInterval = 0.04,\n    opacityInterval = 0.1,\n    rotateZDeg = 30\n  } = modeConfig;\n  const transform = [];\n  const {\n    validLength: validLength,\n    value: value,\n    inputRange: inputRange\n  } = getCommonVariables({\n    showLength: showLength,\n    value: _value,\n    snapDirection: snapDirection\n  });\n  const {\n    zIndex: zIndex,\n    opacity: opacity\n  } = getCommonStyles({\n    validLength: validLength,\n    value: value,\n    opacityInterval: opacityInterval,\n    snapDirection: snapDirection\n  });\n  const styles = {\n    transform: transform,\n    zIndex: zIndex,\n    opacity: opacity\n  };\n  let translateX;\n  let scale;\n  let rotateZ;\n  let translateY;\n  if (snapDirection === \"left\") {\n    translateX = interpolate(value, inputRange, [-moveSize, 0, 0], Extrapolate.CLAMP);\n    scale = interpolate(value, inputRange, [1, 1, 1 - validLength * scaleInterval], Extrapolate.CLAMP);\n    rotateZ = interpolate(value, inputRange, [-rotateZDeg, 0, 0], Extrapolate.CLAMP) + \"deg\";\n    translateY = interpolate(value, inputRange, [0, 0, validLength * stackInterval], Extrapolate.CLAMP);\n  } else if (snapDirection === \"right\") {\n    translateX = interpolate(value, inputRange, [0, 0, moveSize], Extrapolate.CLAMP);\n    scale = interpolate(value, inputRange, [1 - validLength * scaleInterval, 1, 1], Extrapolate.CLAMP);\n    rotateZ = interpolate(value, inputRange, [0, 0, rotateZDeg], Extrapolate.CLAMP) + \"deg\";\n    translateY = interpolate(value, inputRange, [validLength * stackInterval, 0, 0], Extrapolate.CLAMP);\n  }\n  transform.push({\n    translateX: translateX\n  }, {\n    scale: scale\n  }, {\n    rotateZ: rotateZ\n  }, {\n    translateY: translateY\n  });\n  return styles;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/stack.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_value\",\"screen\",\"modeConfig\",\"getCommonVariables\",\"getCommonStyles\",\"interpolate\",\"Extrapolate\",\"_closure\",\"showLength\",\"snapDirection\",\"moveSize\",\"width\",\"stackInterval\",\"scaleInterval\",\"opacityInterval\",\"rotateZDeg\",\"transform\",\"validLength\",\"value\",\"inputRange\",\"zIndex\",\"opacity\",\"styles\",\"translateX\",\"scale\",\"rotateZ\",\"translateY\",\"CLAMP\",\"push\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/stack.ts\"],\"mappings\":\"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\"}"};function verticalStackLayout(){var modeConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(){var _e=[new global.Error(),-7,-27];var _f=function _f(_value){var showLength=modeConfig.showLength,_modeConfig$snapDirec2=modeConfig.snapDirection,snapDirection=_modeConfig$snapDirec2===void 0?"left":_modeConfig$snapDirec2,_modeConfig$moveSize2=modeConfig.moveSize,moveSize=_modeConfig$moveSize2===void 0?screen.width:_modeConfig$moveSize2,_modeConfig$stackInte2=modeConfig.stackInterval,stackInterval=_modeConfig$stackInte2===void 0?18:_modeConfig$stackInte2,_modeConfig$scaleInte2=modeConfig.scaleInterval,scaleInterval=_modeConfig$scaleInte2===void 0?0.04:_modeConfig$scaleInte2,_modeConfig$opacityIn2=modeConfig.opacityInterval,opacityInterval=_modeConfig$opacityIn2===void 0?0.1:_modeConfig$opacityIn2,_modeConfig$rotateZDe2=modeConfig.rotateZDeg,rotateZDeg=_modeConfig$rotateZDe2===void 0?30:_modeConfig$rotateZDe2;var transform=[];var _getCommonVariables2=getCommonVariables({showLength:showLength,value:_value,snapDirection:snapDirection}),validLength=_getCommonVariables2.validLength,value=_getCommonVariables2.value,inputRange=_getCommonVariables2.inputRange;var _getCommonStyles2=getCommonStyles({validLength:validLength,value:value,opacityInterval:opacityInterval,snapDirection:snapDirection}),zIndex=_getCommonStyles2.zIndex,opacity=_getCommonStyles2.opacity;var styles={transform:transform,zIndex:zIndex,opacity:opacity};var translateX;var scale;var rotateZ;var translateY;if(snapDirection==="left"){translateX=(0,_reactNativeReanimated.interpolate)(value,inputRange,[-moveSize,0,0],_reactNativeReanimated.Extrapolate.CLAMP);scale=(0,_reactNativeReanimated.interpolate)(value,inputRange,[1,1,1-validLength*scaleInterval],_reactNativeReanimated.Extrapolate.CLAMP);rotateZ=`${(0,_reactNativeReanimated.interpolate)(value,inputRange,[-rotateZDeg,0,0],_reactNativeReanimated.Extrapolate.CLAMP)}deg`;translateY=(0,_reactNativeReanimated.interpolate)(value,inputRange,[0,0,validLength*stackInterval],_reactNativeReanimated.Extrapolate.CLAMP);}else if(snapDirection==="right"){translateX=(0,_reactNativeReanimated.interpolate)(value,inputRange,[0,0,moveSize],_reactNativeReanimated.Extrapolate.CLAMP);scale=(0,_reactNativeReanimated.interpolate)(value,inputRange,[1-validLength*scaleInterval,1,1],_reactNativeReanimated.Extrapolate.CLAMP);rotateZ=`${(0,_reactNativeReanimated.interpolate)(value,inputRange,[0,0,rotateZDeg],_reactNativeReanimated.Extrapolate.CLAMP)}deg`;translateY=(0,_reactNativeReanimated.interpolate)(value,inputRange,[validLength*stackInterval,0,0],_reactNativeReanimated.Extrapolate.CLAMP);}transform.push({translateX:translateX},{scale:scale},{rotateZ:rotateZ},{translateY:translateY});return styles;};_f._closure={screen:screen,modeConfig:modeConfig,getCommonVariables:getCommonVariables,getCommonStyles:getCommonStyles,interpolate:_reactNativeReanimated.interpolate,Extrapolate:_reactNativeReanimated.Extrapolate};_f.__initData=_worklet_8233536719177_init_data;_f.__workletHash=8233536719177;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();}var _worklet_10327424297064_init_data={code:"function getCommonVariables(opts) {\n  const {\n    showLength: showLength,\n    value: _value,\n    snapDirection: snapDirection\n  } = opts;\n  function easeInOutCubic(v) {\n    return v < 0.5 ? 4 * v * v * v : 1 - (-2 * v + 2) ** 3 / 2;\n  }\n  const page = Math.floor(Math.abs(_value));\n  const diff = Math.abs(_value) % 1;\n  const value = _value < 0 ? -(page + easeInOutCubic(diff)) : page + easeInOutCubic(diff);\n  const validLength = showLength - 1;\n  let inputRange;\n  if (snapDirection === \"left\") inputRange = [-1, 0, validLength];else if (snapDirection === \"right\") inputRange = [-validLength, 0, 1];else throw new Error(\"snapDirection must be set to either left or right\");\n  return {\n    inputRange: inputRange,\n    validLength: validLength,\n    value: value\n  };\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/stack.ts",sourceMap:"{\"version\":3,\"names\":[\"getCommonVariables\",\"opts\",\"showLength\",\"value\",\"_value\",\"snapDirection\",\"easeInOutCubic\",\"v\",\"page\",\"Math\",\"floor\",\"abs\",\"diff\",\"validLength\",\"inputRange\",\"Error\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/stack.ts\"],\"mappings\":\"AAsQA,SAAAA,kBAASA,CAAmBC,IAAA,EAI3B;EAGC,MAAM;IAAEC,UAAU,EAAVA,UAAU;IAAEC,KAAK,EAAEC,MAAM;IAAEC,aAAA,EAAAA;EAAc,CAAC,GAAGJ,IAAI;EACzD,SAASK,cAAcA,CAACC,CAAS,EAAU;IACzC,OAAOA,CAAC,GAAG,GAAG,GAAG,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAGA,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC;EAC5D;EACA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,GAAG,CAACP,MAAM,CAAC,CAAC;EACzC,MAAMQ,IAAI,GAAGH,IAAI,CAACE,GAAG,CAACP,MAAM,CAAC,GAAG,CAAC;EACjC,MAAMD,KAAK,GACHC,MAAM,GAAG,CAAC,GACR,EAAEI,IAAI,GAAGF,cAAc,CAACM,IAAI,CAAC,CAAC,GAC9BJ,IAAI,GAAGF,cAAc,CAACM,IAAI,CAAC;EACrC,MAAMC,WAAW,GAAGX,UAAU,GAAI,CAAC;EAEnC,IAAIY,UAAoC;EAExC,IAAIT,aAAa,KAAK,MAAM,EAC1BS,UAAU,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAED,WAAW,CAAC,CAAC,KAC/B,IAAIR,aAAa,KAAK,OAAO,EAChCS,UAAU,GAAG,CAAC,CAACD,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,KAElC,MAAM,IAAIE,KAAK,CAAC,mDAAmD,CAAC;EAEtE,OAAO;IACLD,UAAU,EAAVA,UAAU;IACVD,WAAW,EAAXA,WAAW;IACXV,KAAA,EAAAA;EACF,CAAC;AACH\"}"};var getCommonVariables=function(){var _e=[new global.Error(),1,-27];var _f=function _f(opts){var showLength=opts.showLength,_value=opts.value,snapDirection=opts.snapDirection;function easeInOutCubic(v){return v<0.5?4*v*v*v:1-(-2*v+2)**3/2;}var page=Math.floor(Math.abs(_value));var diff=Math.abs(_value)%1;var value=_value<0?-(page+easeInOutCubic(diff)):page+easeInOutCubic(diff);var validLength=showLength-1;var inputRange;if(snapDirection==="left")inputRange=[-1,0,validLength];else if(snapDirection==="right")inputRange=[-validLength,0,1];else throw new Error("snapDirection must be set to either left or right");return{inputRange:inputRange,validLength:validLength,value:value};};_f._closure={};_f.__initData=_worklet_10327424297064_init_data;_f.__workletHash=10327424297064;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();var _worklet_1169076184363_init_data={code:"function getCommonStyles(opts) {\n  const {\n    interpolate\n  } = this._closure;\n  const {\n    snapDirection: snapDirection,\n    validLength: validLength,\n    value: value,\n    opacityInterval: opacityInterval\n  } = opts;\n  let zIndex;\n  let opacity;\n  if (snapDirection === \"left\") {\n    zIndex = Math.floor(interpolate(value, [-1.5, -1, -1 + Number.MIN_VALUE, 0, validLength], [Number.MIN_VALUE, validLength, validLength, validLength - 1, -1]) * 10000) / 100;\n    opacity = interpolate(value, [-1, 0, validLength - 1, validLength], [0.25, 1, 1 - (validLength - 1) * opacityInterval, 0.25]);\n  } else if (snapDirection === \"right\") {\n    zIndex = Math.floor(interpolate(value, [-validLength, 0, 1 - Number.MIN_VALUE, 1, 1.5], [1, validLength - 1, validLength, validLength, Number.MIN_VALUE]) * 10000) / 100;\n    opacity = interpolate(value, [-validLength, 1 - validLength, 0, 1], [0.25, 1 - (validLength - 1) * opacityInterval, 1, 0.25]);\n  } else {\n    throw new Error(\"snapDirection must be set to either left or right\");\n  }\n  return {\n    zIndex: zIndex,\n    opacity: opacity\n  };\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/stack.ts",sourceMap:"{\"version\":3,\"names\":[\"getCommonStyles\",\"opts\",\"interpolate\",\"_closure\",\"snapDirection\",\"validLength\",\"value\",\"opacityInterval\",\"zIndex\",\"opacity\",\"Math\",\"floor\",\"Number\",\"MIN_VALUE\",\"Error\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/layouts/stack.ts\"],\"mappings\":\"AAySA,SAAAA,eAASA,CAAgBC,IAAA,EAKxB;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAGC,MAAM;IAAEC,aAAa,EAAbA,aAAa;IAAEC,WAAW,EAAXA,WAAW;IAAEC,KAAK,EAALA,KAAK;IAAEC,eAAA,EAAAA;EAAgB,CAAC,GAAGN,IAAI;EAEnE,IAAIO,MAAc;EAClB,IAAIC,OAAe;EAEnB,IAAIL,aAAa,KAAK,MAAM,EAAE;IAC5BI,MAAM,GACIE,IAAI,CAACC,KAAK,CAChBT,WAAW,CACTI,KAAK,EACL,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGM,MAAM,CAACC,SAAS,EAAE,CAAC,EAAER,WAAW,CAAC,EACjD,CACEO,MAAM,CAACC,SAAS,EAChBR,WAAW,EACXA,WAAW,EACXA,WAAW,GAAG,CAAC,EACf,CAAC,CAAC,CAEN,CAAC,GAAG,KACN,CAAC,GAAG,GAAG;IAETI,OAAO,GAAGP,WAAW,CACnBI,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAED,WAAW,GAAG,CAAC,EAAEA,WAAW,CAAC,EACrC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,GAAG,CAACA,WAAW,GAAG,CAAC,IAAIE,eAAe,EAAE,IAAI,CACzD,CAAC;EACH,CAAC,MACI,IAAIH,aAAa,KAAK,OAAO,EAAE;IAClCI,MAAM,GACIE,IAAI,CAACC,KAAK,CAChBT,WAAW,CACTI,KAAK,EACL,CAAC,CAACD,WAAW,EAAE,CAAC,EAAE,CAAC,GAAGO,MAAM,CAACC,SAAS,EAAE,CAAC,EAAE,GAAG,CAAC,EAC/C,CACE,CAAC,EACDR,WAAW,GAAG,CAAC,EACfA,WAAW,EACXA,WAAW,EACXO,MAAM,CAACC,SAAS,CAEpB,CAAC,GAAG,KACN,CAAC,GAAG,GAAG;IACTJ,OAAO,GAAGP,WAAW,CACnBI,KAAK,EACL,CAAC,CAACD,WAAW,EAAE,CAAC,GAAGA,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,EACrC,CAAC,IAAI,EAAE,CAAC,GAAG,CAACA,WAAW,GAAG,CAAC,IAAIE,eAAe,EAAE,CAAC,EAAE,IAAI,CACzD,CAAC;EACH,CAAC,MACI;IACH,MAAM,IAAIO,KAAK,CAAC,mDAAmD,CAAC;EACtE;EAEA,OAAO;IACLN,MAAM,EAANA,MAAM;IACNC,OAAA,EAAAA;EACF,CAAC;AACH\"}"};var getCommonStyles=function(){var _e=[new global.Error(),-2,-27];var _f=function _f(opts){var snapDirection=opts.snapDirection,validLength=opts.validLength,value=opts.value,opacityInterval=opts.opacityInterval;var zIndex;var opacity;if(snapDirection==="left"){zIndex=Math.floor((0,_reactNativeReanimated.interpolate)(value,[-1.5,-1,-1+Number.MIN_VALUE,0,validLength],[Number.MIN_VALUE,validLength,validLength,validLength-1,-1])*10000)/100;opacity=(0,_reactNativeReanimated.interpolate)(value,[-1,0,validLength-1,validLength],[0.25,1,1-(validLength-1)*opacityInterval,0.25]);}else if(snapDirection==="right"){zIndex=Math.floor((0,_reactNativeReanimated.interpolate)(value,[-validLength,0,1-Number.MIN_VALUE,1,1.5],[1,validLength-1,validLength,validLength,Number.MIN_VALUE])*10000)/100;opacity=(0,_reactNativeReanimated.interpolate)(value,[-validLength,1-validLength,0,1],[0.25,1-(validLength-1)*opacityInterval,1,0.25]);}else{throw new Error("snapDirection must be set to either left or right");}return{zIndex:zIndex,opacity:opacity};};_f._closure={interpolate:_reactNativeReanimated.interpolate};_f.__initData=_worklet_1169076184363_init_data;_f.__workletHash=1169076184363;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();
+Object.defineProperty(exports,"__esModule",{value:true});exports.horizontalStackLayout=horizontalStackLayout;exports.useHorizontalStackLayout=useHorizontalStackLayout;exports.verticalStackLayout=verticalStackLayout;var _react=require("react");var _reactNative=require("react-native");var _reactNativeReanimated=require("react-native-reanimated");var screen=_reactNative.Dimensions.get("window");var _worklet_5756272565831_init_data={code:"function anonymous(_value) {\n  const {\n    screen,\n    modeConfig,\n    getCommonVariables,\n    getCommonStyles,\n    interpolate,\n    Extrapolate\n  } = this._closure;\n  const {\n    showLength: showLength,\n    snapDirection = \"left\",\n    moveSize = screen.width,\n    stackInterval = 18,\n    scaleInterval = 0.04,\n    opacityInterval = 0.1,\n    rotateZDeg = 30\n  } = modeConfig;\n  const transform = [];\n  const {\n    validLength: validLength,\n    value: value,\n    inputRange: inputRange\n  } = getCommonVariables({\n    showLength: showLength,\n    value: _value,\n    snapDirection: snapDirection\n  });\n  const {\n    zIndex: zIndex,\n    opacity: opacity\n  } = getCommonStyles({\n    validLength: validLength,\n    value: value,\n    opacityInterval: opacityInterval,\n    snapDirection: snapDirection\n  });\n  const styles = {\n    transform: transform,\n    zIndex: zIndex,\n    opacity: opacity\n  };\n  let translateX;\n  let scale;\n  let rotateZ;\n  if (snapDirection === \"left\") {\n    translateX = interpolate(value, inputRange, [-moveSize, 0, validLength * stackInterval], Extrapolate.CLAMP);\n    scale = interpolate(value, inputRange, [1, 1, 1 - validLength * scaleInterval], Extrapolate.CLAMP);\n    rotateZ = interpolate(value, inputRange, [-rotateZDeg, 0, 0], Extrapolate.CLAMP) + \"deg\";\n  } else if (snapDirection === \"right\") {\n    translateX = interpolate(value, inputRange, [-validLength * stackInterval, 0, moveSize], Extrapolate.CLAMP);\n    scale = interpolate(value, inputRange, [1 - validLength * scaleInterval, 1, 1], Extrapolate.CLAMP);\n    rotateZ = interpolate(value, inputRange, [0, 0, rotateZDeg], Extrapolate.CLAMP) + \"deg\";\n  }\n  transform.push({\n    translateX: translateX\n  }, {\n    scale: scale\n  }, {\n    rotateZ: rotateZ\n  });\n  return styles;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/stack.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_value\",\"screen\",\"modeConfig\",\"getCommonVariables\",\"getCommonStyles\",\"interpolate\",\"Extrapolate\",\"_closure\",\"showLength\",\"snapDirection\",\"moveSize\",\"width\",\"stackInterval\",\"scaleInterval\",\"opacityInterval\",\"rotateZDeg\",\"transform\",\"validLength\",\"value\",\"inputRange\",\"zIndex\",\"opacity\",\"styles\",\"translateX\",\"scale\",\"rotateZ\",\"CLAMP\",\"push\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/stack.ts\"],\"mappings\":\"AAsCS,SAACA,SAAcA,CAAKC,MAAA;EAAA;IAAAC,MAAA;IAAAC,UAAA;IAAAC,kBAAA;IAAAC,eAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAGzB,MAAM;IACJC,UAAU,EAAVA,UAAU;IACVC,aAAa,GAAG,MAAM;IACtBC,QAAQ,GAAGT,MAAM,CAACU,KAAK;IACvBC,aAAa,GAAG,EAAE;IAClBC,aAAa,GAAG,IAAI;IACpBC,eAAe,GAAG,GAAG;IACrBC,UAAU,GAAG;EACf,CAAC,GAAGb,UAAU;EAEd,MAAMc,SAAuC,GAAG,EAAE;EAClD,MAAM;IAAEC,WAAW,EAAXA,WAAW;IAAEC,KAAK,EAALA,KAAK;IAAEC,UAAA,EAAAA;EAAW,CAAC,GAAGhB,kBAAkB,CAAC;IAC5DK,UAAU,EAAEA,UAAW;IACvBU,KAAK,EAAElB,MAAM;IACbS,aAAA,EAAAA;EACF,CAAC,CAAC;EACF,MAAM;IAAEW,MAAM,EAANA,MAAM;IAAEC,OAAA,EAAAA;EAAQ,CAAC,GAAGjB,eAAe,CAAC;IAC1Ca,WAAW,EAAXA,WAAW;IACXC,KAAK,EAALA,KAAK;IACLJ,eAAe,EAAfA,eAAe;IACfL,aAAA,EAAAA;EACF,CAAC,CAAC;EAEF,MAAMa,MAAiB,GAAG;IACxBN,SAAS,EAATA,SAAS;IACTI,MAAM,EAANA,MAAM;IACNC,OAAA,EAAAA;EACF,CAAC;EAED,IAAIE,UAAkB;EACtB,IAAIC,KAAa;EACjB,IAAIC,OAAe;EAEnB,IAAIhB,aAAa,KAAK,MAAM,EAAE;IAC5Bc,UAAU,GAAGlB,WAAW,CACtBa,KAAK,EACLC,UAAU,EACV,CAAC,CAACT,QAAQ,EAAE,CAAC,EAAEO,WAAW,GAAGL,aAAa,CAAC,EAC3CN,WAAW,CAACoB,KACd,CAAC;IACDF,KAAK,GAAGnB,WAAW,CACjBa,KAAK,EACLC,UAAU,EACV,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,GAAGF,WAAW,GAAGJ,aAAa,CAAC,EACvCP,WAAW,CAACoB,KACd,CAAC;IACDD,OAAO,GAAMpB,WAAW,CACtBa,KAAK,EACLC,UAAU,EACV,CAAC,CAACJ,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,EACnBT,WAAW,CAACoB,KACd,CAAE,QAAI;EACR,CAAC,MACI,IAAIjB,aAAa,KAAK,OAAO,EAAE;IAClCc,UAAU,GAAGlB,WAAW,CACtBa,KAAK,EACLC,UAAU,EACV,CAAC,CAACF,WAAW,GAAGL,aAAa,EAAE,CAAC,EAAEF,QAAQ,CAAC,EAC3CJ,WAAW,CAACoB,KACd,CAAC;IACDF,KAAK,GAAGnB,WAAW,CACjBa,KAAK,EACLC,UAAU,EACV,CAAC,CAAC,GAAGF,WAAW,GAAGJ,aAAa,EAAE,CAAC,EAAE,CAAC,CAAC,EACvCP,WAAW,CAACoB,KACd,CAAC;IACDD,OAAO,GAAMpB,WAAW,CACtBa,KAAK,EACLC,UAAU,EACV,CAAC,CAAC,EAAE,CAAC,EAAEJ,UAAU,CAAC,EAClBT,WAAW,CAACoB,KACd,CAAE,QAAI;EACR;EAEAV,SAAS,CAACW,IAAI,CACZ;IACEJ,UAAU,EAAEA;EACd,CAAC,EACD;IACEC,KAAK,EAAEA;EACT,CAAC,EACD;IACEC,OAAO,EAAEA;EACX,CACF,CAAC;EAED,OAAOH,MAAM;AACf\"}"};function horizontalStackLayout(){var modeConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(){var _e=[new global.Error(),-7,-27];var _f=function _f(_value){var showLength=modeConfig.showLength,_modeConfig$snapDirec=modeConfig.snapDirection,snapDirection=_modeConfig$snapDirec===void 0?"left":_modeConfig$snapDirec,_modeConfig$moveSize=modeConfig.moveSize,moveSize=_modeConfig$moveSize===void 0?screen.width:_modeConfig$moveSize,_modeConfig$stackInte=modeConfig.stackInterval,stackInterval=_modeConfig$stackInte===void 0?18:_modeConfig$stackInte,_modeConfig$scaleInte=modeConfig.scaleInterval,scaleInterval=_modeConfig$scaleInte===void 0?0.04:_modeConfig$scaleInte,_modeConfig$opacityIn=modeConfig.opacityInterval,opacityInterval=_modeConfig$opacityIn===void 0?0.1:_modeConfig$opacityIn,_modeConfig$rotateZDe=modeConfig.rotateZDeg,rotateZDeg=_modeConfig$rotateZDe===void 0?30:_modeConfig$rotateZDe;var transform=[];var _getCommonVariables=getCommonVariables({showLength:showLength,value:_value,snapDirection:snapDirection}),validLength=_getCommonVariables.validLength,value=_getCommonVariables.value,inputRange=_getCommonVariables.inputRange;var _getCommonStyles=getCommonStyles({validLength:validLength,value:value,opacityInterval:opacityInterval,snapDirection:snapDirection}),zIndex=_getCommonStyles.zIndex,opacity=_getCommonStyles.opacity;var styles={transform:transform,zIndex:zIndex,opacity:opacity};var translateX;var scale;var rotateZ;if(snapDirection==="left"){translateX=(0,_reactNativeReanimated.interpolate)(value,inputRange,[-moveSize,0,validLength*stackInterval],_reactNativeReanimated.Extrapolate.CLAMP);scale=(0,_reactNativeReanimated.interpolate)(value,inputRange,[1,1,1-validLength*scaleInterval],_reactNativeReanimated.Extrapolate.CLAMP);rotateZ=`${(0,_reactNativeReanimated.interpolate)(value,inputRange,[-rotateZDeg,0,0],_reactNativeReanimated.Extrapolate.CLAMP)}deg`;}else if(snapDirection==="right"){translateX=(0,_reactNativeReanimated.interpolate)(value,inputRange,[-validLength*stackInterval,0,moveSize],_reactNativeReanimated.Extrapolate.CLAMP);scale=(0,_reactNativeReanimated.interpolate)(value,inputRange,[1-validLength*scaleInterval,1,1],_reactNativeReanimated.Extrapolate.CLAMP);rotateZ=`${(0,_reactNativeReanimated.interpolate)(value,inputRange,[0,0,rotateZDeg],_reactNativeReanimated.Extrapolate.CLAMP)}deg`;}transform.push({translateX:translateX},{scale:scale},{rotateZ:rotateZ});return styles;};_f._closure={screen:screen,modeConfig:modeConfig,getCommonVariables:getCommonVariables,getCommonStyles:getCommonStyles,interpolate:_reactNativeReanimated.interpolate,Extrapolate:_reactNativeReanimated.Extrapolate};_f.__initData=_worklet_5756272565831_init_data;_f.__workletHash=5756272565831;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();}function useHorizontalStackLayout(){var customAnimationConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var customConfig=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var config=(0,_react.useMemo)(function(){return Object.assign({type:customAnimationConfig.snapDirection==="right"?"negative":"positive",viewCount:customAnimationConfig.showLength},customConfig);},[customAnimationConfig,customConfig]);return{layout:horizontalStackLayout(customAnimationConfig),config:config};}var _worklet_8233536719177_init_data={code:"function anonymous(_value) {\n  const {\n    screen,\n    modeConfig,\n    getCommonVariables,\n    getCommonStyles,\n    interpolate,\n    Extrapolate\n  } = this._closure;\n  const {\n    showLength: showLength,\n    snapDirection = \"left\",\n    moveSize = screen.width,\n    stackInterval = 18,\n    scaleInterval = 0.04,\n    opacityInterval = 0.1,\n    rotateZDeg = 30\n  } = modeConfig;\n  const transform = [];\n  const {\n    validLength: validLength,\n    value: value,\n    inputRange: inputRange\n  } = getCommonVariables({\n    showLength: showLength,\n    value: _value,\n    snapDirection: snapDirection\n  });\n  const {\n    zIndex: zIndex,\n    opacity: opacity\n  } = getCommonStyles({\n    validLength: validLength,\n    value: value,\n    opacityInterval: opacityInterval,\n    snapDirection: snapDirection\n  });\n  const styles = {\n    transform: transform,\n    zIndex: zIndex,\n    opacity: opacity\n  };\n  let translateX;\n  let scale;\n  let rotateZ;\n  let translateY;\n  if (snapDirection === \"left\") {\n    translateX = interpolate(value, inputRange, [-moveSize, 0, 0], Extrapolate.CLAMP);\n    scale = interpolate(value, inputRange, [1, 1, 1 - validLength * scaleInterval], Extrapolate.CLAMP);\n    rotateZ = interpolate(value, inputRange, [-rotateZDeg, 0, 0], Extrapolate.CLAMP) + \"deg\";\n    translateY = interpolate(value, inputRange, [0, 0, validLength * stackInterval], Extrapolate.CLAMP);\n  } else if (snapDirection === \"right\") {\n    translateX = interpolate(value, inputRange, [0, 0, moveSize], Extrapolate.CLAMP);\n    scale = interpolate(value, inputRange, [1 - validLength * scaleInterval, 1, 1], Extrapolate.CLAMP);\n    rotateZ = interpolate(value, inputRange, [0, 0, rotateZDeg], Extrapolate.CLAMP) + \"deg\";\n    translateY = interpolate(value, inputRange, [validLength * stackInterval, 0, 0], Extrapolate.CLAMP);\n  }\n  transform.push({\n    translateX: translateX\n  }, {\n    scale: scale\n  }, {\n    rotateZ: rotateZ\n  }, {\n    translateY: translateY\n  });\n  return styles;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/stack.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"_value\",\"screen\",\"modeConfig\",\"getCommonVariables\",\"getCommonStyles\",\"interpolate\",\"Extrapolate\",\"_closure\",\"showLength\",\"snapDirection\",\"moveSize\",\"width\",\"stackInterval\",\"scaleInterval\",\"opacityInterval\",\"rotateZDeg\",\"transform\",\"validLength\",\"value\",\"inputRange\",\"zIndex\",\"opacity\",\"styles\",\"translateX\",\"scale\",\"rotateZ\",\"translateY\",\"CLAMP\",\"push\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/stack.ts\"],\"mappings\":\"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\"}"};function verticalStackLayout(){var modeConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(){var _e=[new global.Error(),-7,-27];var _f=function _f(_value){var showLength=modeConfig.showLength,_modeConfig$snapDirec2=modeConfig.snapDirection,snapDirection=_modeConfig$snapDirec2===void 0?"left":_modeConfig$snapDirec2,_modeConfig$moveSize2=modeConfig.moveSize,moveSize=_modeConfig$moveSize2===void 0?screen.width:_modeConfig$moveSize2,_modeConfig$stackInte2=modeConfig.stackInterval,stackInterval=_modeConfig$stackInte2===void 0?18:_modeConfig$stackInte2,_modeConfig$scaleInte2=modeConfig.scaleInterval,scaleInterval=_modeConfig$scaleInte2===void 0?0.04:_modeConfig$scaleInte2,_modeConfig$opacityIn2=modeConfig.opacityInterval,opacityInterval=_modeConfig$opacityIn2===void 0?0.1:_modeConfig$opacityIn2,_modeConfig$rotateZDe2=modeConfig.rotateZDeg,rotateZDeg=_modeConfig$rotateZDe2===void 0?30:_modeConfig$rotateZDe2;var transform=[];var _getCommonVariables2=getCommonVariables({showLength:showLength,value:_value,snapDirection:snapDirection}),validLength=_getCommonVariables2.validLength,value=_getCommonVariables2.value,inputRange=_getCommonVariables2.inputRange;var _getCommonStyles2=getCommonStyles({validLength:validLength,value:value,opacityInterval:opacityInterval,snapDirection:snapDirection}),zIndex=_getCommonStyles2.zIndex,opacity=_getCommonStyles2.opacity;var styles={transform:transform,zIndex:zIndex,opacity:opacity};var translateX;var scale;var rotateZ;var translateY;if(snapDirection==="left"){translateX=(0,_reactNativeReanimated.interpolate)(value,inputRange,[-moveSize,0,0],_reactNativeReanimated.Extrapolate.CLAMP);scale=(0,_reactNativeReanimated.interpolate)(value,inputRange,[1,1,1-validLength*scaleInterval],_reactNativeReanimated.Extrapolate.CLAMP);rotateZ=`${(0,_reactNativeReanimated.interpolate)(value,inputRange,[-rotateZDeg,0,0],_reactNativeReanimated.Extrapolate.CLAMP)}deg`;translateY=(0,_reactNativeReanimated.interpolate)(value,inputRange,[0,0,validLength*stackInterval],_reactNativeReanimated.Extrapolate.CLAMP);}else if(snapDirection==="right"){translateX=(0,_reactNativeReanimated.interpolate)(value,inputRange,[0,0,moveSize],_reactNativeReanimated.Extrapolate.CLAMP);scale=(0,_reactNativeReanimated.interpolate)(value,inputRange,[1-validLength*scaleInterval,1,1],_reactNativeReanimated.Extrapolate.CLAMP);rotateZ=`${(0,_reactNativeReanimated.interpolate)(value,inputRange,[0,0,rotateZDeg],_reactNativeReanimated.Extrapolate.CLAMP)}deg`;translateY=(0,_reactNativeReanimated.interpolate)(value,inputRange,[validLength*stackInterval,0,0],_reactNativeReanimated.Extrapolate.CLAMP);}transform.push({translateX:translateX},{scale:scale},{rotateZ:rotateZ},{translateY:translateY});return styles;};_f._closure={screen:screen,modeConfig:modeConfig,getCommonVariables:getCommonVariables,getCommonStyles:getCommonStyles,interpolate:_reactNativeReanimated.interpolate,Extrapolate:_reactNativeReanimated.Extrapolate};_f.__initData=_worklet_8233536719177_init_data;_f.__workletHash=8233536719177;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();}var _worklet_10327424297064_init_data={code:"function getCommonVariables(opts) {\n  const {\n    showLength: showLength,\n    value: _value,\n    snapDirection: snapDirection\n  } = opts;\n  function easeInOutCubic(v) {\n    return v < 0.5 ? 4 * v * v * v : 1 - (-2 * v + 2) ** 3 / 2;\n  }\n  const page = Math.floor(Math.abs(_value));\n  const diff = Math.abs(_value) % 1;\n  const value = _value < 0 ? -(page + easeInOutCubic(diff)) : page + easeInOutCubic(diff);\n  const validLength = showLength - 1;\n  let inputRange;\n  if (snapDirection === \"left\") inputRange = [-1, 0, validLength];else if (snapDirection === \"right\") inputRange = [-validLength, 0, 1];else throw new Error(\"snapDirection must be set to either left or right\");\n  return {\n    inputRange: inputRange,\n    validLength: validLength,\n    value: value\n  };\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/stack.ts",sourceMap:"{\"version\":3,\"names\":[\"getCommonVariables\",\"opts\",\"showLength\",\"value\",\"_value\",\"snapDirection\",\"easeInOutCubic\",\"v\",\"page\",\"Math\",\"floor\",\"abs\",\"diff\",\"validLength\",\"inputRange\",\"Error\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/stack.ts\"],\"mappings\":\"AAsQA,SAAAA,kBAASA,CAAmBC,IAAA,EAI3B;EAGC,MAAM;IAAEC,UAAU,EAAVA,UAAU;IAAEC,KAAK,EAAEC,MAAM;IAAEC,aAAA,EAAAA;EAAc,CAAC,GAAGJ,IAAI;EACzD,SAASK,cAAcA,CAACC,CAAS,EAAU;IACzC,OAAOA,CAAC,GAAG,GAAG,GAAG,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAGA,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAGA,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC;EAC5D;EACA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,GAAG,CAACP,MAAM,CAAC,CAAC;EACzC,MAAMQ,IAAI,GAAGH,IAAI,CAACE,GAAG,CAACP,MAAM,CAAC,GAAG,CAAC;EACjC,MAAMD,KAAK,GACHC,MAAM,GAAG,CAAC,GACR,EAAEI,IAAI,GAAGF,cAAc,CAACM,IAAI,CAAC,CAAC,GAC9BJ,IAAI,GAAGF,cAAc,CAACM,IAAI,CAAC;EACrC,MAAMC,WAAW,GAAGX,UAAU,GAAI,CAAC;EAEnC,IAAIY,UAAoC;EAExC,IAAIT,aAAa,KAAK,MAAM,EAC1BS,UAAU,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAED,WAAW,CAAC,CAAC,KAC/B,IAAIR,aAAa,KAAK,OAAO,EAChCS,UAAU,GAAG,CAAC,CAACD,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,KAElC,MAAM,IAAIE,KAAK,CAAC,mDAAmD,CAAC;EAEtE,OAAO;IACLD,UAAU,EAAVA,UAAU;IACVD,WAAW,EAAXA,WAAW;IACXV,KAAA,EAAAA;EACF,CAAC;AACH\"}"};var getCommonVariables=function(){var _e=[new global.Error(),1,-27];var _f=function _f(opts){var showLength=opts.showLength,_value=opts.value,snapDirection=opts.snapDirection;function easeInOutCubic(v){return v<0.5?4*v*v*v:1-(-2*v+2)**3/2;}var page=Math.floor(Math.abs(_value));var diff=Math.abs(_value)%1;var value=_value<0?-(page+easeInOutCubic(diff)):page+easeInOutCubic(diff);var validLength=showLength-1;var inputRange;if(snapDirection==="left")inputRange=[-1,0,validLength];else if(snapDirection==="right")inputRange=[-validLength,0,1];else throw new Error("snapDirection must be set to either left or right");return{inputRange:inputRange,validLength:validLength,value:value};};_f._closure={};_f.__initData=_worklet_10327424297064_init_data;_f.__workletHash=10327424297064;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();var _worklet_1169076184363_init_data={code:"function getCommonStyles(opts) {\n  const {\n    interpolate\n  } = this._closure;\n  const {\n    snapDirection: snapDirection,\n    validLength: validLength,\n    value: value,\n    opacityInterval: opacityInterval\n  } = opts;\n  let zIndex;\n  let opacity;\n  if (snapDirection === \"left\") {\n    zIndex = Math.floor(interpolate(value, [-1.5, -1, -1 + Number.MIN_VALUE, 0, validLength], [Number.MIN_VALUE, validLength, validLength, validLength - 1, -1]) * 10000) / 100;\n    opacity = interpolate(value, [-1, 0, validLength - 1, validLength], [0.25, 1, 1 - (validLength - 1) * opacityInterval, 0.25]);\n  } else if (snapDirection === \"right\") {\n    zIndex = Math.floor(interpolate(value, [-validLength, 0, 1 - Number.MIN_VALUE, 1, 1.5], [1, validLength - 1, validLength, validLength, Number.MIN_VALUE]) * 10000) / 100;\n    opacity = interpolate(value, [-validLength, 1 - validLength, 0, 1], [0.25, 1 - (validLength - 1) * opacityInterval, 1, 0.25]);\n  } else {\n    throw new Error(\"snapDirection must be set to either left or right\");\n  }\n  return {\n    zIndex: zIndex,\n    opacity: opacity\n  };\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/layouts/stack.ts",sourceMap:"{\"version\":3,\"names\":[\"getCommonStyles\",\"opts\",\"interpolate\",\"_closure\",\"snapDirection\",\"validLength\",\"value\",\"opacityInterval\",\"zIndex\",\"opacity\",\"Math\",\"floor\",\"Number\",\"MIN_VALUE\",\"Error\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/layouts/stack.ts\"],\"mappings\":\"AAySA,SAAAA,eAASA,CAAgBC,IAAA,EAKxB;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAGC,MAAM;IAAEC,aAAa,EAAbA,aAAa;IAAEC,WAAW,EAAXA,WAAW;IAAEC,KAAK,EAALA,KAAK;IAAEC,eAAA,EAAAA;EAAgB,CAAC,GAAGN,IAAI;EAEnE,IAAIO,MAAc;EAClB,IAAIC,OAAe;EAEnB,IAAIL,aAAa,KAAK,MAAM,EAAE;IAC5BI,MAAM,GACIE,IAAI,CAACC,KAAK,CAChBT,WAAW,CACTI,KAAK,EACL,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGM,MAAM,CAACC,SAAS,EAAE,CAAC,EAAER,WAAW,CAAC,EACjD,CACEO,MAAM,CAACC,SAAS,EAChBR,WAAW,EACXA,WAAW,EACXA,WAAW,GAAG,CAAC,EACf,CAAC,CAAC,CAEN,CAAC,GAAG,KACN,CAAC,GAAG,GAAG;IAETI,OAAO,GAAGP,WAAW,CACnBI,KAAK,EACL,CAAC,CAAC,CAAC,EAAE,CAAC,EAAED,WAAW,GAAG,CAAC,EAAEA,WAAW,CAAC,EACrC,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,GAAG,CAACA,WAAW,GAAG,CAAC,IAAIE,eAAe,EAAE,IAAI,CACzD,CAAC;EACH,CAAC,MACI,IAAIH,aAAa,KAAK,OAAO,EAAE;IAClCI,MAAM,GACIE,IAAI,CAACC,KAAK,CAChBT,WAAW,CACTI,KAAK,EACL,CAAC,CAACD,WAAW,EAAE,CAAC,EAAE,CAAC,GAAGO,MAAM,CAACC,SAAS,EAAE,CAAC,EAAE,GAAG,CAAC,EAC/C,CACE,CAAC,EACDR,WAAW,GAAG,CAAC,EACfA,WAAW,EACXA,WAAW,EACXO,MAAM,CAACC,SAAS,CAEpB,CAAC,GAAG,KACN,CAAC,GAAG,GAAG;IACTJ,OAAO,GAAGP,WAAW,CACnBI,KAAK,EACL,CAAC,CAACD,WAAW,EAAE,CAAC,GAAGA,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,EACrC,CAAC,IAAI,EAAE,CAAC,GAAG,CAACA,WAAW,GAAG,CAAC,IAAIE,eAAe,EAAE,CAAC,EAAE,IAAI,CACzD,CAAC;EACH,CAAC,MACI;IACH,MAAM,IAAIO,KAAK,CAAC,mDAAmD,CAAC;EACtE;EAEA,OAAO;IACLN,MAAM,EAANA,MAAM;IACNC,OAAA,EAAAA;EACF,CAAC;AACH\"}"};var getCommonStyles=function(){var _e=[new global.Error(),-2,-27];var _f=function _f(opts){var snapDirection=opts.snapDirection,validLength=opts.validLength,value=opts.value,opacityInterval=opts.opacityInterval;var zIndex;var opacity;if(snapDirection==="left"){zIndex=Math.floor((0,_reactNativeReanimated.interpolate)(value,[-1.5,-1,-1+Number.MIN_VALUE,0,validLength],[Number.MIN_VALUE,validLength,validLength,validLength-1,-1])*10000)/100;opacity=(0,_reactNativeReanimated.interpolate)(value,[-1,0,validLength-1,validLength],[0.25,1,1-(validLength-1)*opacityInterval,0.25]);}else if(snapDirection==="right"){zIndex=Math.floor((0,_reactNativeReanimated.interpolate)(value,[-validLength,0,1-Number.MIN_VALUE,1,1.5],[1,validLength-1,validLength,validLength,Number.MIN_VALUE])*10000)/100;opacity=(0,_reactNativeReanimated.interpolate)(value,[-validLength,1-validLength,0,1],[0.25,1-(validLength-1)*opacityInterval,1,0.25]);}else{throw new Error("snapDirection must be set to either left or right");}return{zIndex:zIndex,opacity:opacity};};_f._closure={interpolate:_reactNativeReanimated.interpolate};_f.__initData=_worklet_1169076184363_init_data;_f.__workletHash=1169076184363;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();
 //# sourceMappingURL=stack.js.map
\ No newline at end of file
diff --git a/lib/commonjs/layouts/stack.js.map b/lib/commonjs/layouts/stack.js.map
index 7c949eb96415d4eb3845dc94807df9e0098a810d..126c76dfb18c8daabd2e8eba549699b3a9696f88 100644
--- a/lib/commonjs/layouts/stack.js.map
+++ b/lib/commonjs/layouts/stack.js.map
@@ -1 +1 @@
-{"version":3,"sources":["stack.ts"],"names":["screen","Dimensions","get","horizontalStackLayout","modeConfig","_value","showLength","snapDirection","moveSize","width","stackInterval","scaleInterval","opacityInterval","rotateZDeg","transform","getCommonVariables","value","validLength","inputRange","getCommonStyles","zIndex","opacity","styles","translateX","scale","rotateZ","Extrapolate","CLAMP","push","interpolate","useHorizontalStackLayout","customAnimationConfig","customConfig","config","type","viewCount","layout","verticalStackLayout","translateY","opts","easeInOutCubic","v","page","Math","floor","abs","diff","Error","Number","MIN_VALUE"],"mappings":"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","sourcesContent":["import { useMemo } from \"react\";\nimport type { TransformsStyle, ViewStyle } from \"react-native\";\nimport { Dimensions } from \"react-native\";\nimport { Extrapolate, interpolate } from \"react-native-reanimated\";\n\nimport type { IComputedDirectionTypes, CustomConfig } from \"../types\";\n\nconst screen = Dimensions.get(\"window\");\n\nexport interface ILayoutConfig {\n  showLength?: number\n  moveSize?: number\n  stackInterval?: number\n  scaleInterval?: number\n  opacityInterval?: number\n  rotateZDeg?: number\n  snapDirection?: \"left\" | \"right\"\n}\n\nexport type TStackModeProps = IComputedDirectionTypes<{\n  /**\n     * Carousel Animated transitions.\n     */\n  mode?: \"horizontal-stack\" | \"vertical-stack\"\n  /**\n     * Stack animation style.\n     * @default\n     *     mode: 'vertical',\n     *     snapDirection: 'right',\n     *     moveSize: window.width,\n     *     stackInterval: 30,\n     *     scaleInterval: 0.08,\n     *     rotateZDeg: 135,\n     */\n  modeConfig?: ILayoutConfig\n}>;\n\nexport function horizontalStackLayout(modeConfig: ILayoutConfig = {}) {\n  return (_value: number) => {\n    \"worklet\";\n\n    const {\n      showLength,\n      snapDirection = \"left\",\n      moveSize = screen.width,\n      stackInterval = 18,\n      scaleInterval = 0.04,\n      opacityInterval = 0.1,\n      rotateZDeg = 30,\n    } = modeConfig;\n\n    const transform: TransformsStyle[\"transform\"] = [];\n    const { validLength, value, inputRange } = getCommonVariables({\n      showLength: showLength!,\n      value: _value,\n      snapDirection,\n    });\n    const { zIndex, opacity } = getCommonStyles({\n      validLength,\n      value,\n      opacityInterval,\n      snapDirection,\n    });\n\n    const styles: ViewStyle = {\n      transform,\n      zIndex,\n      opacity,\n    };\n\n    let translateX: number;\n    let scale: number;\n    let rotateZ: string;\n\n    if (snapDirection === \"left\") {\n      translateX = interpolate(\n        value,\n        inputRange,\n        [-moveSize, 0, validLength * stackInterval],\n        Extrapolate.CLAMP,\n      );\n      scale = interpolate(\n        value,\n        inputRange,\n        [1, 1, 1 - validLength * scaleInterval],\n        Extrapolate.CLAMP,\n      );\n      rotateZ = `${interpolate(\n        value,\n        inputRange,\n        [-rotateZDeg, 0, 0],\n        Extrapolate.CLAMP,\n      )}deg`;\n    }\n    else if (snapDirection === \"right\") {\n      translateX = interpolate(\n        value,\n        inputRange,\n        [-validLength * stackInterval, 0, moveSize],\n        Extrapolate.CLAMP,\n      );\n      scale = interpolate(\n        value,\n        inputRange,\n        [1 - validLength * scaleInterval, 1, 1],\n        Extrapolate.CLAMP,\n      );\n      rotateZ = `${interpolate(\n        value,\n        inputRange,\n        [0, 0, rotateZDeg],\n        Extrapolate.CLAMP,\n      )}deg`;\n    }\n\n    transform.push(\n      {\n        translateX: translateX!,\n      },\n      {\n        scale: scale!,\n      },\n      {\n        rotateZ: rotateZ!,\n      },\n    );\n\n    return styles;\n  };\n}\n\nexport function useHorizontalStackLayout(\n  customAnimationConfig: ILayoutConfig = {},\n  customConfig: CustomConfig = {},\n) {\n  const config = useMemo(\n    () => ({\n      type:\n                customAnimationConfig.snapDirection === \"right\"\n                  ? \"negative\"\n                  : \"positive\",\n      viewCount: customAnimationConfig.showLength,\n      ...customConfig,\n    }),\n    [customAnimationConfig, customConfig],\n  );\n\n  return {\n    layout: horizontalStackLayout(customAnimationConfig),\n    config,\n  };\n}\n\nexport function verticalStackLayout(modeConfig: ILayoutConfig = {}) {\n  return (_value: number) => {\n    \"worklet\";\n\n    const {\n      showLength,\n      snapDirection = \"left\",\n      moveSize = screen.width,\n      stackInterval = 18,\n      scaleInterval = 0.04,\n      opacityInterval = 0.1,\n      rotateZDeg = 30,\n    } = modeConfig;\n    const transform: TransformsStyle[\"transform\"] = [];\n    const { validLength, value, inputRange } = getCommonVariables({\n      showLength: showLength!,\n      value: _value,\n      snapDirection,\n    });\n    const { zIndex, opacity } = getCommonStyles({\n      validLength,\n      value,\n      opacityInterval,\n      snapDirection,\n    });\n\n    const styles: ViewStyle = {\n      transform,\n      zIndex,\n      opacity,\n    };\n\n    let translateX: number;\n    let scale: number;\n    let rotateZ: string;\n    let translateY: number;\n\n    if (snapDirection === \"left\") {\n      translateX = interpolate(\n        value,\n        inputRange,\n        [-moveSize, 0, 0],\n        Extrapolate.CLAMP,\n      );\n      scale = interpolate(\n        value,\n        inputRange,\n        [1, 1, 1 - validLength * scaleInterval],\n        Extrapolate.CLAMP,\n      );\n      rotateZ = `${interpolate(\n        value,\n        inputRange,\n        [-rotateZDeg, 0, 0],\n        Extrapolate.CLAMP,\n      )}deg`;\n      translateY = interpolate(\n        value,\n        inputRange,\n        [0, 0, validLength * stackInterval],\n        Extrapolate.CLAMP,\n      );\n    }\n    else if (snapDirection === \"right\") {\n      translateX = interpolate(\n        value,\n        inputRange,\n        [0, 0, moveSize],\n        Extrapolate.CLAMP,\n      );\n      scale = interpolate(\n        value,\n        inputRange,\n        [1 - validLength * scaleInterval, 1, 1],\n        Extrapolate.CLAMP,\n      );\n      rotateZ = `${interpolate(\n        value,\n        inputRange,\n        [0, 0, rotateZDeg],\n        Extrapolate.CLAMP,\n      )}deg`;\n      translateY = interpolate(\n        value,\n        inputRange,\n        [validLength * stackInterval, 0, 0],\n        Extrapolate.CLAMP,\n      );\n    }\n\n    transform.push(\n      {\n        translateX: translateX!,\n      },\n      {\n        scale: scale!,\n      },\n      {\n        rotateZ: rotateZ!,\n      },\n      {\n        translateY: translateY!,\n      },\n    );\n\n    return styles;\n  };\n}\n\nfunction getCommonVariables(opts: {\n  value: number\n  showLength: number\n  snapDirection: \"left\" | \"right\"\n}) {\n  \"worklet\";\n\n  const { showLength, value: _value, snapDirection } = opts;\n  function easeInOutCubic(v: number): number {\n    return v < 0.5 ? 4 * v * v * v : 1 - (-2 * v + 2) ** 3 / 2;\n  }\n  const page = Math.floor(Math.abs(_value));\n  const diff = Math.abs(_value) % 1;\n  const value\n        = _value < 0\n          ? -(page + easeInOutCubic(diff))\n          : page + easeInOutCubic(diff);\n  const validLength = showLength! - 1;\n\n  let inputRange: [number, number, number];\n\n  if (snapDirection === \"left\")\n    inputRange = [-1, 0, validLength];\n  else if (snapDirection === \"right\")\n    inputRange = [-validLength, 0, 1];\n  else\n    throw new Error(\"snapDirection must be set to either left or right\");\n\n  return {\n    inputRange,\n    validLength,\n    value,\n  };\n}\n\nfunction getCommonStyles(opts: {\n  value: number\n  validLength: number\n  opacityInterval: number\n  snapDirection: \"left\" | \"right\"\n}) {\n  \"worklet\";\n\n  const { snapDirection, validLength, value, opacityInterval } = opts;\n\n  let zIndex: number;\n  let opacity: number;\n\n  if (snapDirection === \"left\") {\n    zIndex\n            = Math.floor(\n        interpolate(\n          value,\n          [-1.5, -1, -1 + Number.MIN_VALUE, 0, validLength],\n          [\n            Number.MIN_VALUE,\n            validLength,\n            validLength,\n            validLength - 1,\n            -1,\n          ],\n        ) * 10000,\n      ) / 100;\n\n    opacity = interpolate(\n      value,\n      [-1, 0, validLength - 1, validLength],\n      [0.25, 1, 1 - (validLength - 1) * opacityInterval, 0.25],\n    );\n  }\n  else if (snapDirection === \"right\") {\n    zIndex\n            = Math.floor(\n        interpolate(\n          value,\n          [-validLength, 0, 1 - Number.MIN_VALUE, 1, 1.5],\n          [\n            1,\n            validLength - 1,\n            validLength,\n            validLength,\n            Number.MIN_VALUE,\n          ],\n        ) * 10000,\n      ) / 100;\n    opacity = interpolate(\n      value,\n      [-validLength, 1 - validLength, 0, 1],\n      [0.25, 1 - (validLength - 1) * opacityInterval, 1, 0.25],\n    );\n  }\n  else {\n    throw new Error(\"snapDirection must be set to either left or right\");\n  }\n\n  return {\n    zIndex,\n    opacity,\n  };\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["stack.ts"],"names":["screen","Dimensions","get","horizontalStackLayout","modeConfig","_value","showLength","snapDirection","moveSize","width","stackInterval","scaleInterval","opacityInterval","rotateZDeg","transform","getCommonVariables","value","validLength","inputRange","getCommonStyles","zIndex","opacity","styles","translateX","scale","rotateZ","Extrapolate","CLAMP","push","interpolate","useHorizontalStackLayout","customAnimationConfig","customConfig","config","type","viewCount","layout","verticalStackLayout","translateY","opts","easeInOutCubic","v","page","Math","floor","abs","diff","Error","Number","MIN_VALUE"],"mappings":"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","sourcesContent":["import { useMemo } from \"react\";\nimport type { TransformsStyle, ViewStyle } from \"react-native\";\nimport { Dimensions } from \"react-native\";\nimport { Extrapolate, interpolate } from \"react-native-reanimated\";\n\nimport type { IComputedDirectionTypes, CustomConfig } from \"../types\";\n\nconst screen = Dimensions.get(\"window\");\n\nexport interface ILayoutConfig {\n  showLength?: number\n  moveSize?: number\n  stackInterval?: number\n  scaleInterval?: number\n  opacityInterval?: number\n  rotateZDeg?: number\n  snapDirection?: \"left\" | \"right\"\n}\n\nexport type TStackModeProps = IComputedDirectionTypes<{\n  /**\n     * Carousel Animated transitions.\n     */\n  mode?: \"horizontal-stack\" | \"vertical-stack\"\n  /**\n     * Stack animation style.\n     * @default\n     *     mode: 'vertical',\n     *     snapDirection: 'right',\n     *     moveSize: window.width,\n     *     stackInterval: 30,\n     *     scaleInterval: 0.08,\n     *     rotateZDeg: 135,\n     */\n  modeConfig?: ILayoutConfig\n}>;\n\nexport function horizontalStackLayout(modeConfig: ILayoutConfig = {}) {\n  return (_value: number) => {\n    \"worklet\";\n\n    const {\n      showLength,\n      snapDirection = \"left\",\n      moveSize = screen.width,\n      stackInterval = 18,\n      scaleInterval = 0.04,\n      opacityInterval = 0.1,\n      rotateZDeg = 30,\n    } = modeConfig;\n\n    const transform: TransformsStyle[\"transform\"] = [];\n    const { validLength, value, inputRange } = getCommonVariables({\n      showLength: showLength!,\n      value: _value,\n      snapDirection,\n    });\n    const { zIndex, opacity } = getCommonStyles({\n      validLength,\n      value,\n      opacityInterval,\n      snapDirection,\n    });\n\n    const styles: ViewStyle = {\n      transform,\n      zIndex,\n      opacity,\n    };\n\n    let translateX: number;\n    let scale: number;\n    let rotateZ: string;\n\n    if (snapDirection === \"left\") {\n      translateX = interpolate(\n        value,\n        inputRange,\n        [-moveSize, 0, validLength * stackInterval],\n        Extrapolate.CLAMP,\n      );\n      scale = interpolate(\n        value,\n        inputRange,\n        [1, 1, 1 - validLength * scaleInterval],\n        Extrapolate.CLAMP,\n      );\n      rotateZ = `${interpolate(\n        value,\n        inputRange,\n        [-rotateZDeg, 0, 0],\n        Extrapolate.CLAMP,\n      )}deg`;\n    }\n    else if (snapDirection === \"right\") {\n      translateX = interpolate(\n        value,\n        inputRange,\n        [-validLength * stackInterval, 0, moveSize],\n        Extrapolate.CLAMP,\n      );\n      scale = interpolate(\n        value,\n        inputRange,\n        [1 - validLength * scaleInterval, 1, 1],\n        Extrapolate.CLAMP,\n      );\n      rotateZ = `${interpolate(\n        value,\n        inputRange,\n        [0, 0, rotateZDeg],\n        Extrapolate.CLAMP,\n      )}deg`;\n    }\n\n    transform.push(\n      {\n        translateX: translateX!,\n      },\n      {\n        scale: scale!,\n      },\n      {\n        rotateZ: rotateZ!,\n      },\n    );\n\n    return styles;\n  };\n}\n\nexport function useHorizontalStackLayout(\n  customAnimationConfig: ILayoutConfig = {},\n  customConfig: CustomConfig = {},\n) {\n  const config = useMemo(\n    () => ({\n      type:\n                customAnimationConfig.snapDirection === \"right\"\n                  ? \"negative\"\n                  : \"positive\",\n      viewCount: customAnimationConfig.showLength,\n      ...customConfig,\n    }),\n    [customAnimationConfig, customConfig],\n  );\n\n  return {\n    layout: horizontalStackLayout(customAnimationConfig),\n    config,\n  };\n}\n\nexport function verticalStackLayout(modeConfig: ILayoutConfig = {}) {\n  return (_value: number) => {\n    \"worklet\";\n\n    const {\n      showLength,\n      snapDirection = \"left\",\n      moveSize = screen.width,\n      stackInterval = 18,\n      scaleInterval = 0.04,\n      opacityInterval = 0.1,\n      rotateZDeg = 30,\n    } = modeConfig;\n    const transform: TransformsStyle[\"transform\"] = [];\n    const { validLength, value, inputRange } = getCommonVariables({\n      showLength: showLength!,\n      value: _value,\n      snapDirection,\n    });\n    const { zIndex, opacity } = getCommonStyles({\n      validLength,\n      value,\n      opacityInterval,\n      snapDirection,\n    });\n\n    const styles: ViewStyle = {\n      transform,\n      zIndex,\n      opacity,\n    };\n\n    let translateX: number;\n    let scale: number;\n    let rotateZ: string;\n    let translateY: number;\n\n    if (snapDirection === \"left\") {\n      translateX = interpolate(\n        value,\n        inputRange,\n        [-moveSize, 0, 0],\n        Extrapolate.CLAMP,\n      );\n      scale = interpolate(\n        value,\n        inputRange,\n        [1, 1, 1 - validLength * scaleInterval],\n        Extrapolate.CLAMP,\n      );\n      rotateZ = `${interpolate(\n        value,\n        inputRange,\n        [-rotateZDeg, 0, 0],\n        Extrapolate.CLAMP,\n      )}deg`;\n      translateY = interpolate(\n        value,\n        inputRange,\n        [0, 0, validLength * stackInterval],\n        Extrapolate.CLAMP,\n      );\n    }\n    else if (snapDirection === \"right\") {\n      translateX = interpolate(\n        value,\n        inputRange,\n        [0, 0, moveSize],\n        Extrapolate.CLAMP,\n      );\n      scale = interpolate(\n        value,\n        inputRange,\n        [1 - validLength * scaleInterval, 1, 1],\n        Extrapolate.CLAMP,\n      );\n      rotateZ = `${interpolate(\n        value,\n        inputRange,\n        [0, 0, rotateZDeg],\n        Extrapolate.CLAMP,\n      )}deg`;\n      translateY = interpolate(\n        value,\n        inputRange,\n        [validLength * stackInterval, 0, 0],\n        Extrapolate.CLAMP,\n      );\n    }\n\n    transform.push(\n      {\n        translateX: translateX!,\n      },\n      {\n        scale: scale!,\n      },\n      {\n        rotateZ: rotateZ!,\n      },\n      {\n        translateY: translateY!,\n      },\n    );\n\n    return styles;\n  };\n}\n\nfunction getCommonVariables(opts: {\n  value: number\n  showLength: number\n  snapDirection: \"left\" | \"right\"\n}) {\n  \"worklet\";\n\n  const { showLength, value: _value, snapDirection } = opts;\n  function easeInOutCubic(v: number): number {\n    return v < 0.5 ? 4 * v * v * v : 1 - (-2 * v + 2) ** 3 / 2;\n  }\n  const page = Math.floor(Math.abs(_value));\n  const diff = Math.abs(_value) % 1;\n  const value\n        = _value < 0\n          ? -(page + easeInOutCubic(diff))\n          : page + easeInOutCubic(diff);\n  const validLength = showLength! - 1;\n\n  let inputRange: [number, number, number];\n\n  if (snapDirection === \"left\")\n    inputRange = [-1, 0, validLength];\n  else if (snapDirection === \"right\")\n    inputRange = [-validLength, 0, 1];\n  else\n    throw new Error(\"snapDirection must be set to either left or right\");\n\n  return {\n    inputRange,\n    validLength,\n    value,\n  };\n}\n\nfunction getCommonStyles(opts: {\n  value: number\n  validLength: number\n  opacityInterval: number\n  snapDirection: \"left\" | \"right\"\n}) {\n  \"worklet\";\n\n  const { snapDirection, validLength, value, opacityInterval } = opts;\n\n  let zIndex: number;\n  let opacity: number;\n\n  if (snapDirection === \"left\") {\n    zIndex\n            = Math.floor(\n        interpolate(\n          value,\n          [-1.5, -1, -1 + Number.MIN_VALUE, 0, validLength],\n          [\n            Number.MIN_VALUE,\n            validLength,\n            validLength,\n            validLength - 1,\n            -1,\n          ],\n        ) * 10000,\n      ) / 100;\n\n    opacity = interpolate(\n      value,\n      [-1, 0, validLength - 1, validLength],\n      [0.25, 1, 1 - (validLength - 1) * opacityInterval, 0.25],\n    );\n  }\n  else if (snapDirection === \"right\") {\n    zIndex\n            = Math.floor(\n        interpolate(\n          value,\n          [-validLength, 0, 1 - Number.MIN_VALUE, 1, 1.5],\n          [\n            1,\n            validLength - 1,\n            validLength,\n            validLength,\n            Number.MIN_VALUE,\n          ],\n        ) * 10000,\n      ) / 100;\n    opacity = interpolate(\n      value,\n      [-validLength, 1 - validLength, 0, 1],\n      [0.25, 1 - (validLength - 1) * opacityInterval, 1, 0.25],\n    );\n  }\n  else {\n    throw new Error(\"snapDirection must be set to either left or right\");\n  }\n\n  return {\n    zIndex,\n    opacity,\n  };\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/utils/computedWithAutoFillData.js b/lib/commonjs/utils/computedWithAutoFillData.js
index cc6eaf05759af86a2bc3b6e7ff04c6b2655e42d5..5c7d24185c5cbe4b8873b9d0c80dcde868789acf 100644
--- a/lib/commonjs/utils/computedWithAutoFillData.js
+++ b/lib/commonjs/utils/computedWithAutoFillData.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.computedFillDataWithAutoFillData=computedFillDataWithAutoFillData;exports.computedOffsetXValueWithAutoFillData=void 0;exports.computedRealIndexWithAutoFillData=computedRealIndexWithAutoFillData;exports.convertToSharedIndex=void 0;var _constants=require("../constants");var SINGLE_ITEM=_constants.DATA_LENGTH.SINGLE_ITEM,DOUBLE_ITEM=_constants.DATA_LENGTH.DOUBLE_ITEM;var _worklet_7389651216713_init_data={code:"function isAutoFillData(params) {\n  return !!params.loop && !!params.autoFillData;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts",sourceMap:"{\"version\":3,\"names\":[\"isAutoFillData\",\"params\",\"loop\",\"autoFillData\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts\"],\"mappings\":\"AAIA,SAAAA,cAASA,CAAeC,MAAA,EAAgD;EAEtE,OAAO,CAAC,CAACA,MAAM,CAACC,IAAI,IAAI,CAAC,CAACD,MAAM,CAACE,YAAY;AAC/C\"}"};var isAutoFillData=function(){var _e=[new global.Error(),1,-27];var _f=function _f(params){return!!params.loop&&!!params.autoFillData;};_f._closure={};_f.__initData=_worklet_7389651216713_init_data;_f.__workletHash=7389651216713;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();var _worklet_17207998500923_init_data={code:"function convertToSharedIndex(params) {\n  const {\n    isAutoFillData,\n    SINGLE_ITEM,\n    DOUBLE_ITEM\n  } = this._closure;\n  const {\n    loop: loop,\n    rawDataLength: rawDataLength,\n    index: index,\n    autoFillData: autoFillData\n  } = params;\n  if (isAutoFillData({\n    loop: loop,\n    autoFillData: autoFillData\n  })) {\n    switch (rawDataLength) {\n      case SINGLE_ITEM:\n        return 0;\n      case DOUBLE_ITEM:\n        return index % 2;\n    }\n  }\n  return index;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts",sourceMap:"{\"version\":3,\"names\":[\"convertToSharedIndex\",\"params\",\"isAutoFillData\",\"SINGLE_ITEM\",\"DOUBLE_ITEM\",\"_closure\",\"loop\",\"rawDataLength\",\"index\",\"autoFillData\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts\"],\"mappings\":\"AAcO,SAAAA,oBAASA,CACdC,MAAA,EAA4D;EAAA;IAAAC,cAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAG5D,MAAM;IAAEC,IAAI,EAAJA,IAAI;IAAEC,aAAa,EAAbA,aAAa;IAAEC,KAAK,EAALA,KAAK;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGR,MAAM;EAE3D,IAAIC,cAAc,CAAC;IAAEI,IAAI,EAAJA,IAAI;IAAEG,YAAA,EAAAA;EAAa,CAAC,CAAC,EAAE;IAC1C,QAAQF,aAAa;MACnB,KAAKJ,WAAW;QACd,OAAO,CAAC;MACV,KAAKC,WAAW;QACd,OAAOI,KAAK,GAAG,CAAC;IACpB;EACF;EAEA,OAAOA,KAAK;AACd\"}"};var convertToSharedIndex=function(){var _e=[new global.Error(),-4,-27];var _f=function _f(params){var loop=params.loop,rawDataLength=params.rawDataLength,index=params.index,autoFillData=params.autoFillData;if(isAutoFillData({loop:loop,autoFillData:autoFillData})){switch(rawDataLength){case SINGLE_ITEM:return 0;case DOUBLE_ITEM:return index%2;}}return index;};_f._closure={isAutoFillData:isAutoFillData,SINGLE_ITEM:SINGLE_ITEM,DOUBLE_ITEM:DOUBLE_ITEM};_f.__initData=_worklet_17207998500923_init_data;_f.__workletHash=17207998500923;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.convertToSharedIndex=convertToSharedIndex;var _worklet_16818473015252_init_data={code:"function computedOffsetXValueWithAutoFillData(params) {\n  const {\n    isAutoFillData,\n    SINGLE_ITEM,\n    DOUBLE_ITEM\n  } = this._closure;\n  const {\n    rawDataLength: rawDataLength,\n    value: value,\n    size: size,\n    loop: loop,\n    autoFillData: autoFillData\n  } = params;\n  if (isAutoFillData({\n    loop: loop,\n    autoFillData: autoFillData\n  })) {\n    switch (rawDataLength) {\n      case SINGLE_ITEM:\n        return value % size;\n      case DOUBLE_ITEM:\n        return value % (size * 2);\n    }\n  }\n  return value;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts",sourceMap:"{\"version\":3,\"names\":[\"computedOffsetXValueWithAutoFillData\",\"params\",\"isAutoFillData\",\"SINGLE_ITEM\",\"DOUBLE_ITEM\",\"_closure\",\"rawDataLength\",\"value\",\"size\",\"loop\",\"autoFillData\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts\"],\"mappings\":\"AAgCO,SAAAA,oCAASA,CACdC,MAAA,EAIE;EAAA;IAAAC,cAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAIF,MAAM;IAAEC,aAAa,EAAbA,aAAa;IAAEC,KAAK,EAALA,KAAK;IAAEC,IAAI,EAAJA,IAAI;IAAEC,IAAI,EAAJA,IAAI;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGT,MAAM;EAEjE,IAAIC,cAAc,CAAC;IAAEO,IAAI,EAAJA,IAAI;IAAEC,YAAA,EAAAA;EAAa,CAAC,CAAC,EAAE;IAC1C,QAAQJ,aAAa;MACnB,KAAKH,WAAW;QACd,OAAOI,KAAK,GAAGC,IAAI;MACrB,KAAKJ,WAAW;QACd,OAAOG,KAAK,IAAIC,IAAI,GAAG,CAAC,CAAC;IAC7B;EACF;EAEA,OAAOD,KAAK;AACd\"}"};var computedOffsetXValueWithAutoFillData=function(){var _e=[new global.Error(),-4,-27];var _f=function _f(params){var rawDataLength=params.rawDataLength,value=params.value,size=params.size,loop=params.loop,autoFillData=params.autoFillData;if(isAutoFillData({loop:loop,autoFillData:autoFillData})){switch(rawDataLength){case SINGLE_ITEM:return value%size;case DOUBLE_ITEM:return value%(size*2);}}return value;};_f._closure={isAutoFillData:isAutoFillData,SINGLE_ITEM:SINGLE_ITEM,DOUBLE_ITEM:DOUBLE_ITEM};_f.__initData=_worklet_16818473015252_init_data;_f.__workletHash=16818473015252;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.computedOffsetXValueWithAutoFillData=computedOffsetXValueWithAutoFillData;function computedRealIndexWithAutoFillData(params){var index=params.index,dataLength=params.dataLength,loop=params.loop,autoFillData=params.autoFillData;if(isAutoFillData({loop:loop,autoFillData:autoFillData})){switch(dataLength){case SINGLE_ITEM:return index%1;case DOUBLE_ITEM:return index%2;}}return index;}function computedFillDataWithAutoFillData(params){var data=params.data,loop=params.loop,autoFillData=params.autoFillData,dataLength=params.dataLength;if(isAutoFillData({loop:loop,autoFillData:autoFillData})){switch(dataLength){case SINGLE_ITEM:return[data[0],data[0],data[0]];case DOUBLE_ITEM:return[data[0],data[1],data[0],data[1]];}}return data;}
+Object.defineProperty(exports,"__esModule",{value:true});exports.computedFillDataWithAutoFillData=computedFillDataWithAutoFillData;exports.computedOffsetXValueWithAutoFillData=void 0;exports.computedRealIndexWithAutoFillData=computedRealIndexWithAutoFillData;exports.convertToSharedIndex=void 0;var _constants=require("../constants");var SINGLE_ITEM=_constants.DATA_LENGTH.SINGLE_ITEM,DOUBLE_ITEM=_constants.DATA_LENGTH.DOUBLE_ITEM;var _worklet_7389651216713_init_data={code:"function isAutoFillData(params) {\n  return !!params.loop && !!params.autoFillData;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts",sourceMap:"{\"version\":3,\"names\":[\"isAutoFillData\",\"params\",\"loop\",\"autoFillData\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts\"],\"mappings\":\"AAIA,SAAAA,cAASA,CAAeC,MAAA,EAAgD;EAEtE,OAAO,CAAC,CAACA,MAAM,CAACC,IAAI,IAAI,CAAC,CAACD,MAAM,CAACE,YAAY;AAC/C\"}"};var isAutoFillData=function(){var _e=[new global.Error(),1,-27];var _f=function _f(params){return!!params.loop&&!!params.autoFillData;};_f._closure={};_f.__initData=_worklet_7389651216713_init_data;_f.__workletHash=7389651216713;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();var _worklet_17207998500923_init_data={code:"function convertToSharedIndex(params) {\n  const {\n    isAutoFillData,\n    SINGLE_ITEM,\n    DOUBLE_ITEM\n  } = this._closure;\n  const {\n    loop: loop,\n    rawDataLength: rawDataLength,\n    index: index,\n    autoFillData: autoFillData\n  } = params;\n  if (isAutoFillData({\n    loop: loop,\n    autoFillData: autoFillData\n  })) {\n    switch (rawDataLength) {\n      case SINGLE_ITEM:\n        return 0;\n      case DOUBLE_ITEM:\n        return index % 2;\n    }\n  }\n  return index;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts",sourceMap:"{\"version\":3,\"names\":[\"convertToSharedIndex\",\"params\",\"isAutoFillData\",\"SINGLE_ITEM\",\"DOUBLE_ITEM\",\"_closure\",\"loop\",\"rawDataLength\",\"index\",\"autoFillData\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts\"],\"mappings\":\"AAcO,SAAAA,oBAASA,CACdC,MAAA,EAA4D;EAAA;IAAAC,cAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAG5D,MAAM;IAAEC,IAAI,EAAJA,IAAI;IAAEC,aAAa,EAAbA,aAAa;IAAEC,KAAK,EAALA,KAAK;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGR,MAAM;EAE3D,IAAIC,cAAc,CAAC;IAAEI,IAAI,EAAJA,IAAI;IAAEG,YAAA,EAAAA;EAAa,CAAC,CAAC,EAAE;IAC1C,QAAQF,aAAa;MACnB,KAAKJ,WAAW;QACd,OAAO,CAAC;MACV,KAAKC,WAAW;QACd,OAAOI,KAAK,GAAG,CAAC;IACpB;EACF;EAEA,OAAOA,KAAK;AACd\"}"};var convertToSharedIndex=function(){var _e=[new global.Error(),-4,-27];var _f=function _f(params){var loop=params.loop,rawDataLength=params.rawDataLength,index=params.index,autoFillData=params.autoFillData;if(isAutoFillData({loop:loop,autoFillData:autoFillData})){switch(rawDataLength){case SINGLE_ITEM:return 0;case DOUBLE_ITEM:return index%2;}}return index;};_f._closure={isAutoFillData:isAutoFillData,SINGLE_ITEM:SINGLE_ITEM,DOUBLE_ITEM:DOUBLE_ITEM};_f.__initData=_worklet_17207998500923_init_data;_f.__workletHash=17207998500923;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.convertToSharedIndex=convertToSharedIndex;var _worklet_16818473015252_init_data={code:"function computedOffsetXValueWithAutoFillData(params) {\n  const {\n    isAutoFillData,\n    SINGLE_ITEM,\n    DOUBLE_ITEM\n  } = this._closure;\n  const {\n    rawDataLength: rawDataLength,\n    value: value,\n    size: size,\n    loop: loop,\n    autoFillData: autoFillData\n  } = params;\n  if (isAutoFillData({\n    loop: loop,\n    autoFillData: autoFillData\n  })) {\n    switch (rawDataLength) {\n      case SINGLE_ITEM:\n        return value % size;\n      case DOUBLE_ITEM:\n        return value % (size * 2);\n    }\n  }\n  return value;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts",sourceMap:"{\"version\":3,\"names\":[\"computedOffsetXValueWithAutoFillData\",\"params\",\"isAutoFillData\",\"SINGLE_ITEM\",\"DOUBLE_ITEM\",\"_closure\",\"rawDataLength\",\"value\",\"size\",\"loop\",\"autoFillData\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/utils/computedWithAutoFillData.ts\"],\"mappings\":\"AAgCO,SAAAA,oCAASA,CACdC,MAAA,EAIE;EAAA;IAAAC,cAAA;IAAAC,WAAA;IAAAC;EAAA,SAAAC,QAAA;EAIF,MAAM;IAAEC,aAAa,EAAbA,aAAa;IAAEC,KAAK,EAALA,KAAK;IAAEC,IAAI,EAAJA,IAAI;IAAEC,IAAI,EAAJA,IAAI;IAAEC,YAAA,EAAAA;EAAa,CAAC,GAAGT,MAAM;EAEjE,IAAIC,cAAc,CAAC;IAAEO,IAAI,EAAJA,IAAI;IAAEC,YAAA,EAAAA;EAAa,CAAC,CAAC,EAAE;IAC1C,QAAQJ,aAAa;MACnB,KAAKH,WAAW;QACd,OAAOI,KAAK,GAAGC,IAAI;MACrB,KAAKJ,WAAW;QACd,OAAOG,KAAK,IAAIC,IAAI,GAAG,CAAC,CAAC;IAC7B;EACF;EAEA,OAAOD,KAAK;AACd\"}"};var computedOffsetXValueWithAutoFillData=function(){var _e=[new global.Error(),-4,-27];var _f=function _f(params){var rawDataLength=params.rawDataLength,value=params.value,size=params.size,loop=params.loop,autoFillData=params.autoFillData;if(isAutoFillData({loop:loop,autoFillData:autoFillData})){switch(rawDataLength){case SINGLE_ITEM:return value%size;case DOUBLE_ITEM:return value%(size*2);}}return value;};_f._closure={isAutoFillData:isAutoFillData,SINGLE_ITEM:SINGLE_ITEM,DOUBLE_ITEM:DOUBLE_ITEM};_f.__initData=_worklet_16818473015252_init_data;_f.__workletHash=16818473015252;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.computedOffsetXValueWithAutoFillData=computedOffsetXValueWithAutoFillData;function computedRealIndexWithAutoFillData(params){var index=params.index,dataLength=params.dataLength,loop=params.loop,autoFillData=params.autoFillData;if(isAutoFillData({loop:loop,autoFillData:autoFillData})){switch(dataLength){case SINGLE_ITEM:return index%1;case DOUBLE_ITEM:return index%2;}}return index;}function computedFillDataWithAutoFillData(params){var data=params.data,loop=params.loop,autoFillData=params.autoFillData,dataLength=params.dataLength;if(isAutoFillData({loop:loop,autoFillData:autoFillData})){switch(dataLength){case SINGLE_ITEM:return[data[0],data[0],data[0]];case DOUBLE_ITEM:return[data[0],data[1],data[0],data[1]];}}return data;}
 //# sourceMappingURL=computedWithAutoFillData.js.map
\ No newline at end of file
diff --git a/lib/commonjs/utils/computedWithAutoFillData.js.map b/lib/commonjs/utils/computedWithAutoFillData.js.map
index 9fb0b5eb546273d63d25e6b63780d55d68a10ae7..dbf5084f1ede320adfff28935249602fe3e7c1a4 100644
--- a/lib/commonjs/utils/computedWithAutoFillData.js.map
+++ b/lib/commonjs/utils/computedWithAutoFillData.js.map
@@ -1 +1 @@
-{"version":3,"sources":["computedWithAutoFillData.ts"],"names":["SINGLE_ITEM","DATA_LENGTH","DOUBLE_ITEM","isAutoFillData","params","loop","autoFillData","convertToSharedIndex","rawDataLength","index","computedOffsetXValueWithAutoFillData","value","size","computedRealIndexWithAutoFillData","dataLength","computedFillDataWithAutoFillData","data"],"mappings":"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","sourcesContent":["import { DATA_LENGTH } from \"../constants\";\n\nconst { SINGLE_ITEM, DOUBLE_ITEM } = DATA_LENGTH;\n\nfunction isAutoFillData(params: { autoFillData: boolean; loop: boolean }) {\n  \"worklet\";\n  return !!params.loop && !!params.autoFillData;\n}\n\ntype BaseParams<T extends object = {}> = {\n  autoFillData: boolean\n  loop: boolean\n} & T;\n\nexport function convertToSharedIndex(\n  params: BaseParams<{ index: number; rawDataLength: number }>,\n) {\n  \"worklet\";\n  const { loop, rawDataLength, index, autoFillData } = params;\n\n  if (isAutoFillData({ loop, autoFillData })) {\n    switch (rawDataLength) {\n      case SINGLE_ITEM:\n        return 0;\n      case DOUBLE_ITEM:\n        return index % 2;\n    }\n  }\n\n  return index;\n}\n\nexport function computedOffsetXValueWithAutoFillData(\n  params: BaseParams<{\n    rawDataLength: number\n    value: number\n    size: number\n  }>,\n) {\n  \"worklet\";\n\n  const { rawDataLength, value, size, loop, autoFillData } = params;\n\n  if (isAutoFillData({ loop, autoFillData })) {\n    switch (rawDataLength) {\n      case SINGLE_ITEM:\n        return value % size;\n      case DOUBLE_ITEM:\n        return value % (size * 2);\n    }\n  }\n\n  return value;\n}\n\nexport function computedRealIndexWithAutoFillData(\n  params: BaseParams<{\n    index: number\n    dataLength: number\n  }>,\n) {\n  const { index, dataLength, loop, autoFillData } = params;\n\n  if (isAutoFillData({ loop, autoFillData })) {\n    switch (dataLength) {\n      case SINGLE_ITEM:\n        return index % 1;\n      case DOUBLE_ITEM:\n        return index % 2;\n    }\n  }\n\n  return index;\n}\n\nexport function computedFillDataWithAutoFillData<T>(\n  params: BaseParams<{\n    data: T[]\n    dataLength: number\n  }>,\n): T[] {\n  const { data, loop, autoFillData, dataLength } = params;\n\n  if (isAutoFillData({ loop, autoFillData })) {\n    switch (dataLength) {\n      case SINGLE_ITEM:\n        return [data[0], data[0], data[0]];\n      case DOUBLE_ITEM:\n        return [data[0], data[1], data[0], data[1]];\n    }\n  }\n\n  return data;\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["computedWithAutoFillData.ts"],"names":["SINGLE_ITEM","DATA_LENGTH","DOUBLE_ITEM","isAutoFillData","params","loop","autoFillData","convertToSharedIndex","rawDataLength","index","computedOffsetXValueWithAutoFillData","value","size","computedRealIndexWithAutoFillData","dataLength","computedFillDataWithAutoFillData","data"],"mappings":"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","sourcesContent":["import { DATA_LENGTH } from \"../constants\";\n\nconst { SINGLE_ITEM, DOUBLE_ITEM } = DATA_LENGTH;\n\nfunction isAutoFillData(params: { autoFillData: boolean; loop: boolean }) {\n  \"worklet\";\n  return !!params.loop && !!params.autoFillData;\n}\n\ntype BaseParams<T extends object = {}> = {\n  autoFillData: boolean\n  loop: boolean\n} & T;\n\nexport function convertToSharedIndex(\n  params: BaseParams<{ index: number; rawDataLength: number }>,\n) {\n  \"worklet\";\n  const { loop, rawDataLength, index, autoFillData } = params;\n\n  if (isAutoFillData({ loop, autoFillData })) {\n    switch (rawDataLength) {\n      case SINGLE_ITEM:\n        return 0;\n      case DOUBLE_ITEM:\n        return index % 2;\n    }\n  }\n\n  return index;\n}\n\nexport function computedOffsetXValueWithAutoFillData(\n  params: BaseParams<{\n    rawDataLength: number\n    value: number\n    size: number\n  }>,\n) {\n  \"worklet\";\n\n  const { rawDataLength, value, size, loop, autoFillData } = params;\n\n  if (isAutoFillData({ loop, autoFillData })) {\n    switch (rawDataLength) {\n      case SINGLE_ITEM:\n        return value % size;\n      case DOUBLE_ITEM:\n        return value % (size * 2);\n    }\n  }\n\n  return value;\n}\n\nexport function computedRealIndexWithAutoFillData(\n  params: BaseParams<{\n    index: number\n    dataLength: number\n  }>,\n) {\n  const { index, dataLength, loop, autoFillData } = params;\n\n  if (isAutoFillData({ loop, autoFillData })) {\n    switch (dataLength) {\n      case SINGLE_ITEM:\n        return index % 1;\n      case DOUBLE_ITEM:\n        return index % 2;\n    }\n  }\n\n  return index;\n}\n\nexport function computedFillDataWithAutoFillData<T>(\n  params: BaseParams<{\n    data: T[]\n    dataLength: number\n  }>,\n): T[] {\n  const { data, loop, autoFillData, dataLength } = params;\n\n  if (isAutoFillData({ loop, autoFillData })) {\n    switch (dataLength) {\n      case SINGLE_ITEM:\n        return [data[0], data[0], data[0]];\n      case DOUBLE_ITEM:\n        return [data[0], data[1], data[0], data[1]];\n    }\n  }\n\n  return data;\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/utils/dealWithAnimation.js b/lib/commonjs/utils/dealWithAnimation.js
index 4893f11905ca5c809307919f5c77937334fc23c5..8cef82e30c72b3632a592cf9a1dc63d0b721972c 100644
--- a/lib/commonjs/utils/dealWithAnimation.js
+++ b/lib/commonjs/utils/dealWithAnimation.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.dealWithAnimation=void 0;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_13418076816509_init_data={code:"function dealWithAnimation(withAnimation) {\n  const {\n    withSpring,\n    withTiming\n  } = this._closure;\n  switch (withAnimation.type) {\n    case \"spring\":\n      return function (value, cb) {\n        return withSpring(value, withAnimation.config, function (isFinished) {\n          return cb(isFinished);\n        });\n      };\n    case \"timing\":\n      return function (value, cb) {\n        return withTiming(value, withAnimation.config, function (isFinished) {\n          return cb(isFinished);\n        });\n      };\n  }\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts",sourceMap:"{\"version\":3,\"names\":[\"dealWithAnimation\",\"withAnimation\",\"withSpring\",\"withTiming\",\"_closure\",\"type\",\"value\",\"cb\",\"config\",\"isFinished\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts\"],\"mappings\":\"AAIO,SAAAA,iBAASA,CACdC,aAAA,EACD;EAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EAEC,QAAQH,aAAa,CAACI,IAAI;IACxB,KAAK,QAAQ;MACX,OAAO,UAACC,KAAK,EAAEC,EAAE;QAAA,OAAKL,UAAU,CAACI,KAAK,EAAEL,aAAa,CAACO,MAAM,EAAE,UAAAC,UAAU;UAAA,OACtEF,EAAE,CAACE,UAAqB,CAC1B;QAAA,EAAC;MAAA;IACH,KAAK,QAAQ;MACX,OAAO,UAACH,KAAK,EAAEC,EAAE;QAAA,OAAKJ,UAAU,CAACG,KAAK,EAAEL,aAAa,CAACO,MAAM,EAAE,UAAAC,UAAU;UAAA,OACtEF,EAAE,CAACE,UAAqB,CAC1B;QAAA,EAAC;MAAA;EACL;AACF\"}"};var _worklet_6414328185064_init_data={code:"function anonymous(isFinished) {\n  const {\n    cb\n  } = this._closure;\n  return cb(isFinished);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"cb\",\"_closure\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts\"],\"mappings\":\"AAUoE,SAAAA,UAAAC,UAAU;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OACtED,EAAE,CAACD,UAAqB;AAAA\"}"};var _worklet_6414328185064_init_data2={code:"function anonymous(isFinished) {\n  const {\n    cb\n  } = this._closure;\n  return cb(isFinished);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"cb\",\"_closure\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts\"],\"mappings\":\"AAcoE,SAAAA,UAAAC,UAAU;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OACtED,EAAE,CAACD,UAAqB;AAAA\"}"};var dealWithAnimation=function(){var _e=[new global.Error(),-3,-27];var _f=function _f(withAnimation){switch(withAnimation.type){case"spring":return function(value,cb){return(0,_reactNativeReanimated.withSpring)(value,withAnimation.config,function(){var _e=[new global.Error(),-2,-27];var _f=function _f(isFinished){return cb(isFinished);};_f._closure={cb:cb};_f.__initData=_worklet_6414328185064_init_data;_f.__workletHash=6414328185064;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}());};case"timing":return function(value,cb){return(0,_reactNativeReanimated.withTiming)(value,withAnimation.config,function(){var _e=[new global.Error(),-2,-27];var _f=function _f(isFinished){return cb(isFinished);};_f._closure={cb:cb};_f.__initData=_worklet_6414328185064_init_data2;_f.__workletHash=6414328185064;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}());};}};_f._closure={withSpring:_reactNativeReanimated.withSpring,withTiming:_reactNativeReanimated.withTiming};_f.__initData=_worklet_13418076816509_init_data;_f.__workletHash=13418076816509;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.dealWithAnimation=dealWithAnimation;
+Object.defineProperty(exports,"__esModule",{value:true});exports.dealWithAnimation=void 0;var _reactNativeReanimated=require("react-native-reanimated");var _worklet_13418076816509_init_data={code:"function dealWithAnimation(withAnimation) {\n  const {\n    withSpring,\n    withTiming\n  } = this._closure;\n  switch (withAnimation.type) {\n    case \"spring\":\n      return function (value, cb) {\n        return withSpring(value, withAnimation.config, function (isFinished) {\n          return cb(isFinished);\n        });\n      };\n    case \"timing\":\n      return function (value, cb) {\n        return withTiming(value, withAnimation.config, function (isFinished) {\n          return cb(isFinished);\n        });\n      };\n  }\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts",sourceMap:"{\"version\":3,\"names\":[\"dealWithAnimation\",\"withAnimation\",\"withSpring\",\"withTiming\",\"_closure\",\"type\",\"value\",\"cb\",\"config\",\"isFinished\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts\"],\"mappings\":\"AAIO,SAAAA,iBAASA,CACdC,aAAA,EACD;EAAA;IAAAC,UAAA;IAAAC;EAAA,SAAAC,QAAA;EAEC,QAAQH,aAAa,CAACI,IAAI;IACxB,KAAK,QAAQ;MACX,OAAO,UAACC,KAAK,EAAEC,EAAE;QAAA,OAAKL,UAAU,CAACI,KAAK,EAAEL,aAAa,CAACO,MAAM,EAAE,UAAAC,UAAU;UAAA,OACtEF,EAAE,CAACE,UAAqB,CAC1B;QAAA,EAAC;MAAA;IACH,KAAK,QAAQ;MACX,OAAO,UAACH,KAAK,EAAEC,EAAE;QAAA,OAAKJ,UAAU,CAACG,KAAK,EAAEL,aAAa,CAACO,MAAM,EAAE,UAAAC,UAAU;UAAA,OACtEF,EAAE,CAACE,UAAqB,CAC1B;QAAA,EAAC;MAAA;EACL;AACF\"}"};var _worklet_6414328185064_init_data={code:"function anonymous(isFinished) {\n  const {\n    cb\n  } = this._closure;\n  return cb(isFinished);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"cb\",\"_closure\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts\"],\"mappings\":\"AAUoE,SAAAA,UAAAC,UAAU;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OACtED,EAAE,CAACD,UAAqB;AAAA\"}"};var _worklet_6414328185064_init_data2={code:"function anonymous(isFinished) {\n  const {\n    cb\n  } = this._closure;\n  return cb(isFinished);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts",sourceMap:"{\"version\":3,\"names\":[\"anonymous\",\"isFinished\",\"cb\",\"_closure\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/utils/dealWithAnimation.ts\"],\"mappings\":\"AAcoE,SAAAA,UAAAC,UAAU;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,OACtED,EAAE,CAACD,UAAqB;AAAA\"}"};var dealWithAnimation=function(){var _e=[new global.Error(),-3,-27];var _f=function _f(withAnimation){switch(withAnimation.type){case"spring":return function(value,cb){return(0,_reactNativeReanimated.withSpring)(value,withAnimation.config,function(){var _e=[new global.Error(),-2,-27];var _f=function _f(isFinished){return cb(isFinished);};_f._closure={cb:cb};_f.__initData=_worklet_6414328185064_init_data;_f.__workletHash=6414328185064;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}());};case"timing":return function(value,cb){return(0,_reactNativeReanimated.withTiming)(value,withAnimation.config,function(){var _e=[new global.Error(),-2,-27];var _f=function _f(isFinished){return cb(isFinished);};_f._closure={cb:cb};_f.__initData=_worklet_6414328185064_init_data2;_f.__workletHash=6414328185064;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}());};}};_f._closure={withSpring:_reactNativeReanimated.withSpring,withTiming:_reactNativeReanimated.withTiming};_f.__initData=_worklet_13418076816509_init_data;_f.__workletHash=13418076816509;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.dealWithAnimation=dealWithAnimation;
 //# sourceMappingURL=dealWithAnimation.js.map
\ No newline at end of file
diff --git a/lib/commonjs/utils/dealWithAnimation.js.map b/lib/commonjs/utils/dealWithAnimation.js.map
index 1ccacaba0effced6754a1a5a5d5f663751622ca1..0a2ab0dc31bf09d229a2329e89bc982dbfbaabe9 100644
--- a/lib/commonjs/utils/dealWithAnimation.js.map
+++ b/lib/commonjs/utils/dealWithAnimation.js.map
@@ -1 +1 @@
-{"version":3,"sources":["dealWithAnimation.ts"],"names":["dealWithAnimation","withAnimation","type","value","cb","config","isFinished","withSpring","withTiming"],"mappings":"0FAAA,8D,mnFAIgBA,CAAAA,iB,kEACdC,a,CAC8D,CAE9D,OAAQA,aAAa,CAACC,IAAtB,EACE,IAAK,QAAL,CACE,MAAO,UAACC,KAAD,CAAQC,EAAR,QAAe,sCAAWD,KAAX,CAAkBF,aAAa,CAACI,MAAhC,sDAAwC,YAAAC,UAAU,QACtEF,CAAAA,EAAE,CAACE,UAAD,CADoE,EAAlD,iBAVbF,EAUa,wIAAf,EAAP,CAGF,IAAK,QAAL,CACE,MAAO,UAACD,KAAD,CAAQC,EAAR,QAAe,sCAAWD,KAAX,CAAkBF,aAAa,CAACI,MAAhC,sDAAwC,YAAAC,UAAU,QACtEF,CAAAA,EAAE,CAACE,UAAD,CADoE,EAAlD,iBAdbF,EAca,yIAAf,EAAP,CANJ,CAUD,C,yBAf2BG,iC,YAEAC,iC","sourcesContent":["import { withSpring, withTiming } from \"react-native-reanimated\";\n\nimport type { WithAnimation } from \"../types\";\n\nexport function dealWithAnimation(\n  withAnimation: WithAnimation,\n): (value: number, cb: (isFinished: boolean) => void) => number {\n  \"worklet\";\n  switch (withAnimation.type) {\n    case \"spring\":\n      return (value, cb) => withSpring(value, withAnimation.config, isFinished =>\n        cb(isFinished as boolean),\n      );\n    case \"timing\":\n      return (value, cb) => withTiming(value, withAnimation.config, isFinished =>\n        cb(isFinished as boolean),\n      );\n  }\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["dealWithAnimation.ts"],"names":["dealWithAnimation","withAnimation","type","value","cb","config","isFinished","withSpring","withTiming"],"mappings":"0FAAA,8D,+4EAIgBA,CAAAA,iB,kEACdC,a,CAC8D,CAE9D,OAAQA,aAAa,CAACC,IAAtB,EACE,IAAK,QAAL,CACE,MAAO,UAACC,KAAD,CAAQC,EAAR,QAAe,sCAAWD,KAAX,CAAkBF,aAAa,CAACI,MAAhC,sDAAwC,YAAAC,UAAU,QACtEF,CAAAA,EAAE,CAACE,UAAD,CADoE,EAAlD,iBAVbF,EAUa,wIAAf,EAAP,CAGF,IAAK,QAAL,CACE,MAAO,UAACD,KAAD,CAAQC,EAAR,QAAe,sCAAWD,KAAX,CAAkBF,aAAa,CAACI,MAAhC,sDAAwC,YAAAC,UAAU,QACtEF,CAAAA,EAAE,CAACE,UAAD,CADoE,EAAlD,iBAdbF,EAca,yIAAf,EAAP,CANJ,CAUD,C,yBAf2BG,iC,YAEAC,iC","sourcesContent":["import { withSpring, withTiming } from \"react-native-reanimated\";\n\nimport type { WithAnimation } from \"../types\";\n\nexport function dealWithAnimation(\n  withAnimation: WithAnimation,\n): (value: number, cb: (isFinished: boolean) => void) => number {\n  \"worklet\";\n  switch (withAnimation.type) {\n    case \"spring\":\n      return (value, cb) => withSpring(value, withAnimation.config, isFinished =>\n        cb(isFinished as boolean),\n      );\n    case \"timing\":\n      return (value, cb) => withTiming(value, withAnimation.config, isFinished =>\n        cb(isFinished as boolean),\n      );\n  }\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/utils/handlerOffsetDirection.js b/lib/commonjs/utils/handlerOffsetDirection.js
index 94c9e500e76ad56937c8eaf0de02f61e3970a6e9..65591cc63b38a96970901901ac5d5525dc3b8d0d 100644
--- a/lib/commonjs/utils/handlerOffsetDirection.js
+++ b/lib/commonjs/utils/handlerOffsetDirection.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.handlerOffsetDirection=void 0;var _worklet_13851161303304_init_data={code:"function handlerOffsetDirection(handlerOffset) {\n  const isPositiveZero = Object.is(handlerOffset.value, +0);\n  const isNegativeZero = Object.is(handlerOffset.value, -0);\n  const direction = isPositiveZero ? 1 : isNegativeZero ? -1 : Math.sign(handlerOffset.value);\n  return direction;\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/handlerOffsetDirection.ts",sourceMap:"{\"version\":3,\"names\":[\"handlerOffsetDirection\",\"handlerOffset\",\"isPositiveZero\",\"Object\",\"is\",\"value\",\"isNegativeZero\",\"direction\",\"Math\",\"sign\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/handlerOffsetDirection.ts\"],\"mappings\":\"AAEO,SAAAA,sBAASA,CAAuBC,aAAA,EAAmC;EAGxE,MAAMC,cAAc,GAAGC,MAAM,CAACC,EAAE,CAACH,aAAa,CAACI,KAAK,EAAE,CAAC,CAAC,CAAC;EACzD,MAAMC,cAAc,GAAGH,MAAM,CAACC,EAAE,CAACH,aAAa,CAACI,KAAK,EAAE,CAAC,CAAC,CAAC;EACzD,MAAME,SAAS,GAAGL,cAAc,GAC5B,CAAC,GACDI,cAAc,GACZ,CAAC,CAAC,GACFE,IAAI,CAACC,IAAI,CAACR,aAAa,CAACI,KAAK,CAAW;EAE9C,OAAOE,SAAS;AAClB\"}"};var handlerOffsetDirection=function(){var _e=[new global.Error(),1,-27];var _f=function _f(handlerOffset){var isPositiveZero=Object.is(handlerOffset.value,+0);var isNegativeZero=Object.is(handlerOffset.value,-0);var direction=isPositiveZero?1:isNegativeZero?-1:Math.sign(handlerOffset.value);return direction;};_f._closure={};_f.__initData=_worklet_13851161303304_init_data;_f.__workletHash=13851161303304;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.handlerOffsetDirection=handlerOffsetDirection;
+Object.defineProperty(exports,"__esModule",{value:true});exports.handlerOffsetDirection=void 0;var _worklet_13851161303304_init_data={code:"function handlerOffsetDirection(handlerOffset) {\n  const isPositiveZero = Object.is(handlerOffset.value, +0);\n  const isNegativeZero = Object.is(handlerOffset.value, -0);\n  const direction = isPositiveZero ? 1 : isNegativeZero ? -1 : Math.sign(handlerOffset.value);\n  return direction;\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/utils/handlerOffsetDirection.ts",sourceMap:"{\"version\":3,\"names\":[\"handlerOffsetDirection\",\"handlerOffset\",\"isPositiveZero\",\"Object\",\"is\",\"value\",\"isNegativeZero\",\"direction\",\"Math\",\"sign\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/utils/handlerOffsetDirection.ts\"],\"mappings\":\"AAEO,SAAAA,sBAASA,CAAuBC,aAAA,EAAmC;EAGxE,MAAMC,cAAc,GAAGC,MAAM,CAACC,EAAE,CAACH,aAAa,CAACI,KAAK,EAAE,CAAC,CAAC,CAAC;EACzD,MAAMC,cAAc,GAAGH,MAAM,CAACC,EAAE,CAACH,aAAa,CAACI,KAAK,EAAE,CAAC,CAAC,CAAC;EACzD,MAAME,SAAS,GAAGL,cAAc,GAC5B,CAAC,GACDI,cAAc,GACZ,CAAC,CAAC,GACFE,IAAI,CAACC,IAAI,CAACR,aAAa,CAACI,KAAK,CAAW;EAE9C,OAAOE,SAAS;AAClB\"}"};var handlerOffsetDirection=function(){var _e=[new global.Error(),1,-27];var _f=function _f(handlerOffset){var isPositiveZero=Object.is(handlerOffset.value,+0);var isNegativeZero=Object.is(handlerOffset.value,-0);var direction=isPositiveZero?1:isNegativeZero?-1:Math.sign(handlerOffset.value);return direction;};_f._closure={};_f.__initData=_worklet_13851161303304_init_data;_f.__workletHash=13851161303304;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.handlerOffsetDirection=handlerOffsetDirection;
 //# sourceMappingURL=handlerOffsetDirection.js.map
\ No newline at end of file
diff --git a/lib/commonjs/utils/handlerOffsetDirection.js.map b/lib/commonjs/utils/handlerOffsetDirection.js.map
index 7f6199ee5e2b12017c73b13b32a94af2c84de997..b7b0224dff6951b55b9630b244e78664e6d33a58 100644
--- a/lib/commonjs/utils/handlerOffsetDirection.js.map
+++ b/lib/commonjs/utils/handlerOffsetDirection.js.map
@@ -1 +1 @@
-{"version":3,"sources":["handlerOffsetDirection.ts"],"names":["handlerOffsetDirection","handlerOffset","isPositiveZero","Object","is","value","isNegativeZero","direction","Math","sign"],"mappings":"0tCAEgBA,CAAAA,sB,iEAAuBC,a,CAA4C,CAGjF,GAAMC,CAAAA,cAAc,CAAGC,MAAM,CAACC,EAAP,CAAUH,aAAa,CAACI,KAAxB,CAA+B,CAAC,CAAhC,CAAvB,CACA,GAAMC,CAAAA,cAAc,CAAGH,MAAM,CAACC,EAAP,CAAUH,aAAa,CAACI,KAAxB,CAA+B,CAAC,CAAhC,CAAvB,CACA,GAAME,CAAAA,SAAS,CAAGL,cAAc,CAC5B,CAD4B,CAE5BI,cAAc,CACZ,CAAC,CADW,CAEZE,IAAI,CAACC,IAAL,CAAUR,aAAa,CAACI,KAAxB,CAJN,CAMA,MAAOE,CAAAA,SAAP,CACD,C","sourcesContent":["import type { SharedValue } from \"react-native-reanimated\";\n\nexport function handlerOffsetDirection(handlerOffset: SharedValue<number>): -1 | 1 {\n  \"worklet\";\n\n  const isPositiveZero = Object.is(handlerOffset.value, +0);\n  const isNegativeZero = Object.is(handlerOffset.value, -0);\n  const direction = isPositiveZero\n    ? 1\n    : isNegativeZero\n      ? -1\n      : Math.sign(handlerOffset.value) as -1 | 1;\n\n  return direction;\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["handlerOffsetDirection.ts"],"names":["handlerOffsetDirection","handlerOffset","isPositiveZero","Object","is","value","isNegativeZero","direction","Math","sign"],"mappings":"8oCAEgBA,CAAAA,sB,iEAAuBC,a,CAA4C,CAGjF,GAAMC,CAAAA,cAAc,CAAGC,MAAM,CAACC,EAAP,CAAUH,aAAa,CAACI,KAAxB,CAA+B,CAAC,CAAhC,CAAvB,CACA,GAAMC,CAAAA,cAAc,CAAGH,MAAM,CAACC,EAAP,CAAUH,aAAa,CAACI,KAAxB,CAA+B,CAAC,CAAhC,CAAvB,CACA,GAAME,CAAAA,SAAS,CAAGL,cAAc,CAC5B,CAD4B,CAE5BI,cAAc,CACZ,CAAC,CADW,CAEZE,IAAI,CAACC,IAAL,CAAUR,aAAa,CAACI,KAAxB,CAJN,CAMA,MAAOE,CAAAA,SAAP,CACD,C","sourcesContent":["import type { SharedValue } from \"react-native-reanimated\";\n\nexport function handlerOffsetDirection(handlerOffset: SharedValue<number>): -1 | 1 {\n  \"worklet\";\n\n  const isPositiveZero = Object.is(handlerOffset.value, +0);\n  const isNegativeZero = Object.is(handlerOffset.value, -0);\n  const direction = isPositiveZero\n    ? 1\n    : isNegativeZero\n      ? -1\n      : Math.sign(handlerOffset.value) as -1 | 1;\n\n  return direction;\n}\n"]}
\ No newline at end of file
diff --git a/lib/commonjs/utils/log.js b/lib/commonjs/utils/log.js
index f90c4cf0fe57d9a198eee99dd22bd80f5cdd96d7..89a1b9809a344511fe0a5350e1afd3511066ad16 100644
--- a/lib/commonjs/utils/log.js
+++ b/lib/commonjs/utils/log.js
@@ -1,2 +1,2 @@
-Object.defineProperty(exports,"__esModule",{value:true});exports.log=log;exports.round=void 0;function log(){var _console;(_console=console).log.apply(_console,arguments);}var _worklet_13546670812588_init_data={code:"function round(number) {\n  return Math.round(number);\n}",location:"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/log.ts",sourceMap:"{\"version\":3,\"names\":[\"round\",\"number\",\"Math\"],\"sources\":[\"/home/runner/work/react-native-reanimated-carousel/react-native-reanimated-carousel/src/utils/log.ts\"],\"mappings\":\"AASO,SAAAA,KAASA,CAAMC,MAAA,EAAc;EAElC,OAAOC,IAAI,CAACF,KAAK,CAACC,MAAM,CAAC;AAC3B\"}"};var round=function(){var _e=[new global.Error(),1,-27];var _f=function _f(number){return Math.round(number);};_f._closure={};_f.__initData=_worklet_13546670812588_init_data;_f.__workletHash=13546670812588;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.round=round;
+Object.defineProperty(exports,"__esModule",{value:true});exports.log=log;exports.round=void 0;function log(){var _console;(_console=console).log.apply(_console,arguments);}var _worklet_13546670812588_init_data={code:"function round(number) {\n  return Math.round(number);\n}",location:"/home/vumanh/react-native-reanimated-carousel/src/utils/log.ts",sourceMap:"{\"version\":3,\"names\":[\"round\",\"number\",\"Math\"],\"sources\":[\"/home/vumanh/react-native-reanimated-carousel/src/utils/log.ts\"],\"mappings\":\"AASO,SAAAA,KAASA,CAAMC,MAAA,EAAc;EAElC,OAAOC,IAAI,CAACF,KAAK,CAACC,MAAM,CAAC;AAC3B\"}"};var round=function(){var _e=[new global.Error(),1,-27];var _f=function _f(number){return Math.round(number);};_f._closure={};_f.__initData=_worklet_13546670812588_init_data;_f.__workletHash=13546670812588;_f.__stackDetails=_e;_f.__version="3.3.0";return _f;}();exports.round=round;
 //# sourceMappingURL=log.js.map
\ No newline at end of file
diff --git a/lib/commonjs/utils/log.js.map b/lib/commonjs/utils/log.js.map
index a03155d3135ba191df83490d47a20d9b7e75c519..5c5bbe7f20eb5ca071b0e1fd254b64f77bd37d95 100644
--- a/lib/commonjs/utils/log.js.map
+++ b/lib/commonjs/utils/log.js.map
@@ -1 +1 @@
-{"version":3,"sources":["log.ts"],"names":["log","console","round","number","Math"],"mappings":"8FAIO,QAASA,CAAAA,GAAT,EAA0B,cAE/B,UAAAC,OAAO,EAACD,GAAR,2BACD,C,6fAEeE,CAAAA,K,iEAAMC,M,CAAgB,CAEpC,MAAOC,CAAAA,IAAI,CAACF,KAAL,CAAWC,MAAX,CAAP,CACD,C","sourcesContent":["/**\n * In worklet\n * e.g. runOnJS(lop)(...);\n */\nexport function log(...msg: any) {\n  // eslint-disable-next-line no-console\n  console.log(...msg);\n}\n\nexport function round(number: number) {\n  \"worklet\";\n  return Math.round(number);\n}\n"]}
\ No newline at end of file
+{"version":3,"sources":["log.ts"],"names":["log","console","round","number","Math"],"mappings":"8FAIO,QAASA,CAAAA,GAAT,EAA0B,cAE/B,UAAAC,OAAO,EAACD,GAAR,2BACD,C,ibAEeE,CAAAA,K,iEAAMC,M,CAAgB,CAEpC,MAAOC,CAAAA,IAAI,CAACF,KAAL,CAAWC,MAAX,CAAP,CACD,C","sourcesContent":["/**\n * In worklet\n * e.g. runOnJS(lop)(...);\n */\nexport function log(...msg: any) {\n  // eslint-disable-next-line no-console\n  console.log(...msg);\n}\n\nexport function round(number: number) {\n  \"worklet\";\n  return Math.round(number);\n}\n"]}
\ No newline at end of file
diff --git a/lib/module/ScrollViewGesture.js b/lib/module/ScrollViewGesture.js
index b4cd5f13cfb2977b5822c80039331534e7b20428..41270c16433995c7a880389134c5d2ab7f80c4a2 100644
--- a/lib/module/ScrollViewGesture.js
+++ b/lib/module/ScrollViewGesture.js
@@ -1,11 +1,11 @@
 function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }
 
-import React from "react";
-import { PanGestureHandler } from "react-native-gesture-handler";
-import Animated, { cancelAnimation, measure, runOnJS, useAnimatedGestureHandler, useAnimatedReaction, useAnimatedRef, useDerivedValue, useSharedValue, withDecay } from "react-native-reanimated";
-import { Easing } from "./constants";
-import { CTX } from "./store";
-import { dealWithAnimation } from "./utils/dealWithAnimation";
+import React from 'react';
+import { PanGestureHandler } from 'react-native-gesture-handler';
+import Animated, { cancelAnimation, measure, runOnJS, useAnimatedGestureHandler, useAnimatedReaction, useAnimatedRef, useDerivedValue, useSharedValue, withDecay } from 'react-native-reanimated';
+import { Easing } from './constants';
+import { CTX } from './store';
+import { dealWithAnimation } from './utils/dealWithAnimation';
 
 const IScrollViewGesture = props => {
   const {
@@ -41,7 +41,7 @@ const IScrollViewGesture = props => {
   const containerRef = useAnimatedRef(); // Get the limit of the scroll.
 
   const getLimit = React.useCallback(() => {
-    "worklet";
+    'worklet';
 
     if (!infinite && !overscrollEnabled) {
       const {
@@ -56,23 +56,23 @@ const IScrollViewGesture = props => {
     return dataLength * size;
   }, [infinite, size, dataLength, overscrollEnabled]);
   const withSpring = React.useCallback((toValue, onFinished) => {
-    "worklet";
+    'worklet';
 
     const defaultWithAnimation = {
-      type: "timing",
+      type: 'timing',
       config: {
         duration: scrollAnimationDuration + 100,
         easing: Easing.easeOutQuart
       }
     };
     return dealWithAnimation(withAnimation !== null && withAnimation !== void 0 ? withAnimation : defaultWithAnimation)(toValue, isFinished => {
-      "worklet";
+      'worklet';
 
       if (isFinished) onFinished && runOnJS(onFinished)();
     });
   }, [scrollAnimationDuration, withAnimation]);
   const endWithSpring = React.useCallback(onFinished => {
-    "worklet";
+    'worklet';
 
     const origin = translation.value;
     const velocity = scrollEndVelocity.value; // Default to scroll in the direction of the slide (with deceleration)
@@ -82,22 +82,28 @@ const IScrollViewGesture = props => {
       deceleration: 0.999
     }); // If the distance of the swipe exceeds the max scroll distance, keep the view at the current position
 
-    if (typeof maxScrollDistancePerSwipe === "number" && Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe) {
+    if (typeof maxScrollDistancePerSwipe === 'number' && Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe) {
       finalTranslation = origin;
     } else {
       /**
        * The page size is the same as the item size.
        * If direction is vertical, the page size is the height of the item.
        * If direction is horizontal, the page size is the width of the item.
-      *
-      * `page size` equals to `size` variable.
-      * */
+       *
+       * `page size` equals to `size` variable.
+       * */
       if (pagingEnabled) {
         // distance with direction
         const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1); // 1 or -1
 
-        const computed = offset < 0 ? Math.ceil : Math.floor;
-        const page = computed(-translation.value / size);
+        let page;
+
+        if (Math.abs(scrollEndVelocity.value) >= size * 0.3) {
+          const computed = offset < 0 ? Math.ceil : Math.floor;
+          page = computed(-translation.value / size);
+        } else {
+          page = Math.round(-translation.value / size) - offset;
+        }
 
         if (infinite) {
           const finalPage = page + offset;
@@ -128,7 +134,7 @@ const IScrollViewGesture = props => {
     }
   }, [withSpring, size, maxPage, infinite, snapEnabled, translation, pagingEnabled, scrollEndVelocity.value, maxScrollDistancePerSwipe, scrollEndTranslation.value]);
   const onFinish = React.useCallback(isFinished => {
-    "worklet";
+    'worklet';
 
     if (isFinished) {
       touching.value = false;
@@ -136,7 +142,7 @@ const IScrollViewGesture = props => {
     }
   }, [onScrollEnd, touching]);
   const activeDecay = React.useCallback(() => {
-    "worklet";
+    'worklet';
 
     touching.value = true;
     translation.value = withDecay({
@@ -144,7 +150,7 @@ const IScrollViewGesture = props => {
     }, isFinished => onFinish(isFinished));
   }, [onFinish, scrollEndVelocity.value, touching, translation]);
   const resetBoundary = React.useCallback(() => {
-    "worklet";
+    'worklet';
 
     if (touching.value) return;
 
@@ -174,7 +180,7 @@ const IScrollViewGesture = props => {
   }, [pagingEnabled, resetBoundary]);
 
   function withProcessTranslation(translation) {
-    "worklet";
+    'worklet';
 
     if (!infinite && !overscrollEnabled) {
       const limit = getLimit();
@@ -185,6 +191,11 @@ const IScrollViewGesture = props => {
     return translation;
   }
 
+  const isGestureFinished = useSharedValue(true);
+  const handleScrollEnd = React.useCallback(() => {
+    isGestureFinished.value = true;
+    onScrollEnd === null || onScrollEnd === void 0 ? void 0 : onScrollEnd();
+  }, [onScrollEnd]);
   const panGestureEventHandler = useAnimatedGestureHandler({
     onStart: (_, ctx) => {
       touching.value = true;
@@ -193,6 +204,7 @@ const IScrollViewGesture = props => {
       ctx.max = (maxPage - 1) * size;
       if (!infinite && !overscrollEnabled) ctx.max = getLimit();
       ctx.panOffset = translation.value;
+      cancelAnimation(translation);
     },
     onActive: (e, ctx) => {
       if (ctx.validStart) {
@@ -200,6 +212,7 @@ const IScrollViewGesture = props => {
         cancelAnimation(translation);
       }
 
+      isGestureFinished.value = false;
       touching.value = true;
       let {
         translationX,
@@ -207,7 +220,7 @@ const IScrollViewGesture = props => {
       } = e;
       const totalTranslation = isHorizontal.value ? translationX : translationY;
 
-      if (typeof maxScrollDistancePerSwipe === "number" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {
+      if (typeof maxScrollDistancePerSwipe === 'number' && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {
         const overSwipe = Math.abs(totalTranslation) - maxScrollDistancePerSwipe;
         const dampedTranslation = maxScrollDistancePerSwipe + overSwipe * 0.5;
         translationX = isHorizontal.value ? dampedTranslation * Math.sign(translationX) : translationX;
@@ -219,7 +232,7 @@ const IScrollViewGesture = props => {
       if (!infinite) {
         if (translation.value > 0 || translation.value < -ctx.max) {
           const boundary = translation.value > 0 ? 0 : -ctx.max;
-          const fixed = boundary - ctx.panOffset;
+          const fixed = boundary - (Math.abs(ctx.panOffset - boundary) < 1 ? translation.value : ctx.panOffset);
           const dynamic = panTranslation - fixed;
           translation.value = boundary + dynamic * 0.5;
           return;
@@ -229,7 +242,8 @@ const IScrollViewGesture = props => {
       const translationValue = ctx.panOffset + panTranslation;
       translation.value = translationValue;
     },
-    onEnd: (e, ctx) => {
+    onFinish: (e, ctx) => {
+      if (isGestureFinished.value) return;
       const {
         velocityX,
         velocityY,
@@ -240,16 +254,16 @@ const IScrollViewGesture = props => {
       scrollEndTranslation.value = isHorizontal.value ? translationX : translationY;
       const totalTranslation = isHorizontal.value ? translationX : translationY;
 
-      if (typeof maxScrollDistancePerSwipe === "number" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {
+      if (typeof maxScrollDistancePerSwipe === 'number' && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {
         const nextPage = Math.round((ctx.panOffset + maxScrollDistancePerSwipe * Math.sign(totalTranslation)) / size) * size;
-        translation.value = withSpring(withProcessTranslation(nextPage), onScrollEnd);
+        translation.value = withSpring(withProcessTranslation(nextPage), handleScrollEnd);
       } else {
-        endWithSpring(onScrollEnd);
+        endWithSpring(handleScrollEnd);
       }
 
       if (!infinite) touching.value = false;
     }
-  }, [pagingEnabled, isHorizontal.value, infinite, maxPage, size, snapEnabled, onScrollBegin, onScrollEnd]);
+  }, [pagingEnabled, isHorizontal.value, infinite, maxPage, size, snapEnabled, onScrollBegin, handleScrollEnd]);
   return /*#__PURE__*/React.createElement(PanGestureHandler, _extends({}, panGestureHandlerProps, {
     enabled: enabled,
     onGestureEvent: panGestureEventHandler
diff --git a/lib/module/ScrollViewGesture.js.map b/lib/module/ScrollViewGesture.js.map
index 6eb6e43edc96a9a775ffaf2f6e5bdb78676af145..c6a00e88cdca3e143cfb1641d9ae7e7fd1c61051 100644
--- a/lib/module/ScrollViewGesture.js.map
+++ b/lib/module/ScrollViewGesture.js.map
@@ -1 +1 @@
-{"version":3,"sources":["ScrollViewGesture.tsx"],"names":["React","PanGestureHandler","Animated","cancelAnimation","measure","runOnJS","useAnimatedGestureHandler","useAnimatedReaction","useAnimatedRef","useDerivedValue","useSharedValue","withDecay","Easing","CTX","dealWithAnimation","IScrollViewGesture","props","vertical","pagingEnabled","snapEnabled","panGestureHandlerProps","loop","infinite","scrollAnimationDuration","withAnimation","enabled","dataLength","overscrollEnabled","maxScrollDistancePerSwipe","useContext","size","translation","testID","style","onScrollBegin","onScrollEnd","onTouchBegin","onTouchEnd","maxPage","isHorizontal","touching","scrollEndTranslation","scrollEndVelocity","containerRef","getLimit","useCallback","width","containerWidth","withSpring","toValue","onFinished","defaultWithAnimation","type","config","duration","easing","easeOutQuart","isFinished","endWithSpring","origin","value","velocity","finalTranslation","deceleration","Math","abs","offset","computed","ceil","floor","page","finalPage","withProcessTranslation","min","max","nextPage","round","limit","sign","onFinish","activeDecay","resetBoundary","panGestureEventHandler","onStart","_","ctx","validStart","panOffset","onActive","e","translationX","translationY","totalTranslation","overSwipe","dampedTranslation","panTranslation","boundary","fixed","dynamic","translationValue","onEnd","velocityX","velocityY","children","ScrollViewGesture"],"mappings":"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","sourcesContent":["import type { PropsWithChildren } from \"react\";\nimport React from \"react\";\nimport type { StyleProp, ViewStyle } from \"react-native\";\nimport type { PanGestureHandlerGestureEvent } from \"react-native-gesture-handler\";\nimport { PanGestureHandler } from \"react-native-gesture-handler\";\nimport Animated, {\n  cancelAnimation,\n  measure,\n  runOnJS,\n  useAnimatedGestureHandler,\n  useAnimatedReaction,\n  useAnimatedRef,\n  useDerivedValue,\n  useSharedValue,\n  withDecay,\n} from \"react-native-reanimated\";\n\nimport { Easing } from \"./constants\";\nimport { CTX } from \"./store\";\nimport type { WithTimingAnimation } from \"./types\";\nimport { dealWithAnimation } from \"./utils/dealWithAnimation\";\n\ninterface GestureContext extends Record<string, unknown> {\n  validStart: boolean\n  panOffset: number\n  max: number\n}\n\ninterface Props {\n  size: number\n  infinite?: boolean\n  testID?: string\n  style?: StyleProp<ViewStyle>\n  onScrollBegin?: () => void\n  onScrollEnd?: () => void\n  onTouchBegin?: () => void\n  onTouchEnd?: () => void\n  translation: Animated.SharedValue<number>\n}\n\nconst IScrollViewGesture: React.FC<PropsWithChildren<Props>> = (props) => {\n  const {\n    props: {\n      vertical,\n      pagingEnabled,\n      snapEnabled,\n      panGestureHandlerProps,\n      loop: infinite,\n      scrollAnimationDuration,\n      withAnimation,\n      enabled,\n      dataLength,\n      overscrollEnabled,\n      maxScrollDistancePerSwipe,\n    },\n  } = React.useContext(CTX);\n\n  const {\n    size,\n    translation,\n    testID,\n    style = {},\n    onScrollBegin,\n    onScrollEnd,\n    onTouchBegin,\n    onTouchEnd,\n  } = props;\n\n  const maxPage = dataLength;\n  const isHorizontal = useDerivedValue(() => !vertical, [vertical]);\n  const touching = useSharedValue(false);\n  const scrollEndTranslation = useSharedValue(0);\n  const scrollEndVelocity = useSharedValue(0);\n  const containerRef = useAnimatedRef<Animated.View>();\n\n  // Get the limit of the scroll.\n  const getLimit = React.useCallback(() => {\n    \"worklet\";\n\n    if (!infinite && !overscrollEnabled) {\n      const { width: containerWidth = 0 } = measure(containerRef);\n\n      // If the item's total width is less than the container's width, then there is no need to scroll.\n      if (dataLength * size < containerWidth)\n        return 0;\n\n      // Disable the \"overscroll\" effect\n      return dataLength * size - containerWidth;\n    }\n\n    return dataLength * size;\n  }, [infinite, size, dataLength, overscrollEnabled]);\n\n  const withSpring = React.useCallback(\n    (toValue: number, onFinished?: () => void) => {\n      \"worklet\";\n      const defaultWithAnimation: WithTimingAnimation = {\n        type: \"timing\",\n        config: {\n          duration: scrollAnimationDuration + 100,\n          easing: Easing.easeOutQuart,\n        },\n      };\n\n      return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n        toValue,\n        (isFinished: boolean) => {\n          \"worklet\";\n          if (isFinished)\n            onFinished && runOnJS(onFinished)();\n        },\n      );\n    },\n    [scrollAnimationDuration, withAnimation],\n  );\n\n  const endWithSpring = React.useCallback(\n    (onFinished?: () => void) => {\n      \"worklet\";\n      const origin = translation.value;\n      const velocity = scrollEndVelocity.value;\n      // Default to scroll in the direction of the slide (with deceleration)\n      let finalTranslation: number = withDecay({ velocity, deceleration: 0.999 });\n\n      // If the distance of the swipe exceeds the max scroll distance, keep the view at the current position\n      if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe) {\n        finalTranslation = origin;\n      }\n      else {\n      /**\n       * The page size is the same as the item size.\n       * If direction is vertical, the page size is the height of the item.\n       * If direction is horizontal, the page size is the width of the item.\n      *\n      * `page size` equals to `size` variable.\n      * */\n        if (pagingEnabled) {\n          // distance with direction\n          const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1); // 1 or -1\n          const computed = offset < 0 ? Math.ceil : Math.floor;\n          const page = computed(-translation.value / size);\n\n          if (infinite) {\n            const finalPage = page + offset;\n            finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n          }\n          else {\n            const finalPage = Math.min(maxPage - 1, Math.max(0, page + offset));\n            finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);\n          }\n        }\n\n        if (!pagingEnabled && snapEnabled) {\n          // scroll to the nearest item\n          const nextPage = Math.round((origin + velocity * 0.4) / size) * size;\n          finalTranslation = withSpring(withProcessTranslation(nextPage), onFinished);\n        }\n      }\n\n      translation.value = finalTranslation;\n\n      function withProcessTranslation(translation: number) {\n        if (!infinite && !overscrollEnabled) {\n          const limit = getLimit();\n          const sign = Math.sign(translation);\n          return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n        }\n\n        return translation;\n      }\n    },\n    [\n      withSpring,\n      size,\n      maxPage,\n      infinite,\n      snapEnabled,\n      translation,\n      pagingEnabled,\n      scrollEndVelocity.value,\n      maxScrollDistancePerSwipe,\n      scrollEndTranslation.value,\n    ],\n  );\n\n  const onFinish = React.useCallback(\n    (isFinished: boolean) => {\n      \"worklet\";\n      if (isFinished) {\n        touching.value = false;\n        onScrollEnd && runOnJS(onScrollEnd)();\n      }\n    },\n    [onScrollEnd, touching],\n  );\n\n  const activeDecay = React.useCallback(() => {\n    \"worklet\";\n    touching.value = true;\n    translation.value = withDecay(\n      { velocity: scrollEndVelocity.value },\n      isFinished => onFinish(isFinished as boolean),\n    );\n  }, [onFinish, scrollEndVelocity.value, touching, translation]);\n\n  const resetBoundary = React.useCallback(() => {\n    \"worklet\";\n    if (touching.value)\n      return;\n\n    if (translation.value > 0) {\n      if (scrollEndTranslation.value < 0) {\n        activeDecay();\n        return;\n      }\n      if (!infinite) {\n        translation.value = withSpring(0);\n        return;\n      }\n    }\n\n    if (translation.value < -((maxPage - 1) * size)) {\n      if (scrollEndTranslation.value > 0) {\n        activeDecay();\n        return;\n      }\n      if (!infinite)\n        translation.value = withSpring(-((maxPage - 1) * size));\n    }\n  }, [\n    touching.value,\n    translation,\n    maxPage,\n    size,\n    scrollEndTranslation.value,\n    infinite,\n    activeDecay,\n    withSpring,\n  ]);\n\n  useAnimatedReaction(\n    () => translation.value,\n    () => {\n      if (!pagingEnabled)\n        resetBoundary();\n    },\n    [pagingEnabled, resetBoundary],\n  );\n\n  function withProcessTranslation(translation: number) {\n    \"worklet\";\n\n    if (!infinite && !overscrollEnabled) {\n      const limit = getLimit();\n      const sign = Math.sign(translation);\n      return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n    }\n\n    return translation;\n  }\n\n  const panGestureEventHandler = useAnimatedGestureHandler<\n  PanGestureHandlerGestureEvent,\n  GestureContext\n  >(\n    {\n      onStart: (_, ctx) => {\n        touching.value = true;\n        ctx.validStart = true;\n        onScrollBegin && runOnJS(onScrollBegin)();\n\n        ctx.max = (maxPage - 1) * size;\n        if (!infinite && !overscrollEnabled)\n          ctx.max = getLimit();\n\n        ctx.panOffset = translation.value;\n      },\n      onActive: (e, ctx) => {\n        if (ctx.validStart) {\n          ctx.validStart = false;\n          cancelAnimation(translation);\n        }\n        touching.value = true;\n        let { translationX, translationY } = e;\n\n        const totalTranslation = isHorizontal.value ? translationX : translationY;\n\n        if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {\n          const overSwipe = Math.abs(totalTranslation) - maxScrollDistancePerSwipe;\n          const dampedTranslation = maxScrollDistancePerSwipe + overSwipe * 0.5;\n\n          translationX = isHorizontal.value ? dampedTranslation * Math.sign(translationX) : translationX;\n          translationY = !isHorizontal.value ? dampedTranslation * Math.sign(translationY) : translationY;\n        }\n\n        const panTranslation = isHorizontal.value ? translationX : translationY;\n        if (!infinite) {\n          if ((translation.value > 0 || translation.value < -ctx.max)) {\n            const boundary = translation.value > 0 ? 0 : -ctx.max;\n            const fixed = boundary - ctx.panOffset;\n            const dynamic = panTranslation - fixed;\n            translation.value = boundary + dynamic * 0.5;\n            return;\n          }\n        }\n\n        const translationValue = ctx.panOffset + panTranslation;\n\n        translation.value = translationValue;\n      },\n      onEnd: (e, ctx) => {\n        const { velocityX, velocityY, translationX, translationY } = e;\n        scrollEndVelocity.value = isHorizontal.value\n          ? velocityX\n          : velocityY;\n        scrollEndTranslation.value = isHorizontal.value\n          ? translationX\n          : translationY;\n\n        const totalTranslation = isHorizontal.value ? translationX : translationY;\n\n        if (typeof maxScrollDistancePerSwipe === \"number\" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {\n          const nextPage = Math.round((ctx.panOffset + maxScrollDistancePerSwipe * Math.sign(totalTranslation)) / size) * size;\n          translation.value = withSpring(withProcessTranslation(nextPage), onScrollEnd);\n        }\n        else {\n          endWithSpring(onScrollEnd);\n        }\n\n        if (!infinite)\n          touching.value = false;\n      },\n    },\n    [\n      pagingEnabled,\n      isHorizontal.value,\n      infinite,\n      maxPage,\n      size,\n      snapEnabled,\n      onScrollBegin,\n      onScrollEnd,\n    ],\n  );\n\n  return (\n    <PanGestureHandler\n      {...panGestureHandlerProps}\n      enabled={enabled}\n      onGestureEvent={panGestureEventHandler}\n    >\n      <Animated.View\n        ref={containerRef}\n        testID={testID}\n        style={style}\n        onTouchStart={onTouchBegin}\n        onTouchEnd={onTouchEnd}\n      >\n        {props.children}\n      </Animated.View>\n    </PanGestureHandler>\n  );\n};\n\nexport const ScrollViewGesture = IScrollViewGesture;\n"]}
\ No newline at end of file
+{"version":3,"sources":["ScrollViewGesture.tsx"],"names":["React","PanGestureHandler","Animated","cancelAnimation","measure","runOnJS","useAnimatedGestureHandler","useAnimatedReaction","useAnimatedRef","useDerivedValue","useSharedValue","withDecay","Easing","CTX","dealWithAnimation","IScrollViewGesture","props","vertical","pagingEnabled","snapEnabled","panGestureHandlerProps","loop","infinite","scrollAnimationDuration","withAnimation","enabled","dataLength","overscrollEnabled","maxScrollDistancePerSwipe","useContext","size","translation","testID","style","onScrollBegin","onScrollEnd","onTouchBegin","onTouchEnd","maxPage","isHorizontal","touching","scrollEndTranslation","scrollEndVelocity","containerRef","getLimit","useCallback","width","containerWidth","withSpring","toValue","onFinished","defaultWithAnimation","type","config","duration","easing","easeOutQuart","isFinished","endWithSpring","origin","value","velocity","finalTranslation","deceleration","Math","abs","offset","page","computed","ceil","floor","round","finalPage","withProcessTranslation","min","max","nextPage","limit","sign","onFinish","activeDecay","resetBoundary","isGestureFinished","handleScrollEnd","panGestureEventHandler","onStart","_","ctx","validStart","panOffset","onActive","e","translationX","translationY","totalTranslation","overSwipe","dampedTranslation","panTranslation","boundary","fixed","dynamic","translationValue","velocityX","velocityY","children","ScrollViewGesture"],"mappings":"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","sourcesContent":["import type { PropsWithChildren } from 'react';\nimport React from 'react';\nimport type { StyleProp, ViewStyle } from 'react-native';\nimport type { PanGestureHandlerGestureEvent } from 'react-native-gesture-handler';\nimport { PanGestureHandler } from 'react-native-gesture-handler';\nimport Animated, {\n    cancelAnimation,\n    measure,\n    runOnJS,\n    useAnimatedGestureHandler,\n    useAnimatedReaction,\n    useAnimatedRef,\n    useDerivedValue,\n    useSharedValue,\n    withDecay,\n} from 'react-native-reanimated';\n\nimport { Easing } from './constants';\nimport { CTX } from './store';\nimport type { WithTimingAnimation } from './types';\nimport { dealWithAnimation } from './utils/dealWithAnimation';\n\ninterface GestureContext extends Record<string, unknown> {\n    validStart: boolean;\n    panOffset: number;\n    max: number;\n}\n\ninterface Props {\n    size: number;\n    infinite?: boolean;\n    testID?: string;\n    style?: StyleProp<ViewStyle>;\n    onScrollBegin?: () => void;\n    onScrollEnd?: () => void;\n    onTouchBegin?: () => void;\n    onTouchEnd?: () => void;\n    translation: Animated.SharedValue<number>;\n}\n\nconst IScrollViewGesture: React.FC<PropsWithChildren<Props>> = (props) => {\n    const {\n        props: {\n            vertical,\n            pagingEnabled,\n            snapEnabled,\n            panGestureHandlerProps,\n            loop: infinite,\n            scrollAnimationDuration,\n            withAnimation,\n            enabled,\n            dataLength,\n            overscrollEnabled,\n            maxScrollDistancePerSwipe,\n        },\n    } = React.useContext(CTX);\n\n    const {\n        size,\n        translation,\n        testID,\n        style = {},\n        onScrollBegin,\n        onScrollEnd,\n        onTouchBegin,\n        onTouchEnd,\n    } = props;\n\n    const maxPage = dataLength;\n    const isHorizontal = useDerivedValue(() => !vertical, [vertical]);\n    const touching = useSharedValue(false);\n    const scrollEndTranslation = useSharedValue(0);\n    const scrollEndVelocity = useSharedValue(0);\n    const containerRef = useAnimatedRef<Animated.View>();\n\n    // Get the limit of the scroll.\n    const getLimit = React.useCallback(() => {\n        'worklet';\n\n        if (!infinite && !overscrollEnabled) {\n            const { width: containerWidth = 0 } = measure(containerRef);\n\n            // If the item's total width is less than the container's width, then there is no need to scroll.\n            if (dataLength * size < containerWidth) return 0;\n\n            // Disable the \"overscroll\" effect\n            return dataLength * size - containerWidth;\n        }\n\n        return dataLength * size;\n    }, [infinite, size, dataLength, overscrollEnabled]);\n\n    const withSpring = React.useCallback(\n        (toValue: number, onFinished?: () => void) => {\n            'worklet';\n            const defaultWithAnimation: WithTimingAnimation = {\n                type: 'timing',\n                config: {\n                    duration: scrollAnimationDuration + 100,\n                    easing: Easing.easeOutQuart,\n                },\n            };\n\n            return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n                toValue,\n                (isFinished: boolean) => {\n                    'worklet';\n                    if (isFinished) onFinished && runOnJS(onFinished)();\n                }\n            );\n        },\n        [scrollAnimationDuration, withAnimation]\n    );\n\n    const endWithSpring = React.useCallback(\n        (onFinished?: () => void) => {\n            'worklet';\n            const origin = translation.value;\n            const velocity = scrollEndVelocity.value;\n            // Default to scroll in the direction of the slide (with deceleration)\n            let finalTranslation: number = withDecay({\n                velocity,\n                deceleration: 0.999,\n            });\n\n            // If the distance of the swipe exceeds the max scroll distance, keep the view at the current position\n            if (\n                typeof maxScrollDistancePerSwipe === 'number' &&\n                Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe\n            ) {\n                finalTranslation = origin;\n            } else {\n                /**\n                 * The page size is the same as the item size.\n                 * If direction is vertical, the page size is the height of the item.\n                 * If direction is horizontal, the page size is the width of the item.\n                 *\n                 * `page size` equals to `size` variable.\n                 * */\n                if (pagingEnabled) {\n                    // distance with direction\n                    const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1); // 1 or -1\n                    let page: number;\n\n                    if (Math.abs(scrollEndVelocity.value) >= size * 0.3) {\n                        const computed = offset < 0 ? Math.ceil : Math.floor;\n                        page = computed(-translation.value / size);\n                    } else {\n                        page = Math.round(-translation.value / size) - offset;\n                    }\n\n                    if (infinite) {\n                        const finalPage = page + offset;\n                        finalTranslation = withSpring(\n                            withProcessTranslation(-finalPage * size),\n                            onFinished\n                        );\n                    } else {\n                        const finalPage = Math.min(\n                            maxPage - 1,\n                            Math.max(0, page + offset)\n                        );\n                        finalTranslation = withSpring(\n                            withProcessTranslation(-finalPage * size),\n                            onFinished\n                        );\n                    }\n                }\n\n                if (!pagingEnabled && snapEnabled) {\n                    // scroll to the nearest item\n                    const nextPage =\n                        Math.round((origin + velocity * 0.4) / size) * size;\n                    finalTranslation = withSpring(\n                        withProcessTranslation(nextPage),\n                        onFinished\n                    );\n                }\n            }\n\n            translation.value = finalTranslation;\n\n            function withProcessTranslation(translation: number) {\n                if (!infinite && !overscrollEnabled) {\n                    const limit = getLimit();\n                    const sign = Math.sign(translation);\n                    return (\n                        sign *\n                        Math.max(0, Math.min(limit, Math.abs(translation)))\n                    );\n                }\n\n                return translation;\n            }\n        },\n        [\n            withSpring,\n            size,\n            maxPage,\n            infinite,\n            snapEnabled,\n            translation,\n            pagingEnabled,\n            scrollEndVelocity.value,\n            maxScrollDistancePerSwipe,\n            scrollEndTranslation.value,\n        ]\n    );\n\n    const onFinish = React.useCallback(\n        (isFinished: boolean) => {\n            'worklet';\n            if (isFinished) {\n                touching.value = false;\n                onScrollEnd && runOnJS(onScrollEnd)();\n            }\n        },\n        [onScrollEnd, touching]\n    );\n\n    const activeDecay = React.useCallback(() => {\n        'worklet';\n        touching.value = true;\n        translation.value = withDecay(\n            { velocity: scrollEndVelocity.value },\n            (isFinished) => onFinish(isFinished as boolean)\n        );\n    }, [onFinish, scrollEndVelocity.value, touching, translation]);\n\n    const resetBoundary = React.useCallback(() => {\n        'worklet';\n        if (touching.value) return;\n\n        if (translation.value > 0) {\n            if (scrollEndTranslation.value < 0) {\n                activeDecay();\n                return;\n            }\n            if (!infinite) {\n                translation.value = withSpring(0);\n                return;\n            }\n        }\n\n        if (translation.value < -((maxPage - 1) * size)) {\n            if (scrollEndTranslation.value > 0) {\n                activeDecay();\n                return;\n            }\n            if (!infinite)\n                translation.value = withSpring(-((maxPage - 1) * size));\n        }\n    }, [\n        touching.value,\n        translation,\n        maxPage,\n        size,\n        scrollEndTranslation.value,\n        infinite,\n        activeDecay,\n        withSpring,\n    ]);\n\n    useAnimatedReaction(\n        () => translation.value,\n        () => {\n            if (!pagingEnabled) resetBoundary();\n        },\n        [pagingEnabled, resetBoundary]\n    );\n\n    function withProcessTranslation(translation: number) {\n        'worklet';\n\n        if (!infinite && !overscrollEnabled) {\n            const limit = getLimit();\n            const sign = Math.sign(translation);\n            return sign * Math.max(0, Math.min(limit, Math.abs(translation)));\n        }\n\n        return translation;\n    }\n\n    const isGestureFinished = useSharedValue(true);\n    const handleScrollEnd = React.useCallback(() => {\n        isGestureFinished.value = true;\n        onScrollEnd?.();\n    }, [onScrollEnd]);\n\n    const panGestureEventHandler = useAnimatedGestureHandler<\n        PanGestureHandlerGestureEvent,\n        GestureContext\n    >(\n        {\n            onStart: (_, ctx) => {\n                touching.value = true;\n                ctx.validStart = true;\n                onScrollBegin && runOnJS(onScrollBegin)();\n\n                ctx.max = (maxPage - 1) * size;\n                if (!infinite && !overscrollEnabled) ctx.max = getLimit();\n\n                ctx.panOffset = translation.value;\n                cancelAnimation(translation);\n            },\n            onActive: (e, ctx) => {\n                if (ctx.validStart) {\n                    ctx.validStart = false;\n                    cancelAnimation(translation);\n                }\n                isGestureFinished.value = false;\n                touching.value = true;\n                let { translationX, translationY } = e;\n\n                const totalTranslation = isHorizontal.value\n                    ? translationX\n                    : translationY;\n\n                if (\n                    typeof maxScrollDistancePerSwipe === 'number' &&\n                    Math.abs(totalTranslation) > maxScrollDistancePerSwipe\n                ) {\n                    const overSwipe =\n                        Math.abs(totalTranslation) - maxScrollDistancePerSwipe;\n                    const dampedTranslation =\n                        maxScrollDistancePerSwipe + overSwipe * 0.5;\n\n                    translationX = isHorizontal.value\n                        ? dampedTranslation * Math.sign(translationX)\n                        : translationX;\n                    translationY = !isHorizontal.value\n                        ? dampedTranslation * Math.sign(translationY)\n                        : translationY;\n                }\n\n                const panTranslation = isHorizontal.value\n                    ? translationX\n                    : translationY;\n                if (!infinite) {\n                    if (translation.value > 0 || translation.value < -ctx.max) {\n                        const boundary = translation.value > 0 ? 0 : -ctx.max;\n                        const fixed =\n                            boundary -\n                            (Math.abs(ctx.panOffset - boundary) < 1\n                                ? translation.value\n                                : ctx.panOffset);\n                        const dynamic = panTranslation - fixed;\n                        translation.value = boundary + dynamic * 0.5;\n                        return;\n                    }\n                }\n\n                const translationValue = ctx.panOffset + panTranslation;\n\n                translation.value = translationValue;\n            },\n            onFinish: (e, ctx) => {\n                if (isGestureFinished.value) return;\n\n                const { velocityX, velocityY, translationX, translationY } = e;\n                scrollEndVelocity.value = isHorizontal.value\n                    ? velocityX\n                    : velocityY;\n                scrollEndTranslation.value = isHorizontal.value\n                    ? translationX\n                    : translationY;\n\n                const totalTranslation = isHorizontal.value\n                    ? translationX\n                    : translationY;\n\n                if (\n                    typeof maxScrollDistancePerSwipe === 'number' &&\n                    Math.abs(totalTranslation) > maxScrollDistancePerSwipe\n                ) {\n                    const nextPage =\n                        Math.round(\n                            (ctx.panOffset +\n                                maxScrollDistancePerSwipe *\n                                    Math.sign(totalTranslation)) /\n                                size\n                        ) * size;\n                    translation.value = withSpring(\n                        withProcessTranslation(nextPage),\n                        handleScrollEnd\n                    );\n                } else {\n                    endWithSpring(handleScrollEnd);\n                }\n\n                if (!infinite) touching.value = false;\n            },\n        },\n        [\n            pagingEnabled,\n            isHorizontal.value,\n            infinite,\n            maxPage,\n            size,\n            snapEnabled,\n            onScrollBegin,\n            handleScrollEnd,\n        ]\n    );\n\n    return (\n        <PanGestureHandler\n            {...panGestureHandlerProps}\n            enabled={enabled}\n            onGestureEvent={panGestureEventHandler}\n        >\n            <Animated.View\n                ref={containerRef}\n                testID={testID}\n                style={style}\n                onTouchStart={onTouchBegin}\n                onTouchEnd={onTouchEnd}\n            >\n                {props.children}\n            </Animated.View>\n        </PanGestureHandler>\n    );\n};\n\nexport const ScrollViewGesture = IScrollViewGesture;\n"]}
\ No newline at end of file
diff --git a/lib/typescript/ScrollViewGesture.d.ts b/lib/typescript/ScrollViewGesture.d.ts
index 38f4432ad9134a6950a848b59ec8bdddf0bf93ef..1086b11e55e471890fe0a3bd0a23cac107cecdc4 100644
--- a/lib/typescript/ScrollViewGesture.d.ts
+++ b/lib/typescript/ScrollViewGesture.d.ts
@@ -1,7 +1,7 @@
-import type { PropsWithChildren } from "react";
-import React from "react";
-import type { StyleProp, ViewStyle } from "react-native";
-import Animated from "react-native-reanimated";
+import type { PropsWithChildren } from 'react';
+import React from 'react';
+import type { StyleProp, ViewStyle } from 'react-native';
+import Animated from 'react-native-reanimated';
 interface Props {
     size: number;
     infinite?: boolean;
diff --git a/src/ScrollViewGesture.tsx b/src/ScrollViewGesture.tsx
index ae2a123bfa2b8a94636b09c505a971a3bcfbfd0b..3ca802f9a156b7164a06b5798572f14377b52743 100644
--- a/src/ScrollViewGesture.tsx
+++ b/src/ScrollViewGesture.tsx
@@ -1,365 +1,425 @@
-import type { PropsWithChildren } from "react";
-import React from "react";
-import type { StyleProp, ViewStyle } from "react-native";
-import type { PanGestureHandlerGestureEvent } from "react-native-gesture-handler";
-import { PanGestureHandler } from "react-native-gesture-handler";
+import type { PropsWithChildren } from 'react';
+import React from 'react';
+import type { StyleProp, ViewStyle } from 'react-native';
+import type { PanGestureHandlerGestureEvent } from 'react-native-gesture-handler';
+import { PanGestureHandler } from 'react-native-gesture-handler';
 import Animated, {
-  cancelAnimation,
-  measure,
-  runOnJS,
-  useAnimatedGestureHandler,
-  useAnimatedReaction,
-  useAnimatedRef,
-  useDerivedValue,
-  useSharedValue,
-  withDecay,
-} from "react-native-reanimated";
-
-import { Easing } from "./constants";
-import { CTX } from "./store";
-import type { WithTimingAnimation } from "./types";
-import { dealWithAnimation } from "./utils/dealWithAnimation";
+    cancelAnimation,
+    measure,
+    runOnJS,
+    useAnimatedGestureHandler,
+    useAnimatedReaction,
+    useAnimatedRef,
+    useDerivedValue,
+    useSharedValue,
+    withDecay,
+} from 'react-native-reanimated';
+
+import { Easing } from './constants';
+import { CTX } from './store';
+import type { WithTimingAnimation } from './types';
+import { dealWithAnimation } from './utils/dealWithAnimation';
 
 interface GestureContext extends Record<string, unknown> {
-  validStart: boolean
-  panOffset: number
-  max: number
+    validStart: boolean;
+    panOffset: number;
+    max: number;
 }
 
 interface Props {
-  size: number
-  infinite?: boolean
-  testID?: string
-  style?: StyleProp<ViewStyle>
-  onScrollBegin?: () => void
-  onScrollEnd?: () => void
-  onTouchBegin?: () => void
-  onTouchEnd?: () => void
-  translation: Animated.SharedValue<number>
+    size: number;
+    infinite?: boolean;
+    testID?: string;
+    style?: StyleProp<ViewStyle>;
+    onScrollBegin?: () => void;
+    onScrollEnd?: () => void;
+    onTouchBegin?: () => void;
+    onTouchEnd?: () => void;
+    translation: Animated.SharedValue<number>;
 }
 
 const IScrollViewGesture: React.FC<PropsWithChildren<Props>> = (props) => {
-  const {
-    props: {
-      vertical,
-      pagingEnabled,
-      snapEnabled,
-      panGestureHandlerProps,
-      loop: infinite,
-      scrollAnimationDuration,
-      withAnimation,
-      enabled,
-      dataLength,
-      overscrollEnabled,
-      maxScrollDistancePerSwipe,
-    },
-  } = React.useContext(CTX);
-
-  const {
-    size,
-    translation,
-    testID,
-    style = {},
-    onScrollBegin,
-    onScrollEnd,
-    onTouchBegin,
-    onTouchEnd,
-  } = props;
-
-  const maxPage = dataLength;
-  const isHorizontal = useDerivedValue(() => !vertical, [vertical]);
-  const touching = useSharedValue(false);
-  const scrollEndTranslation = useSharedValue(0);
-  const scrollEndVelocity = useSharedValue(0);
-  const containerRef = useAnimatedRef<Animated.View>();
-
-  // Get the limit of the scroll.
-  const getLimit = React.useCallback(() => {
-    "worklet";
-
-    if (!infinite && !overscrollEnabled) {
-      const { width: containerWidth = 0 } = measure(containerRef);
-
-      // If the item's total width is less than the container's width, then there is no need to scroll.
-      if (dataLength * size < containerWidth)
-        return 0;
-
-      // Disable the "overscroll" effect
-      return dataLength * size - containerWidth;
-    }
-
-    return dataLength * size;
-  }, [infinite, size, dataLength, overscrollEnabled]);
-
-  const withSpring = React.useCallback(
-    (toValue: number, onFinished?: () => void) => {
-      "worklet";
-      const defaultWithAnimation: WithTimingAnimation = {
-        type: "timing",
-        config: {
-          duration: scrollAnimationDuration + 100,
-          easing: Easing.easeOutQuart,
+    const {
+        props: {
+            vertical,
+            pagingEnabled,
+            snapEnabled,
+            panGestureHandlerProps,
+            loop: infinite,
+            scrollAnimationDuration,
+            withAnimation,
+            enabled,
+            dataLength,
+            overscrollEnabled,
+            maxScrollDistancePerSwipe,
         },
-      };
+    } = React.useContext(CTX);
+
+    const {
+        size,
+        translation,
+        testID,
+        style = {},
+        onScrollBegin,
+        onScrollEnd,
+        onTouchBegin,
+        onTouchEnd,
+    } = props;
+
+    const maxPage = dataLength;
+    const isHorizontal = useDerivedValue(() => !vertical, [vertical]);
+    const touching = useSharedValue(false);
+    const scrollEndTranslation = useSharedValue(0);
+    const scrollEndVelocity = useSharedValue(0);
+    const containerRef = useAnimatedRef<Animated.View>();
+
+    // Get the limit of the scroll.
+    const getLimit = React.useCallback(() => {
+        'worklet';
 
-      return dealWithAnimation(withAnimation ?? defaultWithAnimation)(
-        toValue,
-        (isFinished: boolean) => {
-          "worklet";
-          if (isFinished)
-            onFinished && runOnJS(onFinished)();
-        },
-      );
-    },
-    [scrollAnimationDuration, withAnimation],
-  );
-
-  const endWithSpring = React.useCallback(
-    (onFinished?: () => void) => {
-      "worklet";
-      const origin = translation.value;
-      const velocity = scrollEndVelocity.value;
-      // Default to scroll in the direction of the slide (with deceleration)
-      let finalTranslation: number = withDecay({ velocity, deceleration: 0.999 });
-
-      // If the distance of the swipe exceeds the max scroll distance, keep the view at the current position
-      if (typeof maxScrollDistancePerSwipe === "number" && Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe) {
-        finalTranslation = origin;
-      }
-      else {
-      /**
-       * The page size is the same as the item size.
-       * If direction is vertical, the page size is the height of the item.
-       * If direction is horizontal, the page size is the width of the item.
-      *
-      * `page size` equals to `size` variable.
-      * */
-        if (pagingEnabled) {
-          // distance with direction
-          const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1); // 1 or -1
-          const computed = offset < 0 ? Math.ceil : Math.floor;
-          const page = computed(-translation.value / size);
-
-          if (infinite) {
-            const finalPage = page + offset;
-            finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);
-          }
-          else {
-            const finalPage = Math.min(maxPage - 1, Math.max(0, page + offset));
-            finalTranslation = withSpring(withProcessTranslation(-finalPage * size), onFinished);
-          }
-        }
-
-        if (!pagingEnabled && snapEnabled) {
-          // scroll to the nearest item
-          const nextPage = Math.round((origin + velocity * 0.4) / size) * size;
-          finalTranslation = withSpring(withProcessTranslation(nextPage), onFinished);
-        }
-      }
+        if (!infinite && !overscrollEnabled) {
+            const { width: containerWidth = 0 } = measure(containerRef);
 
-      translation.value = finalTranslation;
+            // If the item's total width is less than the container's width, then there is no need to scroll.
+            if (dataLength * size < containerWidth) return 0;
 
-      function withProcessTranslation(translation: number) {
-        if (!infinite && !overscrollEnabled) {
-          const limit = getLimit();
-          const sign = Math.sign(translation);
-          return sign * Math.max(0, Math.min(limit, Math.abs(translation)));
+            // Disable the "overscroll" effect
+            return dataLength * size - containerWidth;
         }
 
-        return translation;
-      }
-    },
-    [
-      withSpring,
-      size,
-      maxPage,
-      infinite,
-      snapEnabled,
-      translation,
-      pagingEnabled,
-      scrollEndVelocity.value,
-      maxScrollDistancePerSwipe,
-      scrollEndTranslation.value,
-    ],
-  );
-
-  const onFinish = React.useCallback(
-    (isFinished: boolean) => {
-      "worklet";
-      if (isFinished) {
-        touching.value = false;
-        onScrollEnd && runOnJS(onScrollEnd)();
-      }
-    },
-    [onScrollEnd, touching],
-  );
-
-  const activeDecay = React.useCallback(() => {
-    "worklet";
-    touching.value = true;
-    translation.value = withDecay(
-      { velocity: scrollEndVelocity.value },
-      isFinished => onFinish(isFinished as boolean),
+        return dataLength * size;
+    }, [infinite, size, dataLength, overscrollEnabled]);
+
+    const withSpring = React.useCallback(
+        (toValue: number, onFinished?: () => void) => {
+            'worklet';
+            const defaultWithAnimation: WithTimingAnimation = {
+                type: 'timing',
+                config: {
+                    duration: scrollAnimationDuration + 100,
+                    easing: Easing.easeOutQuart,
+                },
+            };
+
+            return dealWithAnimation(withAnimation ?? defaultWithAnimation)(
+                toValue,
+                (isFinished: boolean) => {
+                    'worklet';
+                    if (isFinished) onFinished && runOnJS(onFinished)();
+                }
+            );
+        },
+        [scrollAnimationDuration, withAnimation]
     );
-  }, [onFinish, scrollEndVelocity.value, touching, translation]);
-
-  const resetBoundary = React.useCallback(() => {
-    "worklet";
-    if (touching.value)
-      return;
-
-    if (translation.value > 0) {
-      if (scrollEndTranslation.value < 0) {
-        activeDecay();
-        return;
-      }
-      if (!infinite) {
-        translation.value = withSpring(0);
-        return;
-      }
-    }
 
-    if (translation.value < -((maxPage - 1) * size)) {
-      if (scrollEndTranslation.value > 0) {
-        activeDecay();
-        return;
-      }
-      if (!infinite)
-        translation.value = withSpring(-((maxPage - 1) * size));
-    }
-  }, [
-    touching.value,
-    translation,
-    maxPage,
-    size,
-    scrollEndTranslation.value,
-    infinite,
-    activeDecay,
-    withSpring,
-  ]);
-
-  useAnimatedReaction(
-    () => translation.value,
-    () => {
-      if (!pagingEnabled)
-        resetBoundary();
-    },
-    [pagingEnabled, resetBoundary],
-  );
-
-  function withProcessTranslation(translation: number) {
-    "worklet";
-
-    if (!infinite && !overscrollEnabled) {
-      const limit = getLimit();
-      const sign = Math.sign(translation);
-      return sign * Math.max(0, Math.min(limit, Math.abs(translation)));
-    }
+    const endWithSpring = React.useCallback(
+        (onFinished?: () => void) => {
+            'worklet';
+            const origin = translation.value;
+            const velocity = scrollEndVelocity.value;
+            // Default to scroll in the direction of the slide (with deceleration)
+            let finalTranslation: number = withDecay({
+                velocity,
+                deceleration: 0.999,
+            });
+
+            // If the distance of the swipe exceeds the max scroll distance, keep the view at the current position
+            if (
+                typeof maxScrollDistancePerSwipe === 'number' &&
+                Math.abs(scrollEndTranslation.value) > maxScrollDistancePerSwipe
+            ) {
+                finalTranslation = origin;
+            } else {
+                /**
+                 * The page size is the same as the item size.
+                 * If direction is vertical, the page size is the height of the item.
+                 * If direction is horizontal, the page size is the width of the item.
+                 *
+                 * `page size` equals to `size` variable.
+                 * */
+                if (pagingEnabled) {
+                    // distance with direction
+                    const offset = -(scrollEndTranslation.value >= 0 ? 1 : -1); // 1 or -1
+                    let page: number;
+
+                    if (Math.abs(scrollEndVelocity.value) >= size * 0.3) {
+                        const computed = offset < 0 ? Math.ceil : Math.floor;
+                        page = computed(-translation.value / size);
+                    } else {
+                        page = Math.round(-translation.value / size) - offset;
+                    }
+
+                    if (infinite) {
+                        const finalPage = page + offset;
+                        finalTranslation = withSpring(
+                            withProcessTranslation(-finalPage * size),
+                            onFinished
+                        );
+                    } else {
+                        const finalPage = Math.min(
+                            maxPage - 1,
+                            Math.max(0, page + offset)
+                        );
+                        finalTranslation = withSpring(
+                            withProcessTranslation(-finalPage * size),
+                            onFinished
+                        );
+                    }
+                }
+
+                if (!pagingEnabled && snapEnabled) {
+                    // scroll to the nearest item
+                    const nextPage =
+                        Math.round((origin + velocity * 0.4) / size) * size;
+                    finalTranslation = withSpring(
+                        withProcessTranslation(nextPage),
+                        onFinished
+                    );
+                }
+            }
+
+            translation.value = finalTranslation;
+
+            function withProcessTranslation(translation: number) {
+                if (!infinite && !overscrollEnabled) {
+                    const limit = getLimit();
+                    const sign = Math.sign(translation);
+                    return (
+                        sign *
+                        Math.max(0, Math.min(limit, Math.abs(translation)))
+                    );
+                }
+
+                return translation;
+            }
+        },
+        [
+            withSpring,
+            size,
+            maxPage,
+            infinite,
+            snapEnabled,
+            translation,
+            pagingEnabled,
+            scrollEndVelocity.value,
+            maxScrollDistancePerSwipe,
+            scrollEndTranslation.value,
+        ]
+    );
 
-    return translation;
-  }
+    const onFinish = React.useCallback(
+        (isFinished: boolean) => {
+            'worklet';
+            if (isFinished) {
+                touching.value = false;
+                onScrollEnd && runOnJS(onScrollEnd)();
+            }
+        },
+        [onScrollEnd, touching]
+    );
 
-  const panGestureEventHandler = useAnimatedGestureHandler<
-  PanGestureHandlerGestureEvent,
-  GestureContext
-  >(
-    {
-      onStart: (_, ctx) => {
+    const activeDecay = React.useCallback(() => {
+        'worklet';
         touching.value = true;
-        ctx.validStart = true;
-        onScrollBegin && runOnJS(onScrollBegin)();
-
-        ctx.max = (maxPage - 1) * size;
-        if (!infinite && !overscrollEnabled)
-          ctx.max = getLimit();
-
-        ctx.panOffset = translation.value;
-      },
-      onActive: (e, ctx) => {
-        if (ctx.validStart) {
-          ctx.validStart = false;
-          cancelAnimation(translation);
+        translation.value = withDecay(
+            { velocity: scrollEndVelocity.value },
+            (isFinished) => onFinish(isFinished as boolean)
+        );
+    }, [onFinish, scrollEndVelocity.value, touching, translation]);
+
+    const resetBoundary = React.useCallback(() => {
+        'worklet';
+        if (touching.value) return;
+
+        if (translation.value > 0) {
+            if (scrollEndTranslation.value < 0) {
+                activeDecay();
+                return;
+            }
+            if (!infinite) {
+                translation.value = withSpring(0);
+                return;
+            }
         }
-        touching.value = true;
-        let { translationX, translationY } = e;
-
-        const totalTranslation = isHorizontal.value ? translationX : translationY;
 
-        if (typeof maxScrollDistancePerSwipe === "number" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {
-          const overSwipe = Math.abs(totalTranslation) - maxScrollDistancePerSwipe;
-          const dampedTranslation = maxScrollDistancePerSwipe + overSwipe * 0.5;
-
-          translationX = isHorizontal.value ? dampedTranslation * Math.sign(translationX) : translationX;
-          translationY = !isHorizontal.value ? dampedTranslation * Math.sign(translationY) : translationY;
-        }
-
-        const panTranslation = isHorizontal.value ? translationX : translationY;
-        if (!infinite) {
-          if ((translation.value > 0 || translation.value < -ctx.max)) {
-            const boundary = translation.value > 0 ? 0 : -ctx.max;
-            const fixed = boundary - ctx.panOffset;
-            const dynamic = panTranslation - fixed;
-            translation.value = boundary + dynamic * 0.5;
-            return;
-          }
+        if (translation.value < -((maxPage - 1) * size)) {
+            if (scrollEndTranslation.value > 0) {
+                activeDecay();
+                return;
+            }
+            if (!infinite)
+                translation.value = withSpring(-((maxPage - 1) * size));
         }
+    }, [
+        touching.value,
+        translation,
+        maxPage,
+        size,
+        scrollEndTranslation.value,
+        infinite,
+        activeDecay,
+        withSpring,
+    ]);
+
+    useAnimatedReaction(
+        () => translation.value,
+        () => {
+            if (!pagingEnabled) resetBoundary();
+        },
+        [pagingEnabled, resetBoundary]
+    );
 
-        const translationValue = ctx.panOffset + panTranslation;
+    function withProcessTranslation(translation: number) {
+        'worklet';
 
-        translation.value = translationValue;
-      },
-      onEnd: (e, ctx) => {
-        const { velocityX, velocityY, translationX, translationY } = e;
-        scrollEndVelocity.value = isHorizontal.value
-          ? velocityX
-          : velocityY;
-        scrollEndTranslation.value = isHorizontal.value
-          ? translationX
-          : translationY;
+        if (!infinite && !overscrollEnabled) {
+            const limit = getLimit();
+            const sign = Math.sign(translation);
+            return sign * Math.max(0, Math.min(limit, Math.abs(translation)));
+        }
 
-        const totalTranslation = isHorizontal.value ? translationX : translationY;
+        return translation;
+    }
 
-        if (typeof maxScrollDistancePerSwipe === "number" && Math.abs(totalTranslation) > maxScrollDistancePerSwipe) {
-          const nextPage = Math.round((ctx.panOffset + maxScrollDistancePerSwipe * Math.sign(totalTranslation)) / size) * size;
-          translation.value = withSpring(withProcessTranslation(nextPage), onScrollEnd);
-        }
-        else {
-          endWithSpring(onScrollEnd);
-        }
+    const isGestureFinished = useSharedValue(true);
+    const handleScrollEnd = React.useCallback(() => {
+        isGestureFinished.value = true;
+        onScrollEnd?.();
+    }, [onScrollEnd]);
+
+    const panGestureEventHandler = useAnimatedGestureHandler<
+        PanGestureHandlerGestureEvent,
+        GestureContext
+    >(
+        {
+            onStart: (_, ctx) => {
+                touching.value = true;
+                ctx.validStart = true;
+                onScrollBegin && runOnJS(onScrollBegin)();
+
+                ctx.max = (maxPage - 1) * size;
+                if (!infinite && !overscrollEnabled) ctx.max = getLimit();
+
+                ctx.panOffset = translation.value;
+                cancelAnimation(translation);
+            },
+            onActive: (e, ctx) => {
+                if (ctx.validStart) {
+                    ctx.validStart = false;
+                    cancelAnimation(translation);
+                }
+                isGestureFinished.value = false;
+                touching.value = true;
+                let { translationX, translationY } = e;
+
+                const totalTranslation = isHorizontal.value
+                    ? translationX
+                    : translationY;
+
+                if (
+                    typeof maxScrollDistancePerSwipe === 'number' &&
+                    Math.abs(totalTranslation) > maxScrollDistancePerSwipe
+                ) {
+                    const overSwipe =
+                        Math.abs(totalTranslation) - maxScrollDistancePerSwipe;
+                    const dampedTranslation =
+                        maxScrollDistancePerSwipe + overSwipe * 0.5;
+
+                    translationX = isHorizontal.value
+                        ? dampedTranslation * Math.sign(translationX)
+                        : translationX;
+                    translationY = !isHorizontal.value
+                        ? dampedTranslation * Math.sign(translationY)
+                        : translationY;
+                }
+
+                const panTranslation = isHorizontal.value
+                    ? translationX
+                    : translationY;
+                if (!infinite) {
+                    if (translation.value > 0 || translation.value < -ctx.max) {
+                        const boundary = translation.value > 0 ? 0 : -ctx.max;
+                        const fixed =
+                            boundary -
+                            (Math.abs(ctx.panOffset - boundary) < 1
+                                ? translation.value
+                                : ctx.panOffset);
+                        const dynamic = panTranslation - fixed;
+                        translation.value = boundary + dynamic * 0.5;
+                        return;
+                    }
+                }
+
+                const translationValue = ctx.panOffset + panTranslation;
+
+                translation.value = translationValue;
+            },
+            onFinish: (e, ctx) => {
+                if (isGestureFinished.value) return;
+
+                const { velocityX, velocityY, translationX, translationY } = e;
+                scrollEndVelocity.value = isHorizontal.value
+                    ? velocityX
+                    : velocityY;
+                scrollEndTranslation.value = isHorizontal.value
+                    ? translationX
+                    : translationY;
+
+                const totalTranslation = isHorizontal.value
+                    ? translationX
+                    : translationY;
+
+                if (
+                    typeof maxScrollDistancePerSwipe === 'number' &&
+                    Math.abs(totalTranslation) > maxScrollDistancePerSwipe
+                ) {
+                    const nextPage =
+                        Math.round(
+                            (ctx.panOffset +
+                                maxScrollDistancePerSwipe *
+                                    Math.sign(totalTranslation)) /
+                                size
+                        ) * size;
+                    translation.value = withSpring(
+                        withProcessTranslation(nextPage),
+                        handleScrollEnd
+                    );
+                } else {
+                    endWithSpring(handleScrollEnd);
+                }
+
+                if (!infinite) touching.value = false;
+            },
+        },
+        [
+            pagingEnabled,
+            isHorizontal.value,
+            infinite,
+            maxPage,
+            size,
+            snapEnabled,
+            onScrollBegin,
+            handleScrollEnd,
+        ]
+    );
 
-        if (!infinite)
-          touching.value = false;
-      },
-    },
-    [
-      pagingEnabled,
-      isHorizontal.value,
-      infinite,
-      maxPage,
-      size,
-      snapEnabled,
-      onScrollBegin,
-      onScrollEnd,
-    ],
-  );
-
-  return (
-    <PanGestureHandler
-      {...panGestureHandlerProps}
-      enabled={enabled}
-      onGestureEvent={panGestureEventHandler}
-    >
-      <Animated.View
-        ref={containerRef}
-        testID={testID}
-        style={style}
-        onTouchStart={onTouchBegin}
-        onTouchEnd={onTouchEnd}
-      >
-        {props.children}
-      </Animated.View>
-    </PanGestureHandler>
-  );
+    return (
+        <PanGestureHandler
+            {...panGestureHandlerProps}
+            enabled={enabled}
+            onGestureEvent={panGestureEventHandler}
+        >
+            <Animated.View
+                ref={containerRef}
+                testID={testID}
+                style={style}
+                onTouchStart={onTouchBegin}
+                onTouchEnd={onTouchEnd}
+            >
+                {props.children}
+            </Animated.View>
+        </PanGestureHandler>
+    );
 };
 
 export const ScrollViewGesture = IScrollViewGesture;
